"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6927,439,853],{72991:(e,t,i)=>{i.d(t,{U:()=>o});var s=i(41331),n=i(39503),a=i(31352),r=i(86070);const o=({menu:e,onClick:t,"aria-label":i})=>(0,r.jsx)(a.b,{menu:e,children:(0,r.jsx)(n.e,{size:n.M.xs,label:s.Ru.get("more"),ariaLabel:i,onClick:t})})},30911:(e,t,i)=>{i.d(t,{I:()=>l});var s=i(30758),n=i(82063),a=i(15231),r=i(59677),o=i(91360),d=i(62562),c=i(86070);const l=({uri:e,title:t,clickUrl:i,onClick:l,variant:u,semanticColor:m,testid:x="ad-link"})=>{const v=(0,s.useMemo)((()=>(0,r.o_)(i)?.toURLPath(!0)),[i]);let p;return v?p=(0,c.jsx)(o.N,{to:v,dir:"auto","data-testid":x,children:t}):i&&(p=(0,c.jsx)(n.Y,{href:i,"data-testid":x,onClick:l,semanticColor:m,standalone:!0,dir:"auto",children:t})),(0,c.jsx)(d.r,{title:t,children:(0,c.jsx)(a.E,{as:"p",variant:u,semanticColor:m,dir:"auto",children:p||t})},e)}},6927:(e,t,i)=>{i.r(t),i.d(t,{AdsNpv:()=>Ke,default:()=>$e});var s=i(39733),n=i(3918),a=i(36781),r=i(15231),o=i(41331),d=i(62562);const c={standardHeader:"OnnbOInFe49hYMQmhwUC",fixedHeader:"XZaBo7y3JfnBbjVV9TZo",verticalVideoHeader:"UP1rH6cQZiAZCdkPnDOg"};var l=i(86070);const u=({item:e,variant:t="bodyMediumBold",semanticColor:i="textBase",experience:s="standard"})=>{const n=c[`${s}Header`],a=e.isPodcastAd?o.Ru.get("ad-formats.npv.header.podcast-context"):o.Ru.get("ad-formats.npv.header.music-context");return(0,l.jsx)("div",{className:n,children:(0,l.jsx)(d.r,{children:(0,l.jsx)(r.E,{variant:t,semanticColor:i,children:a})},a)})};var m=i(65968);const x="UhO5sUnZ2AoTQjzRdVvw",v=({url:e})=>(0,l.jsx)("div",{className:x,children:(0,l.jsx)(m._,{testid:"cover-art-image",loading:"lazy",src:e})}),p=({item:e,visualEnhancementUrl:t})=>(0,l.jsx)(v,{item:e,url:t}),j=e=>(0,l.jsx)(l.Fragment,{}),h="pvAyLo3KN8QP7KxQtiub",f="r4EqB8Z5_aywMW_8I84P",g=e=>{const{item:t}=e,i=t?.metadata?.["ad.canvas.type"];return"video"===i?(0,l.jsx)(j,{...e}):(0,l.jsx)(p,{...e})},I=e=>(0,l.jsxs)("div",{className:h,children:[(0,l.jsx)("div",{className:f}),(0,l.jsx)(g,{...e})]});var y=i(72991),b=i(76497),C=i(45828);const E="iDW7b6oChePRpgfDFY3U",N=({item:e})=>(0,l.jsxs)("div",{className:E,children:[(0,l.jsx)(C.T,{item:e}),(0,l.jsx)(b.t,{item:e})]});var _=i(60439),k=i(10853);const T="JiMklw0itqYJ1aE76Vi8",M=({item:e})=>(0,l.jsxs)("div",{className:T,children:[(0,l.jsx)(k.ContextAdTitle,{item:e,surface:"AD_NPV"}),(0,l.jsx)(_.ContextAdSubtitle,{item:e,surface:"AD_NPV"})]});var A=i(23942),U=i(71726),V=i(95434),P=i(20769);function q(){const e=(0,P.vh)();return{linkUbiEvent:function({adId:t,ubiEventId:i,product:s,format:n,requestId:a}){e.send((0,V.A)({ad_id:t,ad_request_id:a,ad_format:n,content_type:s,ubi_event_id:i}))}}}var S=i(30758),w=i(4924),D=i(99186),R=i(41978),B=i(66475),F=i(36131),z=i(16547),O=i(78330),L=i(4139);const Z=({item:e,spec:t,contextTrack:i})=>{const s=(0,R.wA)(),n=(0,L.s)(),{linkUbiEvent:a}=q(),r=`${(0,A.Mj)(i)}_${(0,A.q5)(i)}`;return(0,l.jsx)(D.D,{role:"menuitem",testid:"about-this-ad-context-menu-item",leadingIcon:(0,l.jsx)(B.p,{size:"small"}),"aria-label":o.Ru.get("ad-formats.dsa.aboutThisAd"),onClick:()=>{s((0,z.Oc)()),s((0,F.b0)(e));const o=t.contextMenuFactory({identifier:e.metadata?.lineitem_id,reason:r}).triggerDsaFactory().hitUiNavigate({destination:"/context_menu"}),{interactionId:d}=n.logInteraction(o);a({adId:e.adId,requestId:e.requestId,ubiEventId:d,format:(0,A.Mj)(i),product:(0,A.q5)(i)})},divider:"before",children:o.Ru.get("ad-formats.dsa.aboutThisAd")})},Q=(0,S.memo)((function(e){return(0,l.jsx)(O.pZ,{value:"about-this-ad",children:(0,l.jsx)(Z,{...e})})})),H=(0,S.memo)((function({item:e,spec:t,contextTrack:i}){const s=(0,L.s)(),{linkUbiEvent:n}=q(),a=`${(0,A.Mj)(i)}_${(0,A.q5)(i)}`;return(0,S.useEffect)((()=>{(()=>{const r=s.logImpression(t.contextMenuFactory({identifier:e.metadata?.lineitem_id,reason:a}).impression());n({adId:e.adId,requestId:e.requestId,format:(0,A.Mj)(i),product:(0,A.q5)(i),ubiEventId:r})})()}),[]),(0,l.jsx)(O.pZ,{value:"ad",children:(0,l.jsxs)(w.W,{children:[(0,l.jsx)(O.pZ,{value:"ad-title",children:(0,l.jsx)(D.D,{role:"menuitem",testid:"ad-title-context-menu-item",divider:"after",disabled:!0,children:e.metadata.advertiser})}),(0,l.jsx)(Q,{item:e,spec:t,contextTrack:i})]})})}));var J=i(19019);const W="NYcvpWpgvQYZploOD6rI",Y="OpXrpghZvv_w9ygosJFP",K=({item:e,spec:t})=>{const i=(0,s.NC)(J.SeK,{loadingValue:!1}),n=(0,U.mr)(),a=(0,L.s)(),{linkUbiEvent:r}=q(),o=`${(0,A.Mj)(e)}_${(0,A.q5)(e)}`;return(0,l.jsxs)("div",{className:W,children:[(0,l.jsx)(M,{item:e}),(0,l.jsxs)("div",{className:Y,children:[(0,l.jsx)(N,{item:e}),i&&n?.isDsaEligible&&(0,l.jsx)("div",{"data-testid":"PanelHeader_AdContextMenuButton",children:(0,l.jsx)(y.U,{menu:(0,l.jsx)(H,{item:n,contextTrack:e,spec:t}),onClick:()=>{if(n){const i=t.infoContainerFactory().contextMenuButtonFactory({identifier:n.metadata?.lineitem_id,reason:o}).hitUiNavigate({destination:"/context_menu"}),{interactionId:s}=a.logInteraction(i);r({adId:n.adId,requestId:n.requestId,format:(0,A.Mj)(e),product:(0,A.q5)(e),ubiEventId:s})}}})})]})]})};var $=i(31387);const G=({item:e,context:t,index:i})=>t?(0,l.jsx)($.h,{context:t,item:e,index:i}):null,X="tD84X2SD0IicMx3osK8a",ee=({item:e,spec:t,currentPanel:i,canvasVisualEnhancementUrl:s})=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(I,{item:e,visualEnhancementUrl:s,currentPanel:i,spec:t}),(0,l.jsx)("div",{className:X,children:(0,l.jsx)(K,{item:e,currentPanel:i,spec:t})})]}),te=({item:e,spec:t,context:i,index:s,currentPanel:n})=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(G,{item:e,context:i,index:s}),(0,l.jsx)(K,{item:e,currentPanel:n,spec:t})]}),ie=e=>{const{item:t}=e,i=(0,s.NC)(J.Qdk,{loadingValue:!1}),n=t?.metadata?.["ad.canvas.type"],a="image"===n||"video"===n,r=t.metadata?.["ad.canvas.url"];return!!(i&&a&&"image"===n&&r)?(0,l.jsx)(ee,{...e,canvasVisualEnhancementUrl:r}):(0,l.jsx)(te,{...e})};var se=i(97500),ne=i.n(se),ae=i(7008),re=i(66371),oe=i(5052),de=i(20633),ce=i(49373),le=i(63774),ue=i(51229),me=i(91360);const xe="mJucukPuB6OTWgaD4MZk",ve="i3o8ABclZov7rz8zzKYP",pe=(0,S.lazy)((()=>i.e(163).then(i.bind(i,80163)))),je=({item:e,backgroundColor:t,className:i})=>{const s=(0,R.wA)(),{url:n,buttonMessage:a,tagline:r}=(0,A.iz)(e),d=a||o.Ru.get("ad-formats.learnMore");if(!n)return null;const c=ne()(xe,i),u=(0,ce.H)(n);return(0,l.jsx)(me.N,{to:u,"data-testid":"ad-companion-card",className:c,onClick:()=>{s((0,ue.q5)(le.c.COMPANION_CARD,le.V.AD_NPV))},children:(0,l.jsx)(ae.v,{style:{backgroundColor:t},className:ve,onClickHint:o.Ru.get("ad-formats.learnMore"),variant:"tinted",horizontalGap:(0,re.po)("looser"),id:e.uri,title:(0,l.jsx)(oe.d,{variant:"mestoBold","data-testid":"ad-companion-card-tagline",children:r||d}),trailing:(0,l.jsx)(S.Suspense,{fallback:(0,l.jsx)(de.V,{}),children:r?(0,l.jsx)(pe,{text:d,clickUrl:u,onClick:()=>{s((0,ue.q5)(le.c.CTA_BUTTON,le.V.AD_NPV))}}):(0,l.jsx)(de.V,{semanticColor:"textBase"})})})})};var he=i(25419),fe=i(15184),ge=i(78309),Ie=i(25281),ye=i(54648),be=i(72373),Ce=i(74946);function Ee(){const[e,t]=(0,S.useState)(new Map);return{selected:e,handleOptionClick:({optionId:i,isExclusive:s,questionType:n,position:a})=>{let r=new Map(e);n===he.xV.MULTI_SELECT?r=function({optionId:e,selected:t,isExclusive:i,position:s}){let n;t.has(e)?(n=new Map(t),n.delete(e)):n=function({optionId:e,selected:t,isExclusive:i,position:s}){const n=new Map(t);i&&n.clear();return t.forEach((({isExclusive:e},t)=>{e&&n.delete(t)})),n.set(e,{isExclusive:i,position:s}),n}({optionId:e,isExclusive:i,selected:t,position:s});return n}({optionId:i,isExclusive:s,selected:e,position:a}):n===he.xV.SINGLE_SELECT&&(r=function({optionId:e,selected:t,position:i}){let s=new Map(t);t.has(e)||(s=function({optionId:e,selected:t,position:i}){const s=new Map(t);return s.clear(),s.set(e,{isExclusive:!0,position:i}),s}({optionId:e,selected:t,position:i}));return s}({optionId:i,selected:e,position:a})),t(r)}}}const Ne="zr0dLusU4AgiRoEVZVx_",_e="aDISd8UFo3WaHvR_MBbQ",ke="FQKI6EvRALxogOFyociA",Te=({data:e})=>{const{selected:t,handleOptionClick:i}=Ee(),s=(s,n)=>{const a={id:s.id,"aria-label":`Select ${s.primaryText}`};return e.surveyQuestionType===he.xV.MULTI_SELECT?(0,l.jsx)(Ie.c,{...a,checked:t.has(s.id),onChange:()=>i({optionId:s.id,isExclusive:s.isExclusive,questionType:e.surveyQuestionType,position:n})}):(0,l.jsx)(ye.M,{...a,checked:t.has(s.id),onChange:()=>i({optionId:s.id,isExclusive:s.isExclusive,questionType:e.surveyQuestionType,position:n})})};return(0,l.jsxs)(be.g,{labelFor:e.id,withFieldset:!0,className:Ne,children:[(0,l.jsx)("div",{className:_e,children:e.surveyQuestionOptions.map(((n,a)=>(0,l.jsx)(ae.v,{className:ke,id:n.id,variant:"elevated",title:n.primaryText,leading:s(n,a),isSelected:t.has(n.id),onClick:()=>i({position:a,optionId:n.id,isExclusive:n.isExclusive,questionType:e.surveyQuestionType})},n.id)))}),(0,l.jsx)(Ce.$,{disabled:!0,size:"medium",fullWidth:!0,colorSet:"invertedLight",label:"Submit",children:o.Ru.get("ad-formats.survey-submit-button")})]})},Me="adTDAM0k8x2cVUF3gh29",Ae="Hsk_MEaCGP5naarBa1cW",Ue=({question:e})=>(0,l.jsxs)(ge.a,{className:Me,padding:"looser",children:[(0,l.jsx)(r.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",className:Ae,children:e.primaryText}),(0,l.jsx)(r.E,{paddingBottom:"base",as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:e.secondaryText}),(0,l.jsx)(Te,{data:e})]}),Ve=({surveyAd:e})=>{const t=(0,S.useMemo)((()=>e?.companions.find((e=>e.survey))?.survey),[e]);return t?(0,l.jsx)(Ue,{question:t?.surveyQuestions[0]}):null},Pe=({item:e})=>{const t=(0,s.NC)(J.o4S,{loadingValue:!1}),i=(0,P.vh)(),n=(0,U.mr)(),a=n?.requestId,r=n?.metadata;return(0,S.useEffect)((()=>{if(!t&&a){const{slot:t,format:s}=n;i.send((0,fe.A)({event:"event_errored",event_reason:"survey-ad-feature-disabled",ad_id:e.id,request_id:a,creative_id:r?.creative_id,lineitem_id:r?.lineitem_id,slot:t,format:(0,he.gh)(s),product_name:r?.product_name}))}}),[e,i,a,t,r,n]),n?(0,l.jsxs)("div",{children:[(0,l.jsx)(Ve,{surveyAd:n}),(0,l.jsx)(M,{item:e})]}):null},qe=e=>{const t=(0,R.d4)((e=>e.ads?.vto));return"audio"===e?.mediaType||!t?.isMinimized};var Se=i(25228);const we="M7UVXKPsARIM71fmtSUG",De="HKhLNVB5OsH5osqax9lk",Re="i_7T75rV7Rj7AyykwrCf",Be="na5oNvZD9KtuYIUiIUZg",Fe="_7QFCuyjgT6BwUe1JJVL",ze="g1fyNwi0G98CTbv9v4We",Oe=({item:e,context:t,index:i,currentPanel:s,spec:n})=>{const a=qe(e),r="portrait"===e.videoOrientation,o=r&&!a?we:"",d=ne()(Fe,{[ze]:r}),c=ne()({[Be]:r});return(0,l.jsxs)("div",{className:d,children:[a?(0,l.jsx)(G,{item:e,context:t,index:i}):(0,l.jsxs)("div",{className:Re,children:[r&&(0,l.jsx)("div",{className:De}),(0,l.jsx)("div",{className:c,children:(0,l.jsx)(Se.F,{})})]}),(0,l.jsx)("div",{className:o,children:(0,l.jsx)(K,{item:e,currentPanel:s,spec:n})})]})};var Le=i(13390),Ze=i(61626);var Qe=i(78487);const He="nONhpa6k5EMxHTR1RXhM",Je="cp7_8T7Q27pZ5zYXUFOW",We="IVGg8Hz4Py4BaPEyJz0T",Ye="tUurYuAJ2ZftcyLRFJ9z",Ke=({item:e,context:t,index:i,currentPanel:r})=>{const{logoImage:o}=(0,A.iz)(e),d=qe(e),c=e?.metadata?.["ad.canvas.type"],m="image"===c||"video"===c,x="portrait"===e.videoOrientation&&!d,{spec:v,UBIFragment:p}=(0,Qe.r)(n.m,{}),j=((e=null,t=0,i=Le.CpN)=>{const[s,n]=(0,S.useState)(i),a=(0,Ze.z)(e,i,"colorDark");return(0,S.useEffect)((()=>{setTimeout((()=>{n(a)}),t)}),[t,a]),s})((0,a.Df)(e)?o:e?.images[0].url||o,600),h=(0,s.NC)(J.gLA,{loadingValue:!1}),f=x?"verticalVideo":m?"fixed":"standard",g=(e=>{const t=e?.metadata?.["ad.companion.type"];return"survey"===t?"survey":(0,a.Df)(e)?"video":"audio"})(e);return(0,l.jsx)("div",{className:He,children:(0,l.jsx)(p,{spec:v,children:(0,l.jsxs)("div",{className:Je,children:[(0,l.jsxs)("div",{className:We,children:[(0,l.jsx)(u,{item:e,experience:f}),(()=>{switch(g){case"video":return(0,l.jsx)(Oe,{item:e,spec:v,index:i,currentPanel:r,context:t});case"survey":return(0,l.jsx)(Pe,{item:e});default:return(0,l.jsx)(ie,{item:e,context:t,index:i,currentPanel:r,spec:v})}})()]}),"survey"!==g?(0,l.jsx)(je,{item:e,className:Ye,...h&&{backgroundColor:j}}):null]})})})},$e=Ke},60439:(e,t,i)=>{i.r(t),i.d(t,{ContextAdSubtitle:()=>c,default:()=>l});var s=i(41978),n=i(30911),a=i(23942),r=i(63774),o=i(51229),d=i(86070);const c=({item:e,variant:t="bodyMedium",semanticColor:i="textSubdued",surface:c})=>{const{subtitle:l,url:u}=(0,a.iz)(e),m=(0,s.wA)();return(0,d.jsx)(n.I,{testid:"context-item-info-ad-subtitle",title:l,variant:t,semanticColor:i,uri:e.uri,clickUrl:u,onClick:()=>{m((0,o.q5)(r.c.ADVERTISER_SUBTITLE,r.V[c]))}})},l=c},10853:(e,t,i)=>{i.r(t),i.d(t,{ContextAdTitle:()=>c,default:()=>l});var s=i(41978),n=i(30911),a=i(23942),r=i(63774),o=i(51229),d=i(86070);const c=({item:e,surface:t,variant:i="titleSmall",semanticColor:c="textBase"})=>{const l=(0,s.wA)(),{title:u,url:m}=(0,a.iz)(e);return u?(0,d.jsx)(n.I,{title:u,variant:i,semanticColor:c,uri:e.uri,clickUrl:m,onClick:()=>{l((0,o.q5)(r.c.ADVERTISER_TITLE,r.V[t]))}}):null},l=c}}]);
//# sourceMappingURL=6927.js.map