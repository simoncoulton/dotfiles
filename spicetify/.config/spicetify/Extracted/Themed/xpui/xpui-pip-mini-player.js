"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3667],{36386:(e,t,i)=>{i.r(t),i.d(t,{PiPMiniPlayer:()=>vi});var s=i(30758),n=i(97500),l=i.n(n),a=i(39733),r=i(31435),o=i(41331),c=i(76335),u=i(15231),d=i(36781),m=i(51902),h=i(83604),g=i(62562),v=i(1677),x=i(82063),p=i(58394),k=i(89138),N=i(68341),C=i(9856),j=i.n(C);const y=()=>!0===j().getParser(window.navigator.userAgent).satisfies({chrome:">=123"}),f=()=>{y()&&window.focus()};var b=i(13023),S=i(29615),w=i(80451),D=i(78487),B=i(30912);const L="ZTvigd5RaqxtTdBzGide",R="jxNXLdUZfNhmCuYDbAKP",M="BBABURh2CZ6if4dMvq3j";var E=i(86070);const P=()=>{const{isPlayingRemotely:e,connectionStatus:t,remoteDeviceName:i,remoteDeviceType:s}=(0,S.v)((e=>{const t=(0,b.V)(e);return{isPlayingRemotely:t.isPlayingRemotely,connectionStatus:t.connectionStatus,remoteDeviceName:t.remoteDevice?.name,remoteDeviceType:t.remoteDevice?.type}}),B.a),{spec:n,logger:l}=(0,D.r)(p.s,{}),{triggerRef:a,toggleDevicePicker:r,isPickerOpen:o}=(0,N.z)(),{currentSession:c}=(0,w.D)(),d=Boolean(c?.active);if(!(e&&i&&s)&&!d)return(0,E.jsx)(E.Fragment,{});const m=(0,k.$A)(s||"unknown",t);return(0,E.jsxs)("div",{className:L,children:[(0,E.jsx)(m,{size:"xsmall",className:R,role:"presentation",semanticColor:"textPositive"}),(0,E.jsx)(g.r,{title:i,children:(0,E.jsx)(x.Y,{component:"button",onClick:()=>{const e=n.activeDeviceButtonFactory(),{interactionId:t}=l.logInteraction(o?e.hitUiHide():e.hitUiReveal());r(t),f()},ref:a,className:M,semanticColor:"textPositive",children:(0,E.jsx)(u.E,{variant:"bodySmall","aria-live":"polite",semanticColor:"textPositive",children:i})})},"context-item-connection-status")]})};var T=i(44608),O=i(64294),z=i(62433),I=i(35033),A=i(69180),V=i(70279),F=i(23090),W=i(91753);const _=({uri:e,spec:t,logger:i})=>{const n=(0,s.useRef)(e);n.current=e;const l=(0,A.z)(),a=(0,s.useMemo)((()=>t.playerControlsFactory()),[t]),r=(0,s.useCallback)((e=>{let t=null;"pause"===e?t=a.playPauseButtonFactory().hitPause({itemToBePaused:n.current}):"resume"===e&&(t=a.playPauseButtonFactory().hitResume({itemToBeResumed:n.current})),t&&i.logInteraction(t)}),[i,a]),o=(0,s.useCallback)((e=>{const t=a.likeButtonFactory(),s=e?t.hitLike({itemToBeLiked:n.current}):t.hitRemoveLike({itemNoLongerLiked:n.current});i.logInteraction(s)}),[i,a]),c=(0,s.useCallback)((()=>{const e=l.getState();if(!e)return;const t=a.previousButtonFactory().hitSkipToPrevious(H(e));i.logInteraction(t)}),[i,l,a]),u=(0,s.useCallback)((()=>{const e=l.getState();if(!e)return;const t=a.nextButtonFactory().hitSkipToNext(H(e));i.logInteraction(t)}),[i,l,a]),d=(0,s.useCallback)((e=>{const t=a.repeatButtonFactory();let s=null;switch(e){case V.p.REPEAT_TRACK:s=t.hitRepeatOneEnable();break;case V.p.REPEAT_CONTEXT:s=t.hitRepeatEnable();break;case V.p.REPEAT_NONE:s=t.hitRepeatDisable();break;default:(0,W.k)(e)}s&&i.logInteraction(s)}),[i,a]),m=(0,s.useCallback)((e=>{const t=e?"shuffle":"linear",s=e?"linear":"shuffle",l=a.shuffleButtonFactory({uri:n.current}).hitSelectShuffleMode({previousMode:s,selectedMode:t});i.logInteraction(l)}),[i,a]),h=(0,s.useCallback)((e=>{const t=a.volumeMuteButtonFactory();i.logInteraction("muted"===e?t.hitMutePlayback():t.hitUnmutePlayback())}),[i,a]),g=(0,s.useCallback)((e=>{const t=a.volumeBarFactory();i.logInteraction(t.hitSetVolume({newVolumePercentage:U(e)}))}),[i,a]),v=(0,s.useCallback)((e=>{const t=a.volumeBarFactory();i.logInteraction(t.dragSetVolume({newVolumePercentage:U(e)}))}),[i,a]),x=(0,s.useCallback)((e=>{const t=a.seekBackwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,a]);return{onClickSeekForward:(0,s.useCallback)((e=>{const t=a.seekForwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,a]),onClickSeekBack:x,onClickPlayPause:r,onClickLike:o,onClickSkipPrevious:c,onClickSkipNext:u,onClickRepeat:d,onClickShuffle:m,onClickVolumeButton:h,onClickVolumeBar:g,onDragVolumeBar:v,onClickShare:(0,s.useCallback)((()=>{const e=a.shareButtonFactory({uri:n.current});i.logInteraction(e.hitCopyToClipboard())}),[i,a]),onClickProgressBar:(0,s.useCallback)((e=>{const t=a.progressBarFactory();i.logInteraction(t.hitSeekToTime({msToSeekTo:e}))}),[i,a]),onDragProgressBar:(0,s.useCallback)((e=>{const t=a.progressBarFactory();i.logInteraction(t.dragSeekToTime({msToSeekTo:e}))}),[i,a])}};function H(e){return{itemToBeSkipped:e.item?.uri||"",positionMs:(0,F.s)(e)??-1,totalContentMs:e.duration??-1}}function U(e){return Math.floor(100*e)}var Z=i(90353),K=i(64375),Y=i(15339),Q=i(40425),q=i(32415);const J="d_srhjvwD_GUA3bcCWe4",X="Y1sIRIE9_S2jPP9L89qs",G="_qTFf4L4feIZxZ9RCcca",$="xLVzUYXestVWzpfiOPxA",ee="iKzG3nPAIAbL5CZAbKJU",te="lcyebQsHz0j8IkDXTAlB",ie="enGtDaA6WTTvIFhZz1wz",se="Kj0qWPCL3_VrCWRyNrMD",ne="Jo4RE0VhDecfPElNZucO";let le=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const ae=({item:e,spec:t,logger:i,size:s=le.xs,className:n})=>{const a=e.uri,r=(0,Y.X)(),o=(0,c.L)(),u=o?.context,{shouldShowFeedbackControls:d}=(0,I.d)(u),{onClickLike:m}=_({uri:a,spec:t,logger:i});return(0,q.v)(e)&&u?r&&(0,K.N)(e)?(0,E.jsx)("div",{className:ne,children:(0,E.jsx)(Z.o,{contextUri:e.metadata?.context_uri,id:e.uid??void 0,uri:e.uri,isActive:!0})}):(0,E.jsxs)("div",{className:se,children:[(0,E.jsx)(z.a,{context:u,item:e}),(0,E.jsx)(O.b,{size:d?le.xs:s,uri:a,onClick:m,className:l()(te,n),showDelayOnHover:1e3,isMiniPlayer:!0})]}):(0,Q.p)(e)?(0,E.jsx)(T.b,{size:s,uri:a,onClick:m,className:l()(te,n),condensed:!0}):null};var re=i(31303),oe=i(75360),ce=i(45339);const ue="yb0n1ZOvcsGEP6MtzpHw",de="wigNir143xMt4ihKMqrK",me="jbCLA5mslXPNLClPNh8h",he="srBfv7LB0I9QnzxBpeTV",ge="V2fqnNTxbJBIOeX14ZFW",ve="N5WQok6ioU_Dmf0F0O31",xe="NZlJ5gYuUaWvALQ2gGfg",pe="r5_6Dsophi0MbO6WWawA",ke="kWWqvihyBXMNH5W5rCwb",Ne="CsqhW5xDG4TO3VV20IZJ";const Ce=({item:e,onClick:t,className:i})=>{const{spec:s,logger:n}=(0,D.r)(r.w,{}),a=(0,d.XX)(e),o=(0,ce.N)(e),c=o?a?.title:e.name,x=o?a?.subtitle:e.name,p=(0,re.K)(),k=function(e){switch(e){case"SMALL":return{title:"bodySmall",subtitle:"marginal"};case"MEDIUM":return{title:"bodyMedium",subtitle:"bodySmall"};default:return{title:"titleSmall",subtitle:"bodySmall"}}}(p.vertical),N="SMALL"===p.vertical,{connectionStatus:C}=(0,S.v)((e=>({connectionStatus:(0,b.V)(e).connectionStatus})),B.a);return(0,E.jsxs)("div",{className:l()(ue,i),children:[(0,E.jsx)("div",{className:ge,children:(0,E.jsxs)(g.r,{title:c,children:[(0,E.jsx)(u.E,{"data-testid":"context-item-info-title",as:"div",variant:k.title,className:ve,dir:"auto",children:(0,E.jsx)(h.R,{item:e,onClick:t,adUrl:a?.url,children:c})}),C===oe.zP.CONNECTED&&(0,E.jsxs)(u.E,{"data-testid":"context-item-info-subtitles",as:"div",variant:k.title,className:l()(N?xe:he,ve),semanticColor:"textSubdued",children:[(0,E.jsx)("span",{className:l()(pe,{[ke]:!N}),children:"â€¢"}),(0,E.jsx)(m.n,{item:e,onClick:t})]})]},`${e.uri}-context-item-info-title`)}),(0,E.jsx)(v.l,{className:Ne,item:e,size:"DEFAULT"===p.vertical?"small":"xsmall",variant:"DEFAULT"===p.vertical?"bodySmall":"marginal",enableVideoButton:!0}),(0,E.jsx)("div",{className:xe,children:C===oe.zP.CONNECTED?(0,E.jsx)(P,{}):(0,E.jsx)(g.r,{title:x,children:(0,E.jsx)(u.E,{"data-testid":"context-item-info-subtitles",as:"div",variant:k.subtitle,className:xe,semanticColor:"textSubdued",children:(0,E.jsx)(m.n,{item:e,onClick:t})})},`${e.uri}-context-item-info-subtitles`)}),!N&&!o&&(0,E.jsx)("div",{className:de,children:(0,E.jsx)("div",{className:me,children:(0,E.jsx)(ae,{item:e,spec:s,logger:n,size:le.sm})})})]})};var je=i(77),ye=i(74946),fe=i(45292),be=i(83052),Se=i(65014),we=i(29971);const De="U7qJ1UbUI0C76xXqYVQY",Be="wSLUJtAztEeB6cSHzEjf",Le="ivh1pWB_obHbkRTZRwlA",Re="CppZQsRDE7tQVl_Uo22Y";i(47536),i(89686);const Me={title:"bodyMediumBold",subtitle:"bodySmall"},Ee={title:"titleSmall",subtitle:"bodyMedium"},Pe=s.memo((()=>{const{openURLWithSessionTransfer:e}=(0,we.L)(),t="SMALL"===(0,re.K)().vertical?Me:Ee,i=(0,Se.D)("loggedin_upgrade_button"),n=(0,je.Zp)(),l=(0,be.k)(),{url:a,isExternal:r}=l,c=(0,fe.W)(),d=(0,s.useCallback)((()=>{c({intent:"upgrade-to-premium",type:"click"}),!1===r?n("/premium"):e(i(a),"_blank")}),[c,r,a,n,e,i]);return(0,E.jsx)("div",{className:De,children:(0,E.jsxs)("div",{className:Be,children:[(0,E.jsx)(u.E,{variant:t.title,dir:"auto",className:Le,children:o.Ru.get("web-player.pip-mini-player.upsell.title")}),(0,E.jsx)(u.E,{variant:t.subtitle,semanticColor:"textSubdued",children:o.Ru.get("web-player.pip-mini-player.upsell.subtitle")}),(0,E.jsx)("div",{className:Re,children:(0,E.jsx)(ye.$,{onClick:d,size:"small",children:o.Ru.get("web-player.pip-mini-player.upsell.cta-button")})})]})})}));var Te=i(23942),Oe=i(91360);const ze="document-pip-hover-element",Ie="document-pip-cover-art",Ae="document-pip-cover-art-placeholder",Ve="transparent";var Fe=i(30557),We=i(9519);function _e(e,t,i,s){try{if(!e)return i;const n=getComputedStyle(e);if(!n)return i;const l=n.getPropertyValue(t),a=parseInt(l.replace(s,""),10);return isNaN(a)?i:a}catch(e){return i}}var He=i(19019),Ue=i(53222),Ze=i(65968),Ke=i(94996),Ye=i(52037);const Qe="wF7I8x6BNoB5TCxuQM6p",qe="mTVLkxm92ETj9KUKj6We",Je="_ZzrZWfp7kDAE2lh9_Wc",Xe="Z7EJBI5IBlrJ1ze7IeeW",Ge="v5BmE36Bbgt7MSjmR6Xc",$e="CAQW4b5xnSED1cuM6jcp",et="Pvgy7FmdedDiDBpWdtwf",tt="GSgApqjTNqV1hBpu3zeT",it="cRGZivJEkNn8_Q7kaHpT",st="jOhwShRZLQkG51TckxOL",nt="AfV1a_jkmN7Ep4mov4u7",lt="QrDtnomlujlNGYbhYEFQ",at="Jgem6BNDvKfWTBl3cX4W",rt="ePoosDhdXDFF4p3vqKLd",ot="QGE_nRKg4bMbNKF_e7PM",ct="ddMrU_P5vADrfZCD5KQP",ut="x591ODwZ11KBAWKS6SiE",dt="yyE7Kg8ClZLrYU03bSoA",mt="GJYNq4mAAnZScLzJPrZb",ht="mBYWBXnQ_1G3IS2q0zUM",gt="F7RVFhPYBKleXl4ulrwe",vt="Q4qOSqJZ_dfNRxOBhsGE",xt="hix4I_WU5iQPehn_m5h2",pt="gOpH1qSy5WZp_dGqBjSO",kt="ZeSR2WPUGMRnwFnGoYp3",Nt="NEKBj5FX847wFAhR57Bm",Ct="dahc71cxY4Nzk6ebA2ZW",jt="vYL9B3OtXRb7_BrVMqPs",yt="dJY9K_yl2SIFh2sQav8J",ft="B62SqNdB5yicbOhkDWDy",bt="ixLnBGpFXBDXJBwJAFN2",St="xG6CoSo4Qt0PDw74JLdM",wt="COvUYZFLWyAYMoZxYBWV",Dt="gDC7KBL5Cbad2gkb2ECA",Bt="YjoaIyvleWu6L_m3iqwr",Lt="UqNXNAlAlrI35gbbTIlL",Rt="JWR17pOvN2l0NGHVAi9Q",Mt="RwUrgB_h_amNMENcAmKM";const Et=({item:e,imageUrl:t})=>{const i=(0,Te.iz)(e),s=(0,E.jsx)(Ze._,{className:ut,src:t,loading:"eager",testid:Ie,children:(0,E.jsx)("div",{className:dt,children:(0,E.jsx)(Ue.s,{size:"xlarge",type:e.type,"data-testid":Ae})})});return i.url?(0,E.jsx)(Oe.N,{className:ct,to:i.url,children:s}):s},Pt=()=>{const{item:e,context:t}=(0,c.L)()??{},i=(0,s.useMemo)((()=>(0,Ye.h)(e?.images??void 0,{desiredSize:640})),[e?.images,640]),n=(0,b.l)(),r=(0,a.NC)(He.a4n),{isYourDJNarrator:o}=(0,We.CV)(),u=(0,s.useRef)(null),d=(0,s.useCallback)((()=>{if(!u.current)return;const e=u.current?.children[0];if(!e)return;const{offsetWidth:t,offsetHeight:i}=u.current;let s=Math.min(t,i);s=Math.min(s,640),1===_e(e,"--extra-padding",0,"")&&(s-=Math.max(Math.min(.1*s,64),12)),e.width=e.height=s}),[]),m=(0,Ke.ox)();(0,s.useEffect)((()=>(m?.addEventListener("resize",d),()=>{m?.removeEventListener("resize",d)})),[d,m]);const h=e&&function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(e),g=(0,ce.N)(e);let v=!h;!h||!n&&r||(v=!0);const x=(0,s.useMemo)((()=>v&&!g&&y()),[g,v]);let p;p=o?(0,E.jsx)(Fe.aU,{}):g?(0,E.jsx)(Et,{item:e,imageUrl:i}):(0,E.jsx)(Ze._,{className:ut,src:i,loading:"eager",testid:Ie,children:(0,E.jsx)("div",{className:dt,children:(0,E.jsx)(Ue.s,{size:"xlarge",type:e?.type,"data-testid":Ae})})});const k=(0,s.useCallback)((()=>{x&&f()}),[x]),N=(0,s.useCallback)((e=>{"Enter"===e.key&&k()}),[k]);return e&&t&&v?(0,E.jsx)("div",{className:l()(rt,{[ot]:x}),ref:e=>{u.current=e,d()},role:"button",tabIndex:x?0:-1,onClick:k,onKeyDown:N,children:p}):null};var Tt=i(88340),Ot=i(45518),zt=i(74554),It=i(20769),At=i(13643),Vt=i(48783),Ft=i(30083),Wt=i(11522);const _t=()=>(0,E.jsx)("svg",{width:"7",height:"8",viewBox:"0 0 7 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:Ge,children:(0,E.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.37397 1.94965C6.60829 1.71534 6.60829 1.33544 6.37397 1.10113C6.13966 0.866812 5.75976 0.866812 5.52544 1.10113L3.47461 3.15196L1.42422 1.10157C1.18991 0.86726 0.81001 0.86726 0.575695 1.10158C0.341381 1.33589 0.341381 1.71579 0.575695 1.9501L2.62608 4.00049L0.575696 6.05087C0.341381 6.28519 0.341381 6.66509 0.575696 6.8994C0.81001 7.13372 1.18991 7.13372 1.42422 6.8994L3.47461 4.84902L5.52544 6.89985C5.75976 7.13416 6.13966 7.13416 6.37397 6.89985C6.60829 6.66554 6.60829 6.28564 6.37397 6.05132L4.32314 4.00049L6.37397 1.94965Z",fill:"#912616"})}),Ht=s.memo((({className:e})=>"SMALL"!==(0,re.K)().vertical?(0,E.jsx)(Tt.U,{className:e}):(0,E.jsx)(Ot.M,{className:e}))),Ut=({className:e})=>{const{setVideoPlayerUIFlag:t}=(0,At.d)(),{onClick:i}=(0,Ft.D)({}),n=(0,s.useCallback)((()=>{t(Vt.n.documentPip,!1),i()}),[t,i]),a=(0,It.mv)();return(0,E.jsxs)("div",{style:{display:"var(--mini-player-drag-display)"},className:l()(e,Je),children:[(0,E.jsx)("button",{className:Xe,onClick:n,children:a.operatingSystem===Wt.f.macOS?(0,E.jsx)(_t,{}):(0,E.jsx)(zt.M,{size:"xsmall",className:Ge})}),(0,E.jsx)(Ht,{className:et}),(0,E.jsx)("div",{className:$e})]})};var Zt=i(51146),Kt=i(11892),Yt=i(17577),Qt=i(33473),qt=i(59677),Jt=i(14392),Xt=i(27046);const Gt=({onClick:e,item:t,className:i,showDelayOnHover:s})=>(0,E.jsx)(Xt.Zp,{label:(0,qt.gH)(t.uri)?o.Ru.get("context-menu.copy-episode-link"):o.Ru.get("context-menu.copy-track-link"),showDelay:s,children:(0,E.jsx)("div",{className:l()(i),children:(0,E.jsx)(Jt.w,{sharingInfo:null,uri:t.uri,onClick:e,size:"small",interactionData:{type:"click",intent:"share"},disableTooltip:!0,ariaLabel:(0,qt.gH)(t.uri)?o.Ru.get("context-menu.copy-episode-link"):o.Ru.get("context-menu.copy-track-link"),className:ee})})});var $t=i(92375),ei=i(5437),ti=i(45841);const ii=s.memo((({pipWindowSize:e,item:t,spec:i,logger:s,direction:n,volumeIconRef:a})=>{const{onClickPlayPause:r,onClickVolumeButton:o,onClickVolumeBar:c,onDragVolumeBar:u,onClickSeekBack:d,onClickSeekForward:m}=_({uri:t.uri,spec:i,logger:s}),h=(0,Kt.YQ)(u,500,{leading:!1,trailing:!0});return"DEFAULT"===e.vertical?(0,E.jsx)(Yt.v3,{onClick:m,className:J}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:yt,children:(0,E.jsx)(Qt.M,{mode:Qt.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:n,onToggleMuteClick:o,onVolumeBarClick:c,onVolumeBarDrag:h,className:J,volumeIconRef:a,isMiniPlayer:!0,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:jt,children:(0,E.jsx)(Yt.hC,{onClick:d,className:J,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Nt,children:(0,E.jsx)(Yt.xJ,{onClick:r,className:l()(J,ie),showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Ct,children:(0,E.jsx)(Yt.v3,{onClick:m,className:J,showDelayOnHover:1e3})})]})})),si=s.memo((({item:e,spec:t,logger:i,pipWindowSize:s,direction:n,volumeIconRef:a})=>{const{onClickPlayPause:r,onClickSkipPrevious:o,onClickSkipNext:c,onClickVolumeButton:u,onClickVolumeBar:d,onDragVolumeBar:m,onClickSeekBack:h,onClickSeekForward:g,onClickShare:v}=_({uri:e.uri,spec:t,logger:i}),x=(0,Kt.YQ)(m,500,{leading:!1,trailing:!0}),p="SMALL"===s.vertical,k="DEFAULT"===s.vertical,N="SMALL"===s.horizontal,C=k&&!N;return(0,E.jsxs)(E.Fragment,{children:[p&&(0,E.jsx)("div",{className:jt,children:(0,E.jsx)("div",{className:X,children:(0,E.jsx)(ae,{item:e,spec:t,logger:i,className:l()(J,te,"encore-base-set")})})}),(0,E.jsx)("div",{className:ft,children:(0,E.jsx)(Qt.M,{mode:Qt.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:p?"horizontal":n,onToggleMuteClick:u,onVolumeBarClick:d,onVolumeBarDrag:x,className:J,volumeIconRef:a,isMiniPlayer:!0,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:yt,children:(0,E.jsx)(Yt.hC,{onClick:h,className:J,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:St,children:(0,E.jsx)(Yt.dQ,{onClick:o,className:J,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Nt,children:(0,E.jsx)(Yt.xJ,{iconSize:C?"medium":"small",onClick:r,className:l()(J,ie),showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:bt,children:(0,E.jsx)(Yt.$K,{onClick:c,className:J,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Ct,children:(0,E.jsx)(Yt.v3,{onClick:g,className:J,showDelayOnHover:1e3})}),!p&&(0,E.jsx)(Gt,{item:e,onClick:v,className:J,showDelayOnHover:1e3}),p&&(0,E.jsx)("div",{className:wt,children:(0,E.jsx)(Gt,{item:e,onClick:v,className:J,showDelayOnHover:1e3})})]})})),ni=s.memo((({item:e,spec:t,logger:i,pipWindowSize:s,direction:n,volumeIconRef:a})=>{const{onClickPlayPause:r,onClickSkipPrevious:o,onClickSkipNext:c,onClickVolumeButton:u,onClickVolumeBar:d,onDragVolumeBar:m,onClickShuffle:h,onClickRepeat:g,onClickShare:v}=_({uri:e.uri,spec:t,logger:i}),x=(0,Kt.YQ)(m,500,{leading:!1,trailing:!0}),p="SMALL"===s.vertical,k="DEFAULT"===s.vertical,N="SMALL"===s.horizontal,C=k&&!N;return(0,E.jsxs)(E.Fragment,{children:[p&&(0,E.jsx)("div",{className:X,children:(0,E.jsx)("div",{className:jt,children:(0,E.jsx)(ae,{item:e,spec:t,logger:i,className:l()(J,te,"encore-base-set")})})}),!p&&(0,E.jsx)("div",{className:ft,children:(0,E.jsx)(Qt.M,{mode:Qt.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:n,onToggleMuteClick:u,onVolumeBarClick:d,onVolumeBarDrag:x,className:J,volumeIconRef:a,isMiniPlayer:!0,showDelayOnHover:1e3})}),p&&(0,E.jsx)("div",{className:ft,children:(0,E.jsx)(Qt.M,{mode:Qt.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:"horizontal",onToggleMuteClick:u,onVolumeBarClick:d,onVolumeBarDrag:x,className:J,volumeIconRef:a,isMiniPlayer:!0,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:l()(St,J),children:(0,E.jsx)(ei.w,{renderEnabled:()=>(0,E.jsx)($t.a,{size:"small",withSnackbar:!1,className:$,showDelayOnHover:1e3}),renderDisabled:()=>(0,E.jsx)(Yt.uP,{onClick:h,className:$,showDelayOnHover:1e3})})}),(0,E.jsx)("div",{className:yt,children:(0,E.jsx)(Yt.dQ,{onClick:o,className:G,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Nt,children:(0,E.jsx)(Yt.xJ,{iconSize:C?"medium":"small",onClick:r,className:l()(J,ie),showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:Ct,children:(0,E.jsx)(Yt.$K,{onClick:c,className:G,showDelayOnHover:1e3})}),(0,E.jsx)("div",{className:bt,children:(0,E.jsx)(Yt.s_,{onClick:g,className:J,showDelayOnHover:1e3})}),!p&&(0,E.jsx)(Gt,{item:e,onClick:v,className:J,showDelayOnHover:1e3}),p&&(0,E.jsx)("div",{className:wt,children:(0,E.jsx)(Gt,{item:e,onClick:v,className:J,showDelayOnHover:1e3})})]})})),li=s.memo((({item:e,spec:t,logger:i})=>{const n=e.uri,[l,a]=s.useState("vertical"),r=s.useRef(null),o=(0,re.K)();if(s.useEffect((()=>{if(r.current){const e=r.current.getBoundingClientRect().top;a(e-26<80?"horizontal":"vertical")}}),[o.height]),!n)return null;if((0,ce.N)(e))return(0,E.jsx)(ii,{item:e,spec:t,logger:i,pipWindowSize:o,direction:l,volumeIconRef:r});const c=function(e){if((0,Q.p)(e)||(0,ti.d)(e))return"audio"===e.mediaType||"mixed"===e.mediaType;return!1}(e);return c?(0,E.jsx)(si,{item:e,spec:t,logger:i,pipWindowSize:o,direction:l,volumeIconRef:r}):(0,E.jsx)(ni,{item:e,spec:t,logger:i,pipWindowSize:o,direction:l,volumeIconRef:r})}));var ai=i(44801);const ri=s.memo((({item:e,spec:t,logger:i,onDragEnd:n,onDragStart:l})=>{const a=e.uri,{onClickProgressBar:r,onDragProgressBar:o}=_({uri:a,spec:t,logger:i}),c=(0,s.useCallback)(((e,t)=>{switch(t){case"drag":return o(e);case"hit":return r(e);default:return(0,W.k)(t)}}),[r,o]);return(0,E.jsx)(ai.x,{isPreview:!1,onChange:c,onDragStart:l,onDragEnd:n,timerPlacement:"above"})}));function oi(e){if(!e)return null;return{width:e.innerWidth,height:e.innerHeight}}var ci=i(50416);var ui=i(61626),di=i(49151);var mi=i(54572),hi=i(52891),gi=i(26205);const vi=(0,s.memo)((()=>{const e=(0,s.useRef)(null),[t,i]=(0,s.useState)(!1),n=(0,re.K)(),u="SMALL"===n.vertical,d="SMALL"===n.horizontal,[m,h]=(0,s.useState)(null),[g,v]=(0,s.useState)(null),x=(0,s.useRef)(null),[p,k]=(0,s.useState)(!1),{item:N,context:C}=(0,c.L)()??{},j=640,b=(0,a.NC)(He.Ln9),S=(0,s.useMemo)((()=>(0,Ye.h)(N?.images??void 0,{desiredSize:j})),[N?.images,j]),w=(0,ui.z)(S,Ve),B=(0,a.NC)(He.a4n);((e,t)=>{const i=(0,di.o)((e=>e?.nextItems?.[0]),((e,t)=>e?.uri===t?.uri)),n=(0,s.useMemo)((()=>(0,Ye.h)(i?.images??void 0,{desiredSize:e})),[i?.images,e]);(0,ui.z)(n,t)})(j,Ve);const{spec:L,logger:R}=(0,D.r)(r.w,{});(({spec:e,logger:t})=>{const i=(0,Ke.ox)(),n=(0,s.useRef)(null);null===n.current&&(n.current=oi(i)),(0,ci.s)((()=>{const s=oi(i);null!==s&&null!==n.current&&(t.logInteraction(e.dragUiResize2d({startWidthPx:n.current.width,startHeightPx:n.current.height,endWidthPx:s.width,endHeightPx:s.height})),n.current=s)}),{throttleTime:500,leading:!1,trailing:!0})})({logger:R,spec:L}),(({spec:e,logger:t,pipWindow:i})=>{(0,s.useEffect)((()=>{if(!i)return;const s=s=>{if(s.currentTarget===i){const i=e.windowControlsFactory().closeButtonFactory().hitUiHide();t.logInteraction(i)}};return i.addEventListener("pagehide",s),()=>{i.removeEventListener("pagehide",s)}}),[t,i,e])})({logger:R,spec:L,pipWindow:window.documentPictureInPicture?.window??null});const{setVideoPlayerUIFlag:M}=(0,At.d)(),[P,T]=(0,s.useState)("");(0,s.useLayoutEffect)((()=>{T(qe)}),[]);const O=function(){const e=(0,Ke.ox)(),[t,i]=(0,s.useState)(!1);return(0,ci.s)((()=>{const t=oi(e);null!==t&&(t.width<=300&&t.height<=300?i(!0):i(!1))}),{throttleTime:500,leading:!1,trailing:!0}),t}();(0,s.useEffect)((()=>{B&&M(Vt.n.documentPip,!0)}),[B,M]);const{enqueueSnackbar:z}=(0,hi.d)(),I=(0,s.useCallback)((e=>{var t;(t=e.target)&&"object"==typeof t&&"nodeName"in t&&"A"===t.nodeName&&"_blank"!==e.target.target&&(y()?f():z(o.Ru.get("web-player.pip-mini-player.snackbar.link-opened-in-main-window")))}),[z]);((e,t)=>{const i=(0,Ke.ox)(),n=t??i;(0,s.useEffect)((()=>{e&&n&&(n.document.title=e)}),[e,n])})(o.Ru.get("web-player.pip-mini-player.window-title"));const A=(0,s.useRef)(null),V=(0,a.NC)(He.HYy),F=(0,gi.t)(L,V),[W,_]=(0,s.useState)(!1),[H,U]=(0,s.useState)(!1),Z=(0,s.useRef)(null),K=(0,s.useRef)(null),Y=(0,s.useCallback)((()=>{_(!0),Z.current&&clearTimeout(Z.current),Z.current=setTimeout((()=>{_(!1);const e=_e(A.current,"--mouse-active-over-controls-fadeout-timeout",300,"ms");K.current&&clearTimeout(K.current),K.current=setTimeout((()=>{K.current=null}),e)}),1e3)}),[]),Q=(0,s.useCallback)((()=>{K.current||_(!1)}),[]),q=(0,s.useCallback)((()=>{U(!0)}),[]),J=(0,s.useCallback)((()=>{U(!1)}),[]),X=(0,s.useCallback)((()=>{i(!0)}),[]),G=(0,s.useCallback)((()=>{i(!1)}),[]),$=(0,s.useCallback)((()=>{k(!0)}),[]),ee=(0,s.useCallback)((()=>{k(!1),G()}),[G]),te=(0,s.useCallback)((()=>{if(x.current){const e=x.current.getBoundingClientRect(),t=.5,i=.5,s=e.width*t-10,n=e.width*i-10;h(s),v(n)}}),[]);(0,s.useEffect)((()=>{te()}),[n.width,te]),(0,s.useEffect)((()=>{const e=()=>{te()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[te]),(0,s.useEffect)((()=>{const e=new ResizeObserver(te),t=x.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}}),[te]);const ie=(0,s.useCallback)((e=>{if(!t)return;if(x.current){const t=x.current.getBoundingClientRect(),i=(e.clientX-t.left)/t.width,s=1-i,n=t.width*i-10,l=t.width*s-10;n>40&&l>80&&(h(n),v(l))}}),[t]);if(!N||!C)return null;const se=function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(N),ne=(0,ce.N)(N),le={"--background-color":w,"--background-image-url":`url(${S})`,"--background-image-width":"640px","--background-image-height":"640px","--player-controls-max-width":ne?"140px":"260px",display:"var(--mini-player-display)",cursor:t?"grabbing":"default"};return!b&&!ne&&O?(0,E.jsx)(Pe,{}):(0,E.jsx)(mi.n,{domRootRef:e,children:(0,E.jsxs)("div",{ref:A,className:l()("encore-dark-theme","encore-small-devices-theme",Qe),style:{"--mini-player-display":"none","--mini-player-drag-display":"none"},children:[(0,E.jsx)(Ut,{}),(0,E.jsxs)("div",{className:l()(it,st),style:le,ref:F,onMouseLeave:ee,onMouseEnter:$,children:[(0,E.jsx)("div",{className:l()(nt,{[lt]:!se}),"data-testid":"pip-hover-element",children:(0,E.jsx)("div",{className:at,id:"document-pip-main-container",children:(0,E.jsx)(Pt,{})})}),!u&&(0,E.jsx)(Ce,{item:N,className:pt,onClick:I}),u?(0,E.jsxs)("div",{ref:x,className:kt,style:{display:"grid",gridTemplateColumns:`${m}px 20px ${g}px`,gridTemplateAreas:"'contextinfo divider playercontrols'"},dir:"ltr",role:"button",tabIndex:0,onMouseMove:ie,onMouseUp:G,onMouseLeave:G,children:[(0,E.jsx)("div",{className:Rt,children:(0,E.jsx)(Ce,{item:N,className:pt,onClick:I})}),p&&!d&&(0,E.jsx)("div",{className:l()(Dt,{[Lt]:t}),onMouseDown:X,dir:"ltr",role:"button",tabIndex:0,children:(0,E.jsx)("div",{className:Bt,dir:"ltr"})}),(0,E.jsxs)("div",{className:l()("encore-over-media-set",mt,{[xt]:W||H,[vt]:(0,ce.N)(N)}),dir:"ltr","data-testid":ze,onMouseEnter:Y,onMouseMove:Y,onMouseLeave:Q,children:[(0,E.jsx)("div",{className:l()(ht,Mt),dir:"ltr",children:(0,E.jsx)(li,{item:N,spec:L,logger:R})}),(0,E.jsx)("div",{className:l()(gt),dir:"ltr",children:(0,E.jsx)(ri,{item:N,spec:L,logger:R,onDragEnd:J,onDragStart:q})})]})]}):(0,E.jsxs)("div",{className:l()("encore-over-media-set",mt,{[xt]:W||H,[vt]:(0,ce.N)(N)}),dir:"ltr","data-testid":ze,onMouseEnter:Y,onMouseMove:Y,onMouseLeave:Q,children:[(0,E.jsx)("div",{className:l()(ht),dir:"ltr",children:(0,E.jsx)(li,{item:N,spec:L,logger:R})}),(0,E.jsx)("div",{className:l()(gt),dir:"ltr",children:(0,E.jsx)(ri,{item:N,spec:L,logger:R,onDragEnd:J,onDragStart:q})})]})]}),(0,E.jsx)("div",{className:P,children:(0,E.jsx)(Zt.B,{fadeIn:!1})}),(0,E.jsx)("div",{ref:e,className:tt})]})})}))}}]);
//# sourceMappingURL=xpui-pip-mini-player.js.map