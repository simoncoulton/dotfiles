"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2355],{92738:(e,t,a)=>{a.d(t,{k:()=>d});var s=a(30758),i=a(97500),r=a.n(i),n=a(7008),l=a(22912),o=a(27565),c=a(86070);const d=(0,s.memo)((function(e){const{breakpoint:t,className:a,showSeparator:s,isActive:i,...d}=e;return(0,c.jsx)(n.v,{className:r()(a,o.A.entityRow,{[o.A.separator]:s,[o.A.active]:i}),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:t===l.e.SMALL?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:t===l.e.SMALL?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px",...d})}))},79083:(e,t,a)=>{a.d(t,{X:()=>d});var s=a(15231),i=a(27235),r=a(44817),n=a(98913);const l="dK79XxAEu3SEKJ2jS_Qy",o="guiUbDD6Ga8Qpatq2jQ8";var c=a(86070);const d=({isExplicit:e,is19PlusOnly:t,isPaid:a,children:d})=>(0,c.jsxs)("div",{className:l,children:[e&&(0,c.jsx)(r.g,{}),a&&(0,c.jsx)(i.K,{}),t&&(0,c.jsx)(n.q,{size:16}),(0,c.jsx)(s.E,{variant:"bodySmall",className:o,children:d})]})},46669:(e,t,a)=>{a.d(t,{q:()=>r});var s=a(61108),i=a(86070);const r=e=>(0,i.jsx)(s.R,{size:"small",version:s.H.secondary,...e})},35544:(e,t,a)=>{a.d(t,{k:()=>l});var s=a(1360),i=a(42838),r=a(27565),n=a(86070);const l=({description:e,children:t})=>(0,n.jsxs)("div",{className:r.A.body,children:[e&&(0,n.jsx)(s.v,{lineClamp:2,as:"div",dir:"auto",children:(0,n.jsx)(i.q,{asTextContent:!0,html:e})}),t]})},11725:(e,t,a)=>{a.d(t,{F:()=>r});var s=a(27565),i=a(86070);const r=({actions:e,playButton:t})=>(0,i.jsxs)("div",{className:s.A.footer,children:[(0,i.jsx)("div",{className:s.A.actions,children:e}),t]})},64818:(e,t,a)=>{a.d(t,{e:()=>o});var s=a(22912),i=a(56192),r=a(1514),n=a(35481),l=a(86070);const o=({images:e,breakpoint:t,type:a,name:o})=>{const c=(0,n._)(),d=t===s.e.SMALL?r.Qe.SIZE_64:r.Qe.SIZE_112;return(0,l.jsx)(i.b,{fadeIn:!0,images:c(e,r.BZ[d]),shape:i.u.ROUNDED_CORNERS,size:d,iconSize:t===s.e.SMALL?"medium":"xlarge",type:a,title:o,loadingMode:"eager"})}},8284:(e,t,a)=>{a.d(t,{U:()=>n});var s=a(5052),i=a(27565),r=a(86070);const n=({children:e})=>(0,r.jsx)(s.d,{lineClamp:2,as:"div",dir:"auto",className:i.A.title,children:e})},45849:(e,t,a)=>{a.d(t,{u:()=>p});var s=a(97500),i=a.n(s),r=a(11892),n=a(70462),l=a(58571),o=a(45292),c=a(6309),d=a(4139),u=a(63089),m=a(86070);const p=({uri:e,src:t,playAriaLabel:a,onClick:s,isPlaying:p,isActive:x,isLocked:h,isEpisode:y,isVideo:g,spec:b})=>{const f=(0,o.W)(),j=(0,d.s)(),A=(0,r.YQ)((t=>{let a;if(f({type:"click",intent:p?"pause":"play"}),b){const t=b.playbackButtonFactory();let s;s=x&&p?t.hitPause({itemToBePaused:e}):x&&!p?t.hitResume({itemToBeResumed:e}):t.hitPlay({itemToBePlayed:e}),a=j.logInteraction(s)}s(t,a)}),c.d,{leading:!0,trailing:!1});return(0,m.jsxs)("div",{className:u.A.rowImageWithPlay,children:[(0,m.jsx)(l.e,{src:t,isEpisode:y,isVideo:g}),(0,m.jsx)(n.x,{className:i()(u.A.rowPlayPauseButton,u.A.rowImagePlayPauseButton),iconClassName:u.A.rowPlayPauseIcon,onClick:A,isPlaying:p,isLocked:h,playAriaLabel:a})]})}},69026:(e,t,a)=>{a.d(t,{M:()=>c});var s=a(57574),i=a(30758);const r=[],n=(e,t)=>{const a=[];let s=e,i=t;for(;s>0;){const t=Math.ceil(s/i);a.push({first:e-s,nrItems:t}),s-=t,i--}return a};var l=a(86070);const o=e=>{const{itemsInNode:t,renderItem:a,renderPlaceholder:i,estimatedHeight:r,scrollNodeRef:c,nrRowsOverscan:d=10,nrInitialInView:u=0,firstIndex:m,heights:p,fanOut:x=2}=e,{ref:h,inView:y,entry:g}=(0,s.Wx)({root:c.current,rootMargin:d*r+"px 0px",initialInView:m<u}),b=`${m}-${t}`;p[b]??=r*t,g?.boundingClientRect?.height&&(p[b]=g.boundingClientRect.height);const f=p[b];return 0===t?null:y?1===t?(0,l.jsx)("div",{ref:h,role:"presentation",children:a(m,f)}):(0,l.jsx)("div",{ref:h,role:"presentation",children:n(t,x).map((({first:t,nrItems:a},s)=>(0,l.jsx)(o,{...e,itemsInNode:a,firstIndex:m+t},s)))}):(0,l.jsx)("div",{ref:h,role:"presentation",children:i(`${f}px`)})},c=e=>{const t=(e=>{const t=r.find((t=>t.key===e))?.heights||{},a=(0,i.useCallback)((t=>{if(!e)return;const a=r.findIndex((t=>t.key===e));-1===a?r.push({key:e,heights:t}):(r[a].heights=t,r.push(r.splice(a,1)[0])),r.length>10&&r.shift()}),[e]),s=(0,i.useRef)({...t});return(0,i.useEffect)((()=>()=>{a(s.current)}),[a]),s.current})(e.persistanceKey);return(0,l.jsx)(o,{...e,itemsInNode:e.totalCount,firstIndex:0,heights:t,nrInitialInView:e.nrInitialInView})}},56302:(e,t,a)=>{a.d(t,{u:()=>s});let s=function(e){return e.TITLE="title",e.SUBTITLE="subTitle",e}({})},22912:(e,t,a)=>{a.d(t,{$:()=>n,e:()=>r});var s=a(69798),i=a(57968);const r={SMALL:"small",LARGE:"large"},n=()=>(0,i.y)()===s.E.SMALL?"small":"large"},16319:(e,t,a)=>{a.r(t),a.d(t,{ThisIsTourCard:()=>u,default:()=>u,useThisisPlaylistExtensionQuery:()=>h});var s=a(15231),i=a(89531),r=a(41331),n=a(91360),l=a(4139),o=a(26205),c=a(89569),d=a(86070);const u=e=>{const{artistImageUrl:t,artistName:a,artistConcertsUri:u,spec:m}=e,p=(0,l.s)(),x=(0,o.t)(m.concertsCardFactory({identifier:a,uri:u,reason:"This is On Tour phase 1 MVP"}));return t&&a&&u?(0,d.jsxs)("section",{ref:x,className:"contentSpacing",children:[(0,d.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:r.Ru.get("concerts")}),(0,d.jsx)("div",{className:c.A.cards,children:(0,d.jsxs)("div",{className:c.A.tourCard,"data-testid":"on-tour-card",children:[(0,d.jsx)("img",{className:c.A.cardImage,src:t,alt:""}),(0,d.jsxs)("div",{className:c.A.cardContent,children:[(0,d.jsx)(s.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:c.A.subtitle,children:r.Ru.get("concerts_on_tour")}),(0,d.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",className:c.A.title,semanticColor:"textBase",children:a}),(0,d.jsx)(n.N,{to:u,className:c.A.cardLink,children:(0,d.jsx)(i.n,{as:"span",size:"small",onClick:()=>{const e=m.concertsCardFactory({identifier:a,uri:u,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:u});p.logInteraction(e)},className:c.A.cardButton,children:r.Ru.get("concerts_see_all_events")})})]})]})})]}):null};var m=a(96266),p=a(61869);const x=new m.l("thisisPlaylistExtension","query","906c2e14927400c8a71645c647576ce032f837a112d5e6f9375b19c80445c8cf",null),h=(e,t)=>(0,p.I)(x,e,t)},2182:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Di});var s=a(30758),i=a(41978),r=a(77),n=a(15231),l=a(39733),o=a(64785),c=a(59677),d=a(41331),u=a(11841),m=a(23915),p=a(86070);const x=(e,t,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(a),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),h=({clickTracking:e,clickThrough:t,thirdPartyImpression:a,impression:r,logoUrl:l,advertiserName:o,creativeId:c,lineItemId:u})=>{const h=(0,i.wA)(),[y,g]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(h((0,m.tb)()),h((0,m.i2)(x("event_viewed",c,u))),()=>{h((0,m.zV)())})),[h,c,u]),(0,p.jsxs)("div",{className:"sponsor-container",children:[(0,p.jsx)(n.E,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:d.Ru.get("playlist.presented_by",o)}),(0,p.jsxs)("div",{className:"sponsor-logo",children:[(0,p.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:t,onClick:()=>{h((0,m.i2)(x("event_clicked",c,u))),g(!0)},children:(0,p.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:l,alt:o,"data-ta-id":"sponsor-logo"})}),(0,p.jsx)("img",{className:"sponsor-logo__imp-pixel",src:r,alt:""}),a&&(0,p.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),y&&(0,p.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},y=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((t=>t.ads.sponsoredPlaylist.previewAd||t.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,s.useEffect)((()=>{a||t((0,m.uP)(e))}),[t,e,a]),a?(0,p.jsx)("div",{children:(0,p.jsx)(h,{...a})}):null},g=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),r=(0,i.d4)((e=>e.ads.sponsoredPlaylist.previewAd));(0,s.useEffect)((()=>{a||t((0,m.uU)())}),[t,a]);const n=r||a&&((e,t)=>{const a=Date.now()/1e3,s=e.split(":"),i=s[s.length-1];return t.some((({playlistId:e,endTime:t,startTime:s})=>e===i&&a>=s&&a<(t||a+1)))})(e,a);return n?(0,p.jsx)(y,{playlistUri:e}):null};var b=a(81389),f=a(62462),j=a(71823),A=a(83627),R=a(7029),T=a(4888),C=a(20641),v=a(76484),k=a(71036),S=a(6488),I=a(16319),E=a(32860),N=a(74554),P=a(20633),L=a(69524),U=a(96266),w=a(61869);const _=new U.l("queryInlineCurationSearchV2","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),M=new U.l("queryInlineCurationSearchV2Booklists","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),B=new U.l("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),O=new U.l("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null);var D=a(86317),F=a(42428),$=a(88593);function V(e){return{type:D.c.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:e.authors?.map((e=>e?.name)).join(d.Ru.getSeparator())||"",images:e.coverArt?.sources??[],isLocked:(0,F.e$)(e.accessInfo),isExplicit:e.contentRating?.label===$.x7.Explicit,durationMs:e.duration?.totalMilliseconds??0,topics:e.genres?.map((e=>({uri:e.destinationUri,title:e.contextualName})))||[],signifierText:e.accessInfo?.signifier?.text??"",rating:{average:e.rating?.averageRating?.average??0,showAverage:!!e.rating?.averageRating?.showAverage},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var z=a(61903),W=a(5627),q=a(19693),K=a(45485),H=a(91753);function Q(e){return{type:D.c.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,q.r)(e.coverArt)}}function G(e){if("Album"!==e.data.__typename)return null;return Q(e.data)}function Y(e){const t=e?.items.filter((e=>"AlbumResponseWrapper"===e.__typename));return(t??[]).map((e=>G(e))).filter(K.P)||[]}function J(e){if("Artist"!==e.data.__typename)return null;const t=e.data;return{type:D.c.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,q.r)(t.visuals.avatarImage)}}function X(e){if("Episode"!==e.data.__typename)return null;const t=e.data,a=t.podcastV2.data;return"Podcast"!==a.__typename?null:{type:D.c.EPISODE,uri:t.uri,id:t.id,name:t.name,images:(0,q.r)(t.coverArt),isExplicit:t.contentRating?.label===z.x7.Explicit,is19PlusOnly:t.contentRating?.label===z.x7.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:t.playability.playable}}function Z(e){const t=(0,q.r)(e.albumOfTrack?.coverArt||null);return{type:D.c.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:t.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===z.x7.Explicit,is19PlusOnly:e.contentRating?.label===z.x7.NineteenPlus}}function ee(e){if("Track"!==e.data.__typename)return null;return Z(e.data)}function te(e){return(e?.itemsV2??[]).map((e=>{const t=(0,W.Jt)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return G(t);case"ArtistResponseWrapper":return J(t);case"EpisodeResponseWrapper":return X(t);case"TrackResponseWrapper":return ee(t);default:return(0,H.k)(t),null}})).filter(K.P)||[]}function ae(e){return(e?.itemsV2??[]).map((e=>{const t=(0,W.Jt)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?V(t.data):null})).filter(K.P)||[]}const se=async(e,t,a,s=0,i=10,r=10)=>{const n={term:t,offset:s,limit:i,numberOfTopResults:r};if(a){const a=await e(M,n),s=a?.data?.searchV2;return s?(l=t,{albums:[],artists:[],episodes:[],tracks:[],topResults:ae(s.topResultsV2)??[],query:l}):null}var l;const o=await e(_,n),c=o?.data?.searchV2;return c?function(e,t){return{albums:Y(e.albumsV2)??[],artists:(i=e.artists,((i?.items??[]).map((e=>J(e))).filter(K.P)||[])??[]),episodes:(s=e.episodes,((s?.items??[]).map((e=>X(e))).filter(K.P)||[])??[]),tracks:(a=e.tracksV2,((a?.items??[]).map((e=>ee(e.item))).filter(K.P)||[])??[]),topResults:te(e.topResultsV2)??[],query:t};var a,s,i}(c,t):null},ie=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e(B,i),n=r?.data?.albums;return n?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((e=>Z(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,H.k)(t),null}}(n):null},re=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e(O,i),n=r?.data?.artists;return n?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((e=>Q(e)))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((e=>Z(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,H.k)(t),null}}(n):null};let ne=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const le=(e,t)=>"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:("NAV_TO_RESULTS"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:ne.SEARCH,term:t.term,title:""}]}),e);var oe=a(97500),ce=a.n(oe),de=a(11892),ue=a(25244);const me="playlist-inlineSearchBox-filterInputContainer",pe="playlist-inlineSearchBox-filterInput",xe="playlist-inlineSearchBox-overlay",he="playlist-inlineSearchBox-searchIconContainer",ye="playlist-inlineSearchBox-searchIcon",ge="playlist-inlineSearchBox-clearButton",be=s.memo((function({placeholder:e,onChange:t=(()=>{}),onFocus:a=(()=>{})}){const[i,r]=(0,s.useState)(""),l=(0,s.useRef)(null),o=(0,de.YQ)((e=>{t(e)}),200),c=(0,s.useCallback)((e=>{const t=e.currentTarget.value;r(t),o(t)}),[r,o]),u=(0,s.useCallback)((()=>{l.current&&l.current.focus(),r(""),t("")}),[r,t]),m=(0,s.useCallback)((e=>{"Escape"===e.key&&i&&u()}),[i,u]);return(0,p.jsxs)("div",{className:me,role:"search",children:[(0,p.jsx)(n.E,{as:"input",variant:"bodySmall",ref:l,className:ce()(pe),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:c,onKeyDown:m,onFocus:a,value:i}),(0,p.jsxs)("div",{className:xe,children:[(0,p.jsx)("span",{className:he,children:(0,p.jsx)(ue.C,{size:"small",className:ye,"aria-hidden":"true"})}),i&&(0,p.jsx)("button",{className:ge,onClick:u,"aria-label":d.Ru.get("search.a11y.clear-input"),children:(0,p.jsx)(N.M,{size:"small"})})]})]})}));var fe=a(57237),je=a(42247),Ae=a(89531),Re=a(87500),Te=a(68776),Ce=a(96678),ve=a(2304),ke=a(39314),Se=a(39503),Ie=a(14392),Ee=a(31352),Ne=a(93720),Pe=a(1687),Le=a(79083),Ue=a(46669),we=a(92738),_e=a(35544),Me=a(11725),Be=a(64818),Oe=a(8284),De=a(56302),Fe=a(22912),$e=a(91360),Ve=a(71115),ze=a(61535),We=a(72888),qe=a(65312),Ke=a(60285),He=a(98882),Qe=a(60901),Ge=a(34432),Ye=a(4139),Je=a(78487),Xe=a(19845),Ze=a(27565);const et="i3wVxndfxMEqUujUJOYc",tt="XFwXZEToljeXDRWQYSEm",at="hZ_wTiRO870PNY1cRKCd",st=(0,s.memo)((function({book:e,contextUri:t,featureIdentifier:a,index:i,sharingInfo:l,uid:o,rating:u,isRecommendation:m=!1,canRemove:x=!1,showSeparator:h=!1,highlightText:y=(e=>e),...g}){const{name:b,description:f,isLocked:j,isExplicit:A,images:R,type:T,uri:C,authorName:v,consumptionCapExplanation:k,durationMs:S,topics:I=[],signifierText:E}=e,N=(0,Ye.s)(),{spec:P}=(0,Je.r)(Ce.m,{data:{position:i,uri:C}}),{isPlaying:L,isActive:U,togglePlay:w}=(0,He.P)({uri:C},{featureIdentifier:a}),_=(0,r.Zp)(),M=(0,c.o_)(C).toURLPath(!0),{addItems:B}=(0,Qe.x)(t),O=(0,Fe.$)(),D=(0,Ge.p)(C),[F,V]=(0,ze.A)(C),z=(0,qe.T)(C),W=O===Fe.e.SMALL?"small":"medium",q=(0,s.useCallback)((()=>{N.logInteraction(P.addButtonFactory().hitAddToPlaylist({playlist:t,itemToBeAdded:C})),B([C],{after:"end"})}),[N,P,t,C,B]),K=(0,s.useCallback)((()=>{if(j&&!k)_(M);else{const e=(0,Ve.$I)({isPlaying:L,isActive:U,spec:P.playButtonFactory(),logger:N,uri:C});w({loggingParams:e})}}),[k,U,j,L,N,_,P,w,C,M]),H=(0,s.useCallback)((()=>{N.logInteraction(P.genreLinkFactory({uri:I[0].uri??""}).hitUiNavigate({destination:I[0].uri??""}))}),[N,P,I]),Q=(0,p.jsx)(Oe.U,{children:y(b,De.u.TITLE)}),G=(0,p.jsx)(_e.k,{description:f,children:(0,p.jsxs)(Le.X,{isExplicit:!!A,children:[!0===u?.showAverage&&void 0!==u.average&&(0,p.jsxs)("span",{children:[(0,p.jsx)(je.j,{size:"xsmall",className:et}),d.Ru.formatNumber(u.average,{maximumFractionDigits:1})]}),I.at(0)?.title&&(0,p.jsx)($e.N,{className:tt,to:I[0].uri??"",onClick:H,children:I[0].title}),S&&(0,p.jsx)(Xe.j,{isPlaying:!1,fullyPlayed:D?.state===$.H7.Completed,durationMs:S,position:D?.playPositionMilliseconds})]})}),Y=(0,p.jsx)(Pe.p,{uri:C,uid:o,contextUri:t,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:x}),J=!j&&!!!k,X=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ve.M,{className:ce()({[Ze.A.visibleAction]:F}),isAdded:F,onClick:()=>{F?N.logInteraction(P.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:C})):N.logInteraction(P.saveToLibraryButtonFactory().hitLike({itemToBeLiked:C})),V(!F)},size:W,isAudiobook:!0,condensedAll:!0,condensed:!0}),(0,p.jsx)(ke.I,{className:ce()({[Ze.A.visibleAction]:(0,We.X)(z)}),uri:C,onClick:(e,t)=>{t===Ke.NV.ADD&&N.logInteraction(P.downloadButtonFactory().hitDownload({itemToDownload:C}))},size:W,canDownload:J,condensedAll:!0}),(0,p.jsx)(Ie.w,{uri:C,sharingInfo:l??null,interactionData:{intent:"share",type:"click"},size:W,onClick:()=>{N.logInteraction(P.shareButtonFactory().hitShare({entityToBeShared:C,shareId:l?.shareId??""}))},condensedAll:!0}),(0,p.jsx)(Ee.b,{menu:Y,children:(0,p.jsx)(Se.e,{label:d.Ru.get("more.label.context",b),size:W,onClick:()=>{N.logInteraction(P.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),Z=m?null:(0,p.jsx)(Me.F,{actions:X,playButton:(0,p.jsx)(Ue.q,{onClick:K,isPlaying:L,ariaPlayLabel:d.Ru.get("tracklist.a11y.play",b,v),ariaPauseLabel:d.Ru.get("tracklist.a11y.pause",b,v),locked:j})}),ee=(0,p.jsx)(Be.e,{images:R,name:b,type:T,breakpoint:O}),te=E?(0,p.jsx)(n.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:E}):null,ae=m?(0,p.jsx)(Ae.n,{size:"small",onClick:q,children:d.Ru.get("playlist.extender.button.add")}):null,se=(0,p.jsxs)(Re.j,{hasTextSeparator:!0,children:[(0,p.jsxs)(p.Fragment,{children:[m&&j&&(0,p.jsx)(Te.u,{semanticColor:"textSubdued",title:d.Ru.get("mwp.header.content.unavailable"),size:"xsmall",className:at}),d.Ru.get("card.tag.audiobook")]}),y(v,De.u.SUBTITLE)]});return(0,p.jsx)(Ne.h,{menu:Y,onShow:()=>{N.logInteraction(P.secondaryHitUiReveal())},children:(0,p.jsx)(we.k,{breakpoint:O,id:`book-${C}`,media:ee,pretitle:te,title:Q,body:G,subtitle:se,footer:Z,trailing:ae,isActive:U,onClick:()=>{N.logInteraction(P.hitUiNavigate({destination:C})),_(M)},showSeparator:h,...g})})}));var it=a(12737),rt=a(20507),nt=a(76276);const lt=({renderRow:e,searchResults:t})=>(0,p.jsx)(rt.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:it.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[nt.$.TITLE_AND_ARTIST,nt.$.ALBUM,nt.$.ADD]});var ot=a(45177);const ct=({renderRow:e,searchResults:t})=>{const a=t.filter((e=>e.type===D.c.TRACK)),s=t.filter((e=>e.type===D.c.ALBUM));return(0,p.jsxs)("div",{children:[(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",className:ot.A.artistResultListTitle,children:d.Ru.get("playlist.curation.popular_songs")}),(0,p.jsx)(rt.S4,{ariaLabel:d.Ru.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:it.qq,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[nt.$.TITLE_AND_ARTIST,nt.$.ALBUM,nt.$.ADD]}),(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",className:ot.A.artistResultListTitle,children:d.Ru.get("playlist.curation.albums")}),(0,p.jsx)(rt.S4,{ariaLabel:d.Ru.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:it.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[nt.$.TITLE_AND_ARTIST,nt.$.ALBUM,nt.$.ADD]})]})},dt=({renderRow:e,searchResults:t,renderSeeAllRow:a,seeAllXList:s})=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(rt.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:it.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[nt.$.TITLE_AND_ARTIST,nt.$.ALBUM,nt.$.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,p.jsx)(rt.S4,{ariaLabel:d.Ru.get("search.title.all"),renderRow:a,rowPlaceholder:it.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[nt.$.TITLE_AND_ARTIST,nt.$.ALBUM,nt.$.ADD],testID:"playlist-inline-curation-see-all-options"})]}),ut=({renderRow:e,searchResults:t})=>(0,p.jsx)(rt.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:it.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[nt.$.TITLE_AND_ARTIST,nt.$.ALBUM,nt.$.ADD]}),mt=({renderRow:e,searchResults:t})=>(0,p.jsx)(rt.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:it.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[nt.$.TITLE_AND_ARTIST,nt.$.ALBUM,nt.$.ADD]}),pt=({renderRow:e,searchResults:t})=>(0,p.jsx)(rt.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:it.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[nt.$.TITLE_AND_ARTIST,nt.$.ALBUM,nt.$.ADD]});var xt=a(7031),ht=a(60831);const yt="G2t3w2AAeb5OXp0_GeWs",gt="saVjTFMyWYUz975_tkQm",bt="thi8fNCkEhutRkDC90c0",ft="pHVlkChuJpEnBQyU3ADv",jt="ENWs3JxcqtD98_8fbPz2",At="L8IUKEJL6JiTyE_qUVCc",Rt="XcyjdXgsNX0DBt72tfiD",Tt="VhJnuS7UcUPfIlzD8dlU",Ct="He29vQ5anFj_bJ5iEaI2",vt=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(ht.$,{className:jt,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:Ct,onClick:s,children:[(0,p.jsxs)(xt.T,{columnIndex:0,className:At,children:[void 0!==i?(0,p.jsx)("img",{className:bt,src:i,alt:e.name}):null,(0,p.jsxs)("div",{className:Rt,children:[(0,p.jsx)(n.E,{as:"p",className:ft,variant:"bodyMedium",children:e.name}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.Ru.get("album")})]})]}),(0,p.jsx)(xt.T,{columnIndex:1}),(0,p.jsx)(xt.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Tt,onClick:s,children:a?(0,p.jsx)(L.g,{}):(0,p.jsx)(P.V,{})})})]})})};var kt=a(25805);const St=({size:e})=>(0,p.jsx)("div",{className:gt,children:(0,p.jsx)(kt.r,{size:e})}),It=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(ht.$,{className:jt,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:Ct,onClick:s,"data-testid":"playlist-inline-curation-artist",children:[(0,p.jsxs)(xt.T,{columnIndex:0,className:At,children:[void 0!==i?(0,p.jsx)("img",{className:yt,src:i,alt:e.name}):(0,p.jsx)(St,{size:"small"}),(0,p.jsxs)("div",{className:Rt,children:[(0,p.jsx)(n.E,{as:"p",className:ft,variant:"bodyMedium",children:e.name}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.Ru.get("artist")})]})]}),(0,p.jsx)(xt.T,{columnIndex:1}),(0,p.jsx)(xt.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Tt,onClick:s,children:a?(0,p.jsx)(L.g,{}):(0,p.jsx)(P.V,{})})})]})})};var Et=a(12953),Nt=a(50597),Pt=a(73689),Lt=a(45849),Ut=a(65647),wt=a(33589),_t=a(23885),Mt=a(31845),Bt=a(77131),Ot=a(68732),Dt=a(45292),Ft=a(68702),$t=a(30023),Vt=a(44817),zt=a(98913),Wt=a(78330),qt=a(42668),Kt=a(63089);const Ht=s.memo((function({uid:e,uri:t,isPlayable:a,isMOGEFRestricted:i,isExplicit:r,contextUri:n,name:l,imgUrl:o,index:c,podcast:u,usePlayContextItem:m}){const x=(0,s.useMemo)((()=>n.replace("internal:recs:","")),[n]),h=(0,Dt.W)(),{addItems:y}=(0,Qe.x)(x),{isActive:g,isPlaying:b,triggerPlay:f,togglePlay:j}=m({uid:e,uri:t,index:c}),A=(0,s.useCallback)((()=>{y([t],{after:"end"}),h({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:x})}),[y,t,h,x]),R=(0,qe.T)(t),{isPlayable:T,isAnyArtistBanned:C}=(0,Ft.g)(t,{isPlayable:a}),{badges:v,hasBadges:k}=(0,qt.b)({downloadAvailability:R,isExplicit:r,isMOGEFRestricted:i});return(0,p.jsx)(Wt.pZ,{value:"row",index:c,children:(0,p.jsx)(Ne.h,{menu:(0,p.jsx)(Et.b,{uri:t,contextUri:n}),children:(0,p.jsxs)(Ot.w,{uri:t,contextUri:t,isPlayable:T,isAnyArtistBanned:C,onTriggerPlay:()=>{f()},isActive:g,ageRestricted:i,index:c,ariaRowIndex:c,dragMetadata:{name:l,createdBy:u.name},children:[(0,p.jsxs)(_t.U,{ariaColIndex:0,children:[(0,p.jsx)(Lt.u,{uri:t,src:o,onClick:()=>{j()},isLocked:!1,isPlaying:b,isActive:g,isEpisode:!0,playAriaLabel:d.Ru.get("tracklist.a11y.play",l,u.name)}),(0,p.jsxs)(Ut.l,{children:[(0,p.jsx)(Bt.p,{titleText:l,children:l}),k&&(0,p.jsxs)(Pt.P,{children:[v.download&&(0,p.jsx)($t._,{}),v.explicit&&(0,p.jsx)(Vt.g,{}),v.nineteen&&(0,p.jsx)(zt.q,{className:Kt.A.nineteen,size:16})]})]})]}),(0,p.jsx)(Mt.o,{ariaColIndex:1,children:(0,p.jsx)(Nt.g,{uri:u.uri,name:u.name,children:u.name})}),(0,p.jsx)(wt.l,{ariaColIndex:2,children:(0,p.jsx)(Ae.n,{size:"small",onClick:A,children:d.Ru.get("playlist.extender.button.add")})})]})})})}),((e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index)),Qt=({episode:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(Ht,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:s}),Gt=({label:e,index:t,isRTL:a,onClick:s})=>(0,p.jsx)(ht.$,{className:jt,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":e,className:Ct,onClick:s,children:[(0,p.jsx)(xt.T,{columnIndex:0,className:At,children:(0,p.jsx)(n.E,{as:"p",className:ft,variant:"bodyMedium",children:e})}),(0,p.jsx)(xt.T,{columnIndex:1}),(0,p.jsx)(xt.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:Tt,onClick:s,children:a?(0,p.jsx)(L.g,{}):(0,p.jsx)(P.V,{})})})]})});var Yt=a(6408),Jt=a(36450),Xt=a(57103),Zt=a(69197),ea=a(62385),ta=a(78089),aa=a(3068),sa=a(8398),ia=a(98812);const ra=s.memo((function({uid:e,uri:t,name:a,imgUrl:i,artists:r,isExplicit:n,index:l,album:o,contextUri:c,isPlayable:u,isMOGEFRestricted:m,usePlayContextItem:x,durationMs:h,shouldRenderDuration:y,internalLink:g}){const{spec:b,logger:f}=(0,Je.r)(Yt.i,{data:{position:l,reason:"",uri:t}}),j=(0,s.useMemo)((()=>c.replace("internal:recs:","")),[c]),A=(0,Dt.W)(),{addItems:R}=(0,Qe.x)(j),{isActive:T,isPlaying:C,triggerPlay:v,togglePlay:k}=x({uid:e,uri:t,index:l}),S=(0,s.useCallback)((()=>{f.logInteraction(b.addButtonFactory().hitAddToPlaylist({playlist:j,itemToBeAdded:t})),R([t],{after:"end"}),A({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:j})}),[f,b,j,t,R,A]),I=(0,qe.T)(t),{isPlayable:E,isAnyArtistBanned:N}=(0,Ft.g)(t,{isPlayable:u,isLocal:!1,isOutOfMarket:!1,artistUris:r?.map((e=>e.uri))}),{unBanArtists:P}=(0,sa.M)(r.map((e=>e.uri))),L=r.map((e=>e.name)).join(d.Ru.getSeparator()),{badges:U,hasBadges:w}=(0,qt.b)({downloadAvailability:I,isExplicit:n,isMOGEFRestricted:m}),_=y&&h,M=r.map((e=>e.name)).join(d.Ru.getSeparator()),B=(0,ia.c)();return(0,p.jsx)(Wt.pZ,{value:"row",index:l,children:(0,p.jsx)(Ne.h,{menu:(0,p.jsx)(Jt.P,{uri:t,albumUri:o.uri,artists:r,contextUri:c}),children:(0,p.jsxs)(Ot.w,{uri:t,contextUri:c,isPlayable:E,isAnyArtistBanned:N,handleArtistBanUndoClick:P,onTriggerPlay:(e,t)=>{v({loggingParams:t})},isActive:T,ageRestricted:m,index:l,ariaRowIndex:l,dragMetadata:{name:a,createdBy:L},spec:b,className:Kt.A.isRecommendedTrackListRow,children:[(0,p.jsxs)(_t.U,{ariaColIndex:0,children:[(0,p.jsx)(Lt.u,{uri:t,src:i,onClick:(e,t)=>{k({loggingParams:t})},isLocked:!1,isPlaying:C,isActive:T,playAriaLabel:d.Ru.get("tracklist.a11y.play",a,L),spec:b}),(0,p.jsxs)(Ut.l,{children:[g&&B?(0,p.jsx)($e.N,{to:t,className:Kt.A.rowTitle,"data-testid":"internal-track-link",children:(0,p.jsx)(Bt.p,{titleText:a,children:a})}):(0,p.jsx)(Bt.p,{titleText:a,children:a}),w&&(0,p.jsxs)(Pt.P,{children:[U.explicit&&(0,p.jsx)(Vt.g,{}),U.download&&(0,p.jsx)($t._,{}),U.nineteen&&(0,p.jsx)(zt.q,{className:Kt.A.nineteen,size:16})]}),(0,p.jsx)(ta.p,{children:(0,p.jsx)(Xt.l,{artists:r,spec:b})})]})]}),(0,p.jsx)(Mt.o,{ariaColIndex:1,children:(0,p.jsx)(Nt.g,{uri:o.uri,name:o.name,creatorUri:r?.[0]?.uri,spec:b,children:o.name})}),(0,p.jsx)(Mt.o,{ariaColIndex:2,children:(0,p.jsx)("span",{})}),(0,p.jsxs)(wt.l,{ariaColIndex:3,children:[_?(0,p.jsx)(aa.d,{uri:t}):null,_?(0,p.jsx)(Zt.P,{duration:h,dataTestId:"render-duration"}):(0,p.jsx)(Ae.n,{size:"small",onClick:S,"aria-label":d.Ru.get("addToPlaylist-icon.label"),"data-testid":"add-to-playlist-button",children:d.Ru.get("playlist.extender.button.add")}),_?(0,p.jsx)(ea.Y,{menu:(0,p.jsx)(Jt.P,{uri:t,albumUri:o.uri,contextUri:c,artists:r}),label:d.Ru.get("more.label.track",a,M)}):null]})]})})})}),((e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index)),na=({track:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(ra,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:s});var la=a(68031);const oa=({resultList:e,level:t,isRTL:a,playlistUri:i,navToResults:r,navToEntity:l,term:o,isBooklist:u})=>{let m=e;const x=(e=>e.map((e=>{if(e.type===D.c.TRACK||e.type===D.c.EPISODE){const{uri:t,id:a}=e;return{type:(0,c.U_)(t)?D.c.TRACK:D.c.EPISODE,uri:t,uid:a,provider:null}}return null})).filter(K.P))(e),{draggable:h,onDragStart:y}=(0,la.P)(),{usePlayContextItem:g}=(0,He.P)({uri:`${i.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(o)}:${t?.navType??0}`,pages:[{items:x}]},{featureIdentifier:"search"}),b=(0,s.useCallback)(((e,t)=>(0,p.jsx)(Gt,{isRTL:a,index:t,label:e.label,onClick:()=>{r({navType:e.type,term:o,title:e.label})}},e.uri)),[a,r,o]),f=(0,s.useCallback)(((e,t)=>e.type===D.c.ARTIST?(0,p.jsx)(It,{isRTL:a,index:t,searchResult:e,onClick:()=>{l({navType:ne.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===D.c.EPISODE?(0,p.jsx)(Qt,{index:t,episode:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:g},e.uri):e.type===D.c.TRACK?(0,p.jsx)(na,{index:t,track:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:g},e.uri):e.type===D.c.ALBUM?(0,p.jsx)(vt,{index:t,isRTL:a,searchResult:e,onClick:()=>{l({navType:ne.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,p.jsx)(st,{book:e,index:t,featureIdentifier:"playlist_recommendations",contextUri:i,isRecommendation:!0,showSeparator:0!==t},e.uri)),[a,l,i,g]);if(""===o)return(0,p.jsx)("div",{className:ot.A.emptySearchTermContainer});if(!e||0===e?.length)return(0,p.jsxs)("div",{className:ot.A.emptyStateContainer,children:[(0,p.jsx)(n.E,{as:"h1",variant:"titleSmall",children:d.Ru.get("search.empty-results-title",o)}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",children:d.Ru.get("search.empty-results-text")})]});if(t?.navType===ne.SEARCH){const t=[{type:ne.ARTISTRESULTS,label:d.Ru.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:ne.ALBUMRESULTS,label:d.Ru.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:ne.TRACKRESULTS,label:d.Ru.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return m=e,u?(0,p.jsx)(p.Fragment,{children:m.map(((e,t)=>e&&e.type===D.c.AUDIOBOOK?(0,p.jsx)(st,{contextUri:i,index:t,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:h,onDragStart:t=>{y(t,{itemUris:[e.uri],itemMimeTypes:[fe.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null))}):(0,p.jsx)(dt,{renderRow:f,searchResults:m,renderSeeAllRow:b,seeAllXList:t})}return t?.navType===ne.ALBUM?(0,p.jsx)(lt,{renderRow:f,searchResults:m}):t?.navType===ne.ARTIST?(0,p.jsx)(ct,{renderRow:f,searchResults:m}):t?.navType===ne.ALBUMRESULTS?(0,p.jsx)(ut,{renderRow:f,searchResults:m}):t?.navType===ne.TRACKRESULTS?(0,p.jsx)(pt,{renderRow:f,searchResults:m}):t?.navType===ne.ARTISTRESULTS?(0,p.jsx)(mt,{renderRow:f,searchResults:m}):null};var ca=a(65104),da=a(95168);const ua=({playlistUri:e,onCurationModeChange:t,isBooklist:a})=>{const[i,r]=(0,s.useState)([]),[l,o]=(0,s.useState)(),c=(0,ca.W)(),{level:u,changeTerm:m,goBack:x,navToEntity:h,navToResults:y,term:g}=(()=>{const[e,t]=(0,s.useReducer)(le,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:i}=e;return{changeTerm:e=>{t({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{t({type:"GO_BACK"})},navToEntity:e=>{t({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{t({type:"NAV_TO_RESULTS",level:e})},term:i}})(),{request:b}=(0,s.useContext)(da.j);return(0,s.useEffect)((()=>{let e=!0;return(async()=>{if(u)switch(u.navType){case ne.SEARCH:try{if(!l||l.query!==g&&""!==g){const t=await se(b,g,a);e&&o(t)}else""===g&&r([])}catch{r([])}l&&r(l.topResults);break;case ne.ARTISTRESULTS:l&&r(l?.artists);break;case ne.ALBUMRESULTS:l&&r(l?.albums);break;case ne.TRACKRESULTS:l&&r(l?.tracks);break;case ne.EPISODERESULTS:l&&r(l?.episodes);break;case ne.ALBUM:try{const t=await ie(b,u.uri,100,0);e&&t&&r(t.tracks)}catch{r([])}break;case ne.ARTIST:try{const t=await re(b,u.uri,100,0);e&&t&&r([...t.albums,...t.tracks])}catch{r([])}}})(),()=>{e=!1}}),[u,g,l,b,a]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("section",{className:ot.A.playlistInlineCurationSection,children:[(0,p.jsxs)("div",{className:ot.A.playlistInlineCurationWrapper,children:[(0,p.jsx)(n.E,{as:"h1",className:ot.A.playlistInlineCurationTitle,variant:"titleSmall",children:d.Ru.get("playlist.curation.title")}),(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(be,{placeholder:a?d.Ru.get("playlist.curation.search_placeholder-booklists"):d.Ru.get("playlist.curation.search_placeholder"),onFocus:()=>{t(!0)},onChange:e=>{m(e)}})})]}),(0,p.jsx)("button",{className:ot.A.playlistInlineCurationCloseButton,onClick:()=>t(!1),children:(0,p.jsx)(N.M,{"aria-label":d.Ru.get("close")})})]}),null!==u&&u.navType!==ne.SEARCH?(0,p.jsxs)("button",{className:ot.A.playlistInlineCurationBackButton,onClick:()=>x(),children:[c?(0,p.jsx)(P.V,{"aria-label":d.Ru.get("navbar.go-back"),className:ot.A.icon}):(0,p.jsx)(L.g,{"aria-label":d.Ru.get("navbar.go-back"),className:ot.A.icon}),(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",children:u.title})]}):null,(0,p.jsx)("div",{className:ot.A.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,p.jsx)(oa,{playlistUri:e,term:g,level:u,resultList:i,navToEntity:h,navToResults:y,isRTL:c,isBooklist:a})})]})};var ma=a(75374),pa=a(19194),xa=a(70414),ha=a(6577),ya=a(56327);const ga=(0,s.createContext)({getReference:()=>null,setReference:()=>{}}),ba=({children:e})=>{const t=(0,s.useRef)(null),a=(0,s.useCallback)((()=>t.current),[]),i=(0,s.useCallback)((e=>{t.current=e}),[]);return(0,p.jsx)(ga.Provider,{value:{getReference:a,setReference:i},children:e})};var fa=a(29800);const ja=(e,t,a)=>{const{name:r,uri:n,uid:l}=e,{sortState:o}=(0,s.useContext)(v.cL),c=o.order!==nt.H.NONE,{draggable:d,onDragStart:m}=(0,la.P)({itemIds:[l],itemUris:[n],itemMimeTypes:[fe.fl.AUDIOBOOKS],dragLabelText:r,contextUri:t}),{setReference:p,getReference:x}=(0,s.useContext)(ga),h=(0,s.useCallback)((e=>{p({uri:n,uid:l}),m(e)}),[m,p,l,n]),y=(0,i.wA)(),g=(0,fa.m)(),b=(0,s.useCallback)(((e,a)=>{const s=e[fe.fl.AUDIOBOOKS];if(!s)return;const i=x();i?a===ha.Nz.BEFORE?g.move(t,[i],{before:{uri:n,uid:l}}):g.move(t,[i],{after:{uri:n,uid:l}}):a===ha.Nz.BEFORE?y((0,u.io)(t,s,{before:{uri:n,uid:l}})):y((0,u.io)(t,s,{after:{uri:n,uid:l}})),p(null)}),[t,y,x,g,p,l,n]),f=a&&!c?[fe.fl.AUDIOBOOKS]:[];return{...(0,ya.A)({uri:n,id:l,allowedMimeTypesByDropPosition:{[ha.Nz.BEFORE]:f,[ha.Nz.AFTER]:f},onDrop:b}),onDragStart:h,draggable:d}},Aa="bg5inM_sdkHpYWiFf7Id",Ra="DyW2LAm9YDcCkcdM0eeP",Ta=()=>(0,p.jsx)("div",{className:Ra}),Ca=(0,s.memo)((function({item:e,contextUri:t,canEdit:a=!1,canRemove:s=!1,index:i,highlightText:r}){const{className:n,dropPosition:l,draggable:o,...c}=ja(e,t,a);return(0,p.jsxs)(xa.W,{className:n,"aria-posinset":i,reRunOnDOMUpdate:!0,children:[l===ha.Nz.BEFORE&&(0,p.jsx)(Ta,{}),(0,p.jsx)(st,{book:e,contextUri:t,index:i,featureIdentifier:"playlist",sharingInfo:e.sharingInfo,uid:e.uid,rating:e.rating,canRemove:s,className:n,draggable:o,showSeparator:0!==i,highlightText:r,...c}),l===ha.Nz.AFTER&&(0,p.jsx)(Ta,{})]})}));var va=a(13595),ka=a(69026),Sa=a(54021),Ia=a(70329),Ea=a(38361),Na=a(20631);const Pa=({contextUri:e,initialItems:t,nrItems:a,canEdit:i,canRemove:n,ariaLabel:l})=>{const o=(0,fa.m)(),c=(0,Ia.v7)(),{filter:d}=(0,s.useContext)(C.g),{sortState:u}=(0,s.useContext)(v.cL),{contentsOptions:m}=(0,va.$)(u,d),[,x]=(0,k.z1)(),h=(0,s.useCallback)((async(t,a)=>{const s=await o.getContents(e,{...m,offset:t,limit:a}),i=s.items.map((e=>null===e?null:(0,Ea.pW)(e)?e:null));return{...s,items:i}}),[o,m,e]),{getItem:y,nrValidItems:g,invalidateCache:b}=(0,Sa.E)({nrItems:a,fetch:h,limit:50,initialItems:t});(0,s.useLayoutEffect)((()=>{x(g)}),[g,x]),(0,Na.H)(e,b);const f=(0,s.useCallback)((e=>(0,p.jsx)("div",{style:{height:e}})),[]),j=(0,s.useCallback)(((e,t)=>t===De.u.TITLE||t===De.u.SUBTITLE?(0,p.jsx)(pa.M,{searchWords:[d],textToHighlight:e}):e),[d]),A=(0,s.useCallback)(((t,a)=>{const s=y(t);return s?(0,p.jsx)(Ca,{contextUri:e,item:s,canEdit:i,canRemove:n,index:t,highlightText:j},s.uri):f(`${a}px`)}),[i,n,e,y,j,f]),R="POP"===(0,r.wQ)()?0:10;return(0,p.jsx)("div",{className:Aa,children:(0,p.jsx)(ma.R,{firstInteractiveIsWrapper:!0,"aria-label":l,"aria-rowcount":g,"aria-colcount":6,children:(0,p.jsx)(ba,{children:(0,p.jsx)(ka.M,{totalCount:g,estimatedHeight:200,renderItem:A,renderPlaceholder:f,scrollNodeRef:c,nrRowsOverscan:10,persistanceKey:e,nrInitialInView:R})})})})};var La=a(1335),Ua=a(76020),wa=a(5562),_a=a(57485),Ma=a(18646);let Ba=function(e){return e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW",e}({});const Oa={[Ba.DOWN]:()=>(0,p.jsx)(wa.y,{size:"small",className:Kt.A.statusChangeDown}),[Ba.UP]:()=>(0,p.jsx)(_a.J,{size:"small",className:Kt.A.statusChangeUp}),[Ba.NEW]:()=>(0,p.jsx)(Ma.Z,{className:Kt.A.notificationDot}),[Ba.EQUAL]:()=>null},Da=({status:e,number:t})=>{const a=Oa[e];return(0,p.jsxs)("div",{className:ce()(Kt.A.rowChartStatus),children:[(0,p.jsx)(n.E,{variant:"bodyMedium",children:t}),(0,p.jsx)(a,{})]})};var Fa=a(58571),$a=a(9689),Va=a(765),za=a(70045),Wa=a(3393),qa=a(71321),Ka=a(76774),Ha=a(45647);const Qa=s.memo((function({uri:e,name:t,duration_ms:a,artists:s,album:i,isMOGEFRestricted:r,isExplicit:n,isPlayable:l,uid:o,index:c,contextUri:u,imgUrl:m,statusChange:x,playCount:h,usePlayContextItem:y,isCompactMode:g}){const{spec:b}=(0,Je.r)(Yt.i,{data:{position:c,reason:"",uri:e}}),f=(0,La.w)(),j=(0,ia.c)(),{isActive:A,isPlaying:R,triggerPlay:T,togglePlay:C}=y({uid:o,uri:e,index:c}),v=(0,qe.T)(e),{isPlayable:k,isAnyArtistBanned:S}=(0,Ft.g)(e,{isPlayable:l,isLocal:!1,isOutOfMarket:!1,artistUris:s?.map((e=>e.uri))}),{unBanArtists:I}=(0,sa.M)(s?.map((e=>e.uri))??[]),{badges:E,hasBadges:N}=(0,qt.b)({downloadAvailability:v,isExplicit:n,isMOGEFRestricted:r}),P=s?.map((e=>e.name)).join(d.Ru.getSeparator())||"";return(0,p.jsx)(Wt.pZ,{value:"row",index:c,children:(0,p.jsx)(Ne.h,{menu:(0,p.jsx)(Jt.P,{uri:e,albumUri:i?.uri,artists:s}),children:(0,p.jsx)(Ot.w,{uri:e,contextUri:u,index:c,onTriggerPlay:(e,t)=>{T({loggingParams:t})},isActive:A,ariaRowIndex:c+1,isPlayable:k,isAnyArtistBanned:S,handleArtistBanUndoClick:I,ageRestricted:r,dragMetadata:{name:t,createdBy:P},allowedDropTypes:[],spec:b,isCompactMode:g,children:f.map((({columnType:r,options:n},l)=>{const o=(0,Ka.y)(l,r,f);return(0,p.jsx)(o,{ariaColIndex:l,children:(()=>{switch(r){case nt.$.INDEX:return(0,p.jsx)(Va.$,{uri:e,className:Kt.A.rowMarkerChartStatus,playAriaLabel:d.Ru.get("tracklist.a11y.play",t,P),onClick:(e,t)=>{C({loggingParams:t})},isPlaying:R,isActive:A,spec:b,children:x?(0,p.jsx)(Da,{number:c+1,status:x}):(0,p.jsx)(za.a,{children:c+1})});case nt.$.TITLE_AND_ARTIST:case nt.$.TITLE_AND_AUTHOR:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Fa.e,{src:m}),(0,p.jsxs)(Ut.l,{children:[(0,p.jsx)(Bt.p,{titleText:t,children:t}),N&&(0,p.jsxs)(Pt.P,{children:[E.download&&(0,p.jsx)($t._,{}),E.explicit&&(0,p.jsx)(Vt.g,{}),E.nineteen&&(0,p.jsx)(zt.q,{className:Kt.A.nineteen,size:16})]}),(0,p.jsx)(ta.p,{children:(0,p.jsx)(Xt.l,{artists:s,spec:b})})]})]});case nt.$.TITLE:return(0,p.jsxs)($a.q,{children:[j?(0,p.jsx)($e.N,{to:e,className:Kt.A.rowTitle,"data-testid":"internal-track-link",children:(0,p.jsx)(Bt.p,{titleText:t,children:t})}):(0,p.jsx)(Bt.p,{titleText:t,children:t}),N&&(0,p.jsxs)(Pt.P,{children:[E.download&&(0,p.jsx)($t._,{}),E.explicit&&(0,p.jsx)(Vt.g,{}),E.nineteen&&(0,p.jsx)(zt.q,{className:Kt.A.nineteen,size:16}),E.hasAssociatedVideo&&(0,p.jsx)(Ha.l,{})]})]});case nt.$.ARTIST:case nt.$.AUTHOR:return(0,p.jsx)(qa.Y,{children:s&&(0,p.jsx)(Ua.E,{artists:s,spec:b})});case nt.$.PLAYS:return(0,p.jsx)(Wa.Y,{playcount:h});case nt.$.ALBUM_OR_PODCAST:case nt.$.ALBUM:return(0,p.jsx)(Nt.g,{uri:i.uri,name:i.name,creatorUri:s?.[0]?.uri,spec:b,children:i.name});case nt.$.DURATION:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(aa.d,{uri:e,spec:b}),!n?.hideDuration&&(0,p.jsx)(Zt.P,{duration:a}),(0,p.jsx)(ea.Y,{menu:(0,p.jsx)(Jt.P,{uri:e,albumUri:i?.uri,artists:s}),label:d.Ru.get("more.label.track",t,P),spec:b})]});case nt.$.ADDED_BY:case nt.$.ADDED_AT:case nt.$.RELEASE_DATE:case nt.$.ACTIONS:case nt.$.ALBUM_OR_SHOW:case nt.$.EVENT_DATE:case nt.$.EVENT_INFO:case nt.$.CONCERT_DATE:case nt.$.CONCERT_VENUE:case nt.$.ADD:case nt.$.BPM:case nt.$.KEY:case nt.$.VIBE:return null;default:(0,H.d)(r)}return null})()},`column-${l}`)}))})})})}),((e,t)=>e.uri===t.uri&&e.isCompactMode===t.isCompactMode));var Ga=a(92686);const Ya={column:null,order:nt.H.NONE},Ja=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,scrollToUid:i,usePlayContextItem:r,tracklistDomRef:n,sortableColumns:l,isCompactMode:o=!1}){const c=(0,fa.m)(),{filter:d,setFilter:u}=(0,s.useContext)(C.g),m=(0,s.useRef)(null),x=(0,s.useCallback)((()=>{m.current&&m.current.update()}),[]);(0,Na.H)(a,x);const{sortState:h,setSortState:y}=(0,s.useContext)(v.cL),g=(0,s.useCallback)((e=>{y((0,T.So)(e,h))}),[h,y]);(0,s.useEffect)((()=>{y(Ya),u("")}),[a,u,y]),(0,s.useEffect)((()=>{m.current&&i&&m.current.scrollToItem({uid:i})}),[i]);const b=(0,s.useCallback)((async(e,t)=>{const s=await c.getContents(a,{offset:e,limit:t,sort:(0,T.Xt)(h),filter:d,decorateFormatListData:!0});return{items:s.items,totalLength:s.totalLength}}),[a,c,h,d]),f=(0,s.useCallback)(((e,t)=>{const s=(0,Ga.g)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,p.jsx)(Qa,{index:t,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:s?.url||"",statusChange:e.formatListAttributes?.status,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:r,isCompactMode:o},t+e.uri)}),[a,r,o]),j=(0,La.w)(),A=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,p.jsx)(Wt.pZ,{value:"chart-tracklist",children:(0,p.jsx)(rt.S4,{ariaLabel:e,hasHeaderRow:!0,columns:j,sortableColumns:l,sortState:h,onSort:g,renderRow:f,resolveItem:A,nrTracks:t,fetchTracks:b,limit:100,canFetchAllTracks:c.getCapabilities().canFetchAllTracks,outerRef:m,outerDomRef:n,columnPersistenceKey:"chart-tracklist",isCompactMode:o,className:Kt.A.chartTrackList},a)})}));var Xa=a(57574),Za=a(40815),es=a(56374),ts=a(76629),as=a(63393);function ss(e,t){return e.build().withHost(ts.QU).withPath("/views/recommendations-in-free-tier-playlist-source").withQueryParameters({signal:`playlistURI:${t}`,limit:"10"}).withEndpointIdentifier("/views/{viewId}").send()}var is=a(10259),rs=a(82535);const ns="BagEpNps_J8R2QuHRZMa",ls="bjB8WZd0Ev30ZFbiScDm",os=(0,s.memo)((({uri:e})=>{const{scrollNodeRef:t}=(0,s.useContext)(Ia.bi),{ref:a,inView:i}=(0,Xa.Wx)({initialInView:!1,rootMargin:"128px 100%",root:t.current}),r=function(e,t){const{data:a}=(0,as.Z)(ss,[e],{enabled:t,staleTime:36e5,gcTime:72e5});return a?.body.content?.items}(e,i),n=(0,s.useRef)(null),l=function(e){const[t,a]=(0,rs.x)("mlt-height",300),i=(0,s.useCallback)((()=>{const t=e.current?.getBoundingClientRect()?.height;t&&a(t)}),[e,a]);return(0,is.w)({refOrElement:e,observeOnly:"height",onResize:i,observeOnMount:!0}),t}(n);return 0===r?.length?null:(0,p.jsx)("div",{className:ns,style:{"--last-height":`${l}px`},ref:a,children:r&&(0,p.jsx)(es.p,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:d.Ru.get("web-player.playlist.more-like-this.section-header-title"),total:r.length,elementRef:n,className:ls,children:r.map(((e,t)=>(0,p.jsx)(Za.B,{index:t,uri:e.uri,name:e.name,authorName:e.owner?.display_name??null,description:null,images:e.images},e.uri)))})})}));var cs=a(70548),ds=a(99842),us=a(13948),ms=a(27134),ps=a(21813),xs=a(85137),hs=a(52690),ys=a(13799),gs=a(33396),bs=a(58602),fs=a(45237),js=a(14391),As=a(27046),Rs=a(64963),Ts=a(833),Cs=a(88577);const vs={bottomEnd:Cs.dw.topStart,top:Cs.dw.bottom},ks=({visible:e,onHide:t,placement:a,children:s,label:i})=>(0,p.jsx)(Rs.W,{placement:a,withPortal:!0,overlay:e&&(0,p.jsx)("div",{children:(0,p.jsx)(Ts.A,{arrow:vs[a],colorSet:"announcement",onClose:t,children:i})}),children:s});var Ss=a(70267),Is=a(90855),Es=function(e){return e.xs="small",e.sm="medium",e.md="large",e}(Es||{});const Ns=({uri:e,label:t,onClick:a,size:s=Es.md})=>{const{onCopyLink:i}=(0,Is.J)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:r,setToggleActivationVisible:n}=(0,Ss.R)();return(0,p.jsx)(ks,{visible:r,onHide:()=>n(!1),label:d.Ru.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,p.jsx)(As.Zp,{label:t,children:(0,p.jsx)(fs.H,{onClick:e=>{a?.(e),i?.()},iconOnly:js.h,size:s,"aria-hidden":"true","aria-label":t,condensed:!0})})})};var Ps=a(65114),Ls=a(2061),Us=a(29651);const ws=s.memo((({metadata:e,tracklistDomRef:t,sortableColumns:a})=>{const{hasSpotifyAudiobooks:i}=e,r=i||!1,{spec:n,logger:l}=(0,Je.r)(Ps.E,{}),o=(0,s.useCallback)((()=>{l.logInteraction(n.filterFieldFactory().keyStrokeFilter())}),[l,n]),c=(0,s.useCallback)((()=>{l.logInteraction(n.filterFieldFactory().hitClearFilter())}),[l,n]);return(0,p.jsxs)("div",{className:ot.A.searchBoxContainer,children:[(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Ls.S,{placeholder:d.Ru.get("playlist.search_in_playlist"),onFilter:o,onClear:c,clearOnEscapeInElementRef:t})}),(0,p.jsx)(Us.d,{columns:[...a],isBooklist:r})]})}));var _s=a(96935),Ms=a(56450),Bs=a(15339);const Os=()=>null,Ds=()=>!1;var Fs=a(3782),$s=a(11244),Vs=a(19019),zs=a(72553);const Ws=s.memo((function({playlist:e,capabilities:t,spec:a,isPlaying:i,isActive:r,togglePlay:n,isBooklist:o,isConcert:c=!1,backgroundColor:u,tracklistDomRef:m,sortableColumns:x}){const{metadata:{uri:h,name:y,unfilteredTotalLength:g,isOwnedBySelf:b,canPlay:f,isPublished:j,totalLength:A,appliedLenses:R=[]}}=e,T=(0,$s.n)(),C=(0,Ye.s)(),v=(0,s.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),k=t.canFilter&&g>0,S=t.canSort&&g>0,I=g>0,E=(0,l.NC)(Vs.McC,{loadingValue:!1}),N=(0,Bs.X)(),P=Ds({isOwnedBySelf:b,numberOfTracks:A,appliedLenses:R}),[L,U]=(0,ze.A)(h),w=(0,Dt.W)(),_=(0,s.useCallback)((async()=>{w({targetUri:h,intent:L?"unsave":"save",type:"click"});try{await U(!L)}catch{}}),[L,w,U,h]),M=(0,s.useCallback)((()=>{const e=a.shareButtonFactory().hitShare({entityToBeShared:h,shareId:""});C.logInteraction(e)}),[a,C,h]),B=(0,bs.d$)(),{spec:O,logger:D}=(0,Je.r)(cs.e,{data:{uri:h}});(0,s.useEffect)((()=>{B&&D.logImpression(O.impression())}),[B,D,O]);const F=(0,s.useCallback)((()=>{let e;const t=a.heartButtonFactory();L?e=t.hitUnfollow({itemToBeUnfollowed:h}):(e=t.hitFollow({itemToBeFollowed:h}),B&&D.logInteraction(O.hitFollow({itemToBeFollowed:h}))),C.logInteraction(e),_()}),[a,_,L,C,h,B,D,O]),$=(0,Fs.j)(),V=k&&S;return(0,p.jsx)(ds.E,{backgroundColor:u,children:(0,p.jsxs)(us.S,{children:[f&&!o?(0,p.jsx)(ys.D,{onClick:n,isPlaying:i,size:$,uri:h,ariaPlayLabel:d.Ru.get("playlist.a11y.play",y),ariaPauseLabel:d.Ru.get("playlist.a11y.pause",y)}):null,N&&A>0&&!o&&(0,p.jsx)(zs.r,{spec:v,children:(0,p.jsx)(_s.Y,{shuffleContext:Ms.b.playlistActionBar,entityName:y,contextUri:h,isActive:r,activationPlacement:"bottomEnd",size:$})}),b?null:(0,p.jsx)(xs.e,{children:(0,p.jsx)(ve.M,{isAdded:L,onClick:F,size:$,condensed:!0})}),!o&&(0,p.jsx)(ms.f,{uri:h,isFollowing:L,canDownload:I,onClick:(e,t)=>(0,Ve.Qv)(t,a.downloadButtonFactory(),C,h),onFollow:_,size:$,condensed:!0}),(0,p.jsx)(hs.u,{property:Vs.G6N,renderNewExperience:()=>e.metadata.permissions?.canAdministratePermissions&&T&&(!o||E)?(0,p.jsx)(Ns,{onClick:M,label:d.Ru.get("permissions.invite-collaborators",y),uri:h,size:$}):null}),(c||o)&&(0,p.jsx)(Ie.w,{uri:h,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:c?"concerts-near-you/share":"booklist/share"},onClick:M,size:$}),P&&(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Os,{uri:h})}),(0,p.jsx)(Ee.b,{onShow:()=>(0,Ve.R2)(a,C),menu:(0,p.jsx)(ps.W,{uri:h,isPublished:j}),children:(0,p.jsx)(Se.e,{label:d.Ru.get("more.label.context",y),size:$})}),V?(0,p.jsx)(zs.r,{spec:a,children:(0,p.jsx)(ws,{metadata:e.metadata,tracklistDomRef:m,sortableColumns:x})}):(0,p.jsx)("div",{className:ot.A.leadingSlot,children:(0,p.jsx)(hs.u,{property:Vs.mA2,renderNewExperience:()=>(0,p.jsx)(gs.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var qs=a(27338),Ks=a(26205);const Hs=e=>{const t=(0,Ye.s)(),a=(0,s.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),i=(0,Ks.t)(a);return(0,p.jsxs)("div",{className:ot.A.concertsFooter,children:[(0,p.jsx)($e.N,{to:"/concerts",className:ot.A.ctaLink,onClick:()=>{const e=a.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,p.jsxs)("div",{className:ot.A.promoRow,ref:i,children:[(0,p.jsx)(n.E,{as:"h2",variant:"bodyMediumBold",className:ot.A.promoTitle,children:d.Ru.get("concerts.find_more")}),(0,p.jsx)(qs.v,{as:"span",selected:!0,children:d.Ru.get("concerts.find_nearby")}),(0,p.jsx)("img",{className:ot.A.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,p.jsx)("div",{className:ot.A.disclaimerContainer,children:(0,p.jsx)(n.E,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:d.Ru.get("concerts_near_you.playlist_disclaimer")})})]})};var Qs=a(10867),Gs=a(3692),Ys=a(82243);const Js="multiUserAttributionDisplayNamesV2";function Xs(e){return(0,Ea.Jy)(e)||(0,Ea.xp)(e)}function Zs(e){return(0,Ea.Jy)(e)||(0,Ea.xp)(e)||(0,Ea.pW)(e)}const ei=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,playlistName:r,isMixedMedia:n,isLive:o,isBlend:m,isConcert:x,isBooklist:h,canEdit:y,scrollToUid:g,feedbackPath:b,deleteFeedbackPath:f,usePlayContextItem:j,tracklistRef:A,tracklistDomRef:R,canRemove:S,spec:I,initialItems:E,isCompactMode:N=!1,sortableColumns:P,hasSpotifyAudiobooks:L}){const U=(0,Ye.s)(),w=(0,l.NC)(Vs.LX5),_=(0,fa.m)(),{filter:M}=(0,s.useContext)(C.g),{sortState:B,setSortState:O}=(0,s.useContext)(v.cL),D=(0,s.useRef)((()=>{})),[F,$]=(0,s.useState)([]),V=(0,i.wA)(),z=(0,La.w)(),W=(0,s.useCallback)((()=>{A?.current&&A.current.update()}),[A]);(0,Na.H)(a,W);const q=(0,s.useCallback)(((e,t)=>{O((0,T.So)(e,B)),U.logInteraction(I.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[O,B,U,I]),K=(0,s.useCallback)((e=>{D.current(),_.remove(a,e)}),[_,a]),H=(0,s.useCallback)(((e,t,a=!1)=>{S&&(D.current=t,e.length>1&&!a?$(e):K(e))}),[S,K]);(0,s.useEffect)((()=>{A?.current&&g&&A.current.scrollToItem({uid:g})}),[g,A]);const Q=(0,s.useCallback)((async(e,t)=>{const s=await _.getContents(a,{offset:e,limit:t,sort:(0,T.Xt)(B),filter:M,decorateFormatListData:!!b||o||m});return{items:s.items,totalLength:s.totalLength}}),[a,_,B,M,b,o,m]),G=(0,s.useCallback)(((e,t,s)=>{if(!A?.current)return;const i=A.current.getRows()[t];i&&(U.logInteraction(I.dragSort()),s===Ot.Y.Before?_.move(a,e,{before:i}):_.move(a,e,{after:i}))}),[A,U,I,_,a]),Y=(0,s.useCallback)(((e,t,s)=>{if(!A?.current)return;const i=A.current.getRows()[t];i&&(U.logInteraction(I.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),s===Ot.Y.Before?V((0,u.io)(a,e,{before:{uri:i.uri,uid:i.uid}})):V((0,u.io)(a,e,{after:{uri:i.uri,uid:i.uid}})))}),[A,U,I,a,V]),J=(0,s.useCallback)(((e,t)=>{let s,i=null;(0,Ea.xp)(e)?(i=e.show,s=e.images.concat(e.show?.images||[])):(0,Ea.Jy)(e)?(i=e.album,s=e.album?.images):(0,Ea.pW)(e)&&(s=e.images);const l=(0,Ga.g)(s,{desiredSize:40,desiredLabel:"small"});let o=[];y&&B.order===nt.H.NONE&&(o=h?[fe.fl.AUDIOBOOKS]:[fe.fl.TRACKS,fe.fl.LOCAL_TRACKS,fe.fl.EPISODES,...L?[fe.fl.AUDIOBOOKS]:[]]);const d="1"===e?.formatListAttributes?.["dislike-feedback-selected"],u=!!(0,Ea.xp)(e)&&e.podcastSubscription.isUserSubscribed;let g=!1;(0,Ea.xp)(e)&&e.podcastSubscription.isPaywalled&&!u?g=!0:Xs(e)?g=e.isPlayable&&!d:(0,Ea.pW)(e)&&(g=!0);let A=!1;(0,Ea.xp)(e)&&e.podcastSubscription.isPaywalled?A=!0:(0,Ea.pW)(e)&&(A=e.isLocked&&!e.isOutOfMarket);const R=m&&((e,t)=>{const a=[];if(!t)return a;const s=t[Js]?Js:"multiUserAttributionDisplayNames",i=t?.[s]?.split(","),r=t?.multiUserAttributionImages?.split(",");if(!i||!r)return a;const n=t?.multiUserAttributionUsernamesV2?.split(",")||[],l=t?.multiUserAttributionType?.split(",")||[],o=i.length;for(let e=0;e<o;e++){const t=n[e],s=t&&(0,c.Qj)(t).toURI();a.push({username:t,uri:s,displayName:i[e],images:(d=r[e],d.length>1?[{url:d}]:[]),recsplanation:l[e]})}var d;return a.sort(((t,a)=>t.username?t.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let T=0;Xs(e)?T=e.duration.milliseconds:(0,Ea.pW)(e)&&(T=e.durationMs||0);let C="";return Zs(e)&&(C=e.name),(0,p.jsx)(Ys.W,{isCompactMode:N,index:t,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:g,duration_ms:T,isPaywalled:A,isUserSubscribed:u,name:C,artists:(0,Ea.Jy)(e)?e.artists:void 0,albumOrShow:i,isExplicit:(Zs(e)&&e.isExplicit)??!1,hasAssociatedVideo:((0,Ea.Jy)(e)&&e.hasAssociatedVideo&&w)??!1,isMixedMedia:n,isLocal:(0,Ea.Jy)(e)&&e.isLocal,addedBy:R,hasDecoratedAddedBy:_.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Ea.xp)(e)&&e.release.date||"",isMOGEFRestricted:((0,Ea.Jy)(e)||(0,Ea.xp)(e))&&e.is19PlusOnly,type:e.type,imgUrl:l?.url||"",onMove:G,onInsert:Y,usePlayContextItem:j,allowedDropTypes:o,feedbackPath:b,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:f,isDisliked:d,isBlend:m,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:S,playlistName:r,isConcert:x,concertsCount:e.formatListAttributes?.concerts_count,concertURI:e.formatListAttributes?.target_uri,concertDate:e.formatListAttributes?.first_concert_date,concertVenue:e.formatListAttributes?.first_concert_venue,authorName:(0,Ea.pW)(e)?e.authorName:"",isOutOfMarket:!!(0,Ea.pW)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,Ea.pW)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:y,bpm:(0,Ea.Jy)(e)?e.bpm:void 0,musicKey:(0,Ea.Jy)(e)?e.key:void 0},t+e.uri)}),[y,h,B.order,m,N,a,w,n,_,G,Y,j,b,f,S,r,x,L]),X=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,Z]=(0,k.z1)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Wt.pZ,{value:"playlist-tracklist",children:(0,p.jsx)(rt.S4,{isCompactMode:N,testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:z,sortableColumns:P,sortState:B,onSort:q,onRemove:H,renderRow:J,resolveItem:X,nrTracks:t,fetchTracks:Q,limit:100,canFetchAllTracks:_.getCapabilities().canFetchAllTracks,outerRef:A,outerDomRef:R,tracks:E,isConcertPlaylist:x,onNrValidItemsChange:Z,columnPersistenceKey:"playlist-tracklist"},a)}),(0,p.jsx)(Gs.F,{title:d.Ru.get("playlist.remove_from_playlist",r),isOpen:F.length>0,tracks:F,onClose:e=>{e.stopPropagation(),$([])},onRemove:K})]})}));var ti=a(41896),ai=a(55964);const si={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},ii=e=>{const t=e.replace(/\+/g,"%20");return decodeURIComponent(t)},ri=e=>{const t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};const a=t[1],s=/([^:]+):([^:]+)/g;let i;const r=[],n=[];for(;i=s.exec(a);){const e=i[1];let t=i[2];e===si.USER&&(t=ii(t)),r.push(e),n.push(t)}if(0===r.length)return{type:null,id:null};const l=r.reduce(((e,t,a)=>(e[r[a]]=n[a],e)),{});return{type:r[r.length-1],id:n[n.length-1],...l}};var ni=a(70016),li=a(70376),oi=a(76092);const ci=new U.l("getAudiobooksMetadata","query","e04c61a831b3e1861a5de961c520ddf7834127ef8e4b94724173a4c4a90e38fe",null),di=3e5;function ui(e,t){return["list-extender",e,t]}const mi=(e,t,a=10,i)=>{const r=2*a,n=3*a,l=(0,oi.jE)(),c=(0,s.useRef)(0),[d,u]=(0,s.useState)(e),[m,p]=(0,s.useState)((()=>l.getQueriesData({queryKey:ui(e,t),stale:!1}).at(0)?.[1]??[])),x=(0,s.useRef)(m.map((e=>e.uri??""))),{spec:h,logger:y}=(0,Je.r)(o.K,{data:{uri:e}}),g=(0,s.useMemo)((()=>h.recommendedFactory()),[h]);(0,li.e)(ni.Lj.OPERATION_COMPLETE,(({data:a})=>{a.uri===e&&(a.operation===ni.sP.ADD?p((e=>e.filter((e=>a.uris.every((t=>t!==e.uri)))))):a.operation===ni.sP.REMOVE&&p((e=>e.filter((e=>a.items.every((t=>t.uri!==e.uri)))))),a.operation!==ni.sP.ADD&&a.operation!==ni.sP.REMOVE||l.invalidateQueries({queryKey:ui(e,t)}))}));const b=(0,s.useRef)(!0);(0,s.useEffect)((()=>(b.current||(p([]),u(e),x.current=[],c.current=c.current+1),b.current=!0,()=>{c.current=c.current+1})),[e]),(0,s.useEffect)((()=>{if(m.length<r){const e=Math.min(r,n-m.length),a=c.current,s=ui(d,t),o=b.current&&0===x.current.length;(o?l.fetchQuery({queryKey:s,queryFn:()=>i(d,[],e),staleTime:di,gcTime:di}):i(d,x.current,e)).then((t=>{if(a!==c.current||!t)return;const i=t.map((e=>e?.uri&&e.uri)).filter((e=>null!==e));t.length<e&&x.current.length?x.current=[]:x.current=[...x.current,...i],p((e=>[...e,...t])),o&&l.setQueryData(s,t)}))}b.current=!1}),[r,n,d,m.length,l,i,t]);const f=(0,s.useCallback)((()=>{if(h){const e=g.refreshButtonFactory().hitRefreshContent();y.logInteraction(e)}p((e=>e.slice(a)))}),[y,g,h,a]);return{recommendations:m.slice(0,a),_bufferedRecommendations:m.slice(a),refresh:f}},pi=s.memo((function({uri:e}){const{recommendations:t,refresh:a}=((e,t=10)=>{const a=(0,fa.m)(),{request:i}=(0,s.useContext)(da.j),r=(0,s.useCallback)((async(e,t,s)=>{const r=await a.getRecommendedBookUris(e,t,s),n=await i(ci,{uris:r});return n?.data?.podcasts.map((e=>"Audiobook"===e.__typename?V(e):null)).filter(K.P)??[]}),[a,i]);return mi(e,"book",t,r)})(e),{draggable:i,onDragStart:r}=(0,la.P)(),l=(0,ai.p)();return l?t?.length&&t.length>0?(0,p.jsxs)("div",{className:ot.A.recommendedTrackList,children:[(0,p.jsx)("div",{className:ot.A.top,children:(0,p.jsxs)("div",{className:ot.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:ot.A.subtitle,children:d.Ru.get("playlist.extender.songs.in.playlist")})]})}),l&&(0,p.jsxs)(p.Fragment,{children:[t.map(((t,a)=>t?(0,p.jsx)(st,{contextUri:e,index:a,featureIdentifier:"playlist_recommendations",book:t,sharingInfo:t.sharingInfo,isRecommendation:!0,draggable:i,onDragStart:e=>{r(e,{itemUris:[t.uri],itemMimeTypes:[fe.fl.AUDIOBOOKS],dragLabelText:t.name})},showSeparator:0!==a},a):null)),(0,p.jsx)(fs.H,{className:ot.A.refreshButton,onClick:a,children:d.Ru.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:ot.A.recommendedTrackList,children:(0,p.jsx)("div",{className:ot.A.top,children:(0,p.jsxs)("div",{className:ot.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:ot.A.subtitle,children:d.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})}));var xi=a(20042);const hi=s.memo((function({playlistUri:e,canEdit:t,tracks:a}){const i="1"===(0,xi.$)("filter-age-restricted-content"),{usePlayContextItem:r}=(0,He.P)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:D.c.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),n=(0,s.useCallback)(((a,s)=>{const n=a.duration;return(0,p.jsx)(ra,{index:s,imgUrl:a.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:a.uri,isPlayable:!(i&&a.isMOGEFRestricted),name:a.name,artists:a.artists,album:{...a.album,imgUrl:a.album.imageUrl},isExplicit:a.explicit,isMOGEFRestricted:a.isMOGEFRestricted,usePlayContextItem:r,durationMs:n,shouldRenderDuration:!t,internalLink:!0},`${s}-${a.uri}`)}),[e,i,r,t]),l=(0,s.useMemo)((()=>[nt.$.TITLE_AND_ARTIST,nt.$.ALBUM,nt.$.ADDED_AT,nt.$.ADD]),[]),o=(0,s.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),c=(0,s.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return(0,p.jsx)(rt.S4,{ariaLabel:d.Ru.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:it.qq,tracks:c,renderRow:n,resolveItem:o,columns:l},`${e}-recommended`)})),yi=s.memo((function({playlistUri:e,playlistLength:t,canEdit:a}){const{recommendations:i,refresh:r}=((e,t=10)=>{const a=(0,fa.m)(),i=(0,s.useCallback)((async(e,t,s)=>{const i=t.map((e=>ri(e).id??""));return a.getRecommendedTracks(e,i,s)}),[a]);return mi(e,"track",t,i)})(e),l=!t||0===t,o=(0,ai.p)(),c=l?d.Ru.get("playlist.extender.title.in.playlist"):d.Ru.get("playlist.extender.songs.in.playlist");return o?i.length>0?(0,p.jsxs)("div",{className:ot.A.recommendedTrackList,children:[(0,p.jsx)("div",{className:ot.A.top,children:(0,p.jsxs)("div",{className:ot.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:ot.A.subtitle,children:c})]})}),o&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(hi,{playlistUri:e,canEdit:a,tracks:i}),(0,p.jsx)(fs.H,{className:ot.A.refreshButton,onClick:r,children:d.Ru.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:ot.A.recommendedTrackList,children:(0,p.jsx)("div",{className:ot.A.top,children:(0,p.jsxs)("div",{className:ot.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:ot.A.subtitle,children:d.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})}));var gi=a(29020),bi=a(80545),fi=a(9395),ji=a(17996),Ai=a(71881),Ri=a(81160),Ti=a(53888);const Ci=["meta+v"];var vi=a(99559),ki=a(22010),Si=a(61217),Ii=a(86652),Ei=a(88853),Ni=a(37708),Pi=a(4355);const Li=s.lazy((()=>a.e(4789).then(a.bind(a,88311)))),Ui=s.lazy((()=>Promise.resolve().then(a.bind(a,16319)))),wi=s.lazy((()=>a.e(3632).then(a.bind(a,5649)))),_i=s.lazy((()=>a.e(9718).then(a.bind(a,36591)))),Mi=new Set([]),Bi=s.memo((function({playlist:e,capabilities:t}){const{metadata:{uri:a,name:m,images:x,totalLength:h,unfilteredTotalLength:y,isOwnedBySelf:j,hasEpisodes:R,canAdd:N,canRemove:P,formatListData:L,hasDateAdded:U,collaborators:_,isPublished:M,hasSpotifyAudiobooks:B,hasSpotifyTracks:O},contents:{items:D}}=e,{spec:F,logger:$,UBIFragment:V}=(0,Je.r)(o.K,{data:{uri:a}}),z=(0,$s.n)(),W=(0,l.NC)(Pi.Cf,{loadingValue:!1}),q=(0,l.NC)(Pi.Mc,{loadingValue:!1}),K=(0,l.NC)(Vs.FQE,{loadingValue:!1}),H=(0,gi.m)(),{isCompactMode:Q}=(0,bi.a)(),G=s.useMemo((()=>F.headerFactory()),[F]),Y=s.useMemo((()=>F.tracklistFactory()),[F]),J=s.useMemo((()=>F.actionBarFactory()),[F]),X="chart"===L?.type,Z="concerts-near-you"===L?.type&&W,ee="live-streams"===L?.type,te=["blend","celebrity-blend","friends-mix"].indexOf(L?.type||"")>-1,ae=[O,R,B].filter(Boolean).length>1,se=!ae&&!!B&&(0,ti.R)(D),ie="artistsets"===L?.type||"this-is"===L?.attributes["editorial.series"],re=L?.attributes||{},ne=re.header_image_url_desktop||re.image_url||null,le=N&&P,{inlineCurationModeIsOn:oe,handleInlineCurationModeChange:ce}=((e,t)=>{const[a,i]=(0,s.useState)(e&&0===t),{scrollNodeChildRef:r}=(0,s.useContext)(Ia.bi),n=(0,s.useRef)(a);return(0,s.useEffect)((()=>{const e=!n.current;r&&e&&a&&r.current?.scrollIntoView({block:"end",behavior:"smooth"}),n.current=a}),[r,a]),{inlineCurationModeIsOn:a,handleInlineCurationModeChange:e=>{i(e)}}})(le&&(!se||q&&K),y),{productState:ue}=(0,i.d4)(vi.Ht),me=!!ue?.ads&&parseInt(ue.ads,10)>0,pe="spotify"===e.metadata.owner.username,xe=(0,i.wA)(),he=(0,r.wQ)(),ye=(0,r.zy)(),ge=(0,l.NC)(Vs.vQ3,{loadingValue:!1}),be=(0,l.NC)(Vs.UPi,{loadingValue:!1}),fe=(0,I.useThisisPlaylistExtensionQuery)({uri:a},{gcTime:5*w.i,enabled:ie}).data?.playlistV2,je="Playlist"===fe?.__typename?fe.artistsOnTour?.[0]:null,Ae=be&&"Playlist"===fe?.__typename?fe.concerts?.items.map((e=>e.data)):null,Re=Ae?.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{const t=[e.location.name,e.location.city].join(d.Ru.getSeparator()),a=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:t,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:a[0]?.visuals.avatarImage?.sources[0]?.url,saved:e.saved}})),Te="POP"!==he?new URLSearchParams(ye.search).get("uid"):null,Ce=(0,Dt.W)(),{filter:ve}=(0,s.useContext)(C.g),{sortState:ke}=(0,s.useContext)(v.cL),Se=(0,fa.m)(),Ie=(0,s.useRef)(null),Ee=(0,s.useRef)(null),[Ne]=x,Pe=(0,fi.H)(null!==ne?ne:Ne?.url||null),{contentsOptions:Le}=(0,va.$)(ke,ve),{isPlaying:Ue,isActive:we,togglePlay:_e,usePlayContextItem:Me}=(0,He.P)((0,Ii.A)(a,Le),{featureIdentifier:"playlist"}),Be=(0,s.useCallback)((()=>{const e=(0,Ve.$I)({isPlaying:Ue,isActive:we,spec:J.playButtonFactory(),logger:$,uri:a});_e({loggingParams:e})}),[Ue,we,_e,J,$,a]);!function(e){const t=(0,ji._)(),a=(0,de.YQ)((()=>{t.paste().then((t=>e(t)))}),500,{leading:!0,trailing:!1});(0,Ti.f)(Ci,a),(0,Ri.x)(Ai.W.PASTE,a)}((0,s.useCallback)((e=>{const t=e.split(/[\r\n]+/g).map((e=>(0,c.o_)(e))).filter((e=>null!==e&&((0,c.U_)(e)||(0,c.gH)(e)||(0,c.Pk)(e))));if(t.length>0&&N){const e=t.map((e=>e.toURI())),s=Ie.current?.getSelected()?.slice(-1)?.[0],i={after:s??"end"};xe((0,u.io)(a,e,i))}}),[N,xe,a]));const Oe=(0,s.useCallback)(((e,t)=>{const s=[...t[la.O[c.NQ.TRACK]]||[],...t[la.O[c.NQ.LOCAL_TRACK]]||[],...t[la.O[c.NQ.EPISODE]]||[],...t[la.O[c.NQ.ALBUM]]||[]];s.length>0&&N&&($.logInteraction(F.dragAddToPlaylist({playlist:a,itemToBeAdded:s[0]})),xe((0,u.io)(a,s)),Ce({targetUri:a,intent:"add",type:"drop"}))}),[N,$,F,a,xe,Ce]),De=!pe&&0!==y,Fe=!se&&z&&(le&&!oe||De),$e=se&&q&&K&&z&&(le&&!oe||De),ze=(!se||q&&K)&&j&&z,We=!le&&!se&&!De&&z,qe=(0,A.Lw)(),Ke=(0,A.hi)(),Qe=!(R||B||0===y||pe||We),Ge=Qe&&qe,Ye=Qe&&Ke,Xe=_?.count??1,[Ze]=(0,k.z1)(),et="plays"===re.rank_type,tt=(0,s.useMemo)((()=>(0,T.Ey)({isMixedMedia:ae,hasEpisodes:R,hasSpotifyAudiobooks:B,hasDateAdded:U,isLive:ee,isConcert:Z,isBlend:te,nrCollaborators:Xe,isBooklist:se,isCompactMode:Q,isChart:X,showPlayCount:et,isExtraColumnsEnabled:H})),[ae,R,B,U,ee,Z,te,Xe,se,Q,X,et,H]),at=(0,s.useMemo)((()=>{let e;return e=Se.getCapabilities().canSort?se?new Set(v.dh):new Set((0,T.zq)(tt)):Mi,e}),[tt,se,Se]),st=K&&se&&!Q;return(0,p.jsxs)(s.Suspense,{fallback:null,children:[(0,p.jsx)(E.c,{artistOrShow:e.metadata.owner.displayName,title:m,uri:a,entityType:E.p.PLAYLIST}),(0,p.jsx)(f.Q,{children:(0,Ni.Q2)({playlistName:m,userName:e.metadata.owner.displayName||"",isSpotifyOwned:pe})}),(0,p.jsx)(b.A,{types:N&&!se?[la.O[c.NQ.TRACK],la.O[c.NQ.LOCAL_TRACK],la.O[c.NQ.EPISODE],la.O[c.NQ.ALBUM]]:[],onDrop:Oe,children:(0,p.jsxs)("section",{role:"presentation",className:ot.A.playlist,"data-testid":"playlist-page","data-test-uri":a,children:[(0,p.jsx)(Qs.x,{metadata:e.metadata,isPlaying:Ue,isPublished:M,totalItems:Ze,togglePlay:Be,backgroundColor:Pe,spec:G}),(0,p.jsxs)("div",{className:ot.A.playlistContent,children:[(0,p.jsx)(Ws,{playlist:e,capabilities:t,spec:J,isPlaying:Ue,isActive:we,togglePlay:Be,isBooklist:se,backgroundColor:Pe,tracklistDomRef:Ee,isConcert:Z,sortableColumns:at}),(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Li,{formatListData:e.metadata.formatListData})}),!be&&je?.upcomingEventsCount?(0,p.jsx)(Ui,{artistConcertsUri:je.uri||"",artistImageUrl:je.imageUrl||"",artistName:je.title||"",spec:F}):null,be&&!!je&&Re&&Re.length>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(wi,{liveEvents:Re,artistConcertsUri:je.uri||"",artistName:je.title||"",spec:F})}),(0,p.jsxs)("div",{className:"contentSpacing",children:[me?(0,p.jsx)(g,{playlistUri:a}):null,me&&pe?(0,p.jsx)(_i,{uri:a,playlistName:m}):null,e.metadata.hasSpotifyAudiobooks&&ge&&(0,p.jsxs)("div",{className:ot.A.noBooklistSupportContainer,children:[(0,p.jsx)(n.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:d.Ru.get("web-player.playlist.booklist-not-supported-title")}),(0,p.jsx)(n.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:d.Ru.get("web-player.playlist.booklist-not-supported.message")})]}),h>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:st?(0,p.jsx)(Pa,{initialItems:D,contextUri:a,nrItems:h,canEdit:le,canRemove:P,ariaLabel:m}):(0,p.jsx)(V,{spec:Y,children:(0,p.jsx)(S.a,{columns:tt,children:X?(0,p.jsx)(Ja,{ariaLabel:m,nrTracks:h,playlistUri:a,scrollToUid:Te,usePlayContextItem:Me,tracklistDomRef:Ee,sortableColumns:at,isCompactMode:Q},a):(0,p.jsx)(ei,{ariaLabel:m,nrTracks:h,playlistUri:a,playlistName:m,isMixedMedia:ae,isLive:ee,isConcert:Z,isBlend:te,isBooklist:se,canEdit:le,scrollToUid:Te,feedbackPath:re["dislike-endpoint"],deleteFeedbackPath:re["delete-endpoint"],usePlayContextItem:Me,tracklistRef:Ie,tracklistDomRef:Ee,canRemove:P,spec:Y,initialItems:D,isCompactMode:Q,sortableColumns:at,hasSpotifyAudiobooks:B??!1},a)})})}),ze&&(0,p.jsx)(s.Suspense,{fallback:null,children:oe?(0,p.jsx)(ua,{playlistUri:a,onCurationModeChange:ce,isBooklist:se}):(0,p.jsx)("button",{className:ot.A.seeMore,onClick:()=>{ce(!0)},children:(0,p.jsx)(n.E,{as:"div",variant:"bodySmallBold",children:d.Ru.get("playlist.curation.find_more")})})}),Fe?(0,p.jsx)("div",{"data-testid":"recommended-track",children:(0,p.jsx)(yi,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength,canEdit:le})}):null,$e?(0,p.jsx)(pi,{uri:a}):null,We&&(0,p.jsx)(os,{uri:a}),(Ge||Ye)&&(0,p.jsx)("div",{"data-testid":"playlist-ilr-similar-to-be-added"}),Ye&&(0,p.jsx)("div",{"data-testid":"playlist-ilr-other-to-be-added"})]})]}),Z&&(0,p.jsx)(Hs,{spec:F.footerSectionFactory()})]})})]})})),Oi=s.memo((function({uri:e}){const t=(0,fa.m)().getCapabilities(),{filter:a}=(0,s.useContext)(C.g),{sortState:i}=(0,s.useContext)(v.cL),{metadataOptions:r,contentsOptions:n}=(0,va.$)(i,a),{data:l,isLoading:o,isError:c}=(0,Ei.W)(e,r,n);return!l||o?(0,p.jsx)(R.A,{hasError:c,errorMessage:d.Ru.get("error.not_found.title.playlist"),loadOffline:t.canModifyOffline}):l.metadata.permissions&&!l.metadata.permissions.canView?(0,p.jsx)(j.Z,{uri:e}):(0,p.jsx)(Bi,{playlist:l,capabilities:t})})),Di=()=>{const{playlistId:e}=(0,r.g)(),t=(0,c.Ps)((e||"").split("&")[0]).toURI();return(0,p.jsx)(Si.P,{surface:ki.u.PLAYLIST,uris:[t],children:(0,p.jsx)(v.sn,{uri:t,children:(0,p.jsx)(C.s,{uri:t,children:(0,p.jsx)(k.S1,{children:(0,p.jsx)(Oi,{uri:t})})})})})}},27565:(e,t,a)=>{a.d(t,{A:()=>s});const s={entityRow:"ci11tAmTK1LnxThQkXPy",actions:"_2sJPwAAp1wY1Ftke6iFe",visibleAction:"yuNzasMLs7hvemHI4d8Q",active:"dNymWGRudMrTI6ot9FBg",title:"luWcW9hkbLdFxRQB0yGb",body:"abYR6tZoE7BdzThmWTb0",footer:"GOcKQxqNMhGzbGiAXBig",separator:"yFQjuDAhri_egM1pwn70"}},89569:(e,t,a)=>{a.d(t,{A:()=>s});const s={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map