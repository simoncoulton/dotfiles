"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7125],{21106:(e,t,s)=>{s.d(t,{R:()=>i});var r=s(91360),a=s(86070);const i=({uri:e,enabled:t,className:s,children:i,onClick:n})=>t?(0,a.jsx)(r.N,{to:e,className:s,onClick:n,children:i}):(0,a.jsx)(a.Fragment,{children:i})},45849:(e,t,s)=>{s.d(t,{u:()=>m});var r=s(97500),a=s.n(r),i=s(11892),n=s(70462),o=s(58571),c=s(45292),l=s(6309),u=s(4139),d=s(63089),p=s(86070);const m=({uri:e,src:t,playAriaLabel:s,onClick:r,isPlaying:m,isActive:h,isLocked:y,isEpisode:f,isVideo:g,spec:x})=>{const b=(0,c.W)(),j=(0,u.s)(),R=(0,i.YQ)((t=>{let s;if(b({type:"click",intent:m?"pause":"play"}),x){const t=x.playbackButtonFactory();let r;r=h&&m?t.hitPause({itemToBePaused:e}):h&&!m?t.hitResume({itemToBeResumed:e}):t.hitPlay({itemToBePlayed:e}),s=j.logInteraction(r)}r(t,s)}),l.d,{leading:!0,trailing:!1});return(0,p.jsxs)("div",{className:d.A.rowImageWithPlay,children:[(0,p.jsx)(o.e,{src:t,isEpisode:f,isVideo:g}),(0,p.jsx)(n.x,{className:a()(d.A.rowPlayPauseButton,d.A.rowImagePlayPauseButton),iconClassName:d.A.rowPlayPauseIcon,onClick:R,isPlaying:m,isLocked:y,playAriaLabel:s})]})}},72977:(e,t,s)=>{s.d(t,{r:()=>x});var r=s(30758),a=s(95404),i=s(15231),n=s(26892),o=s(59677),c=s(91360),l=s(65968),u=s(78487);const d="CqCtb3wr4SK8AiZwxeH0",p="IGCDq9qa08JVVY3mcy7Y",m="Vn9yz8P5MjIvDT8c0U6w",h="MtV402NmdUF5mceSD0Dy",y="WDC2Yzs811n7JCYtYQzc";var f=s(86070);const g=a.l0o,x=({title:e,imageUrl:t,viewId:s,pageId:a,color:x=g,href:b,index:j,ubiId:R})=>{const C=s&&`/genre/${s}`||b||"#",{spec:v,logger:A}=(0,u.r)(n.b,{data:{position:j,identifier:R}}),k=(0,r.useCallback)((()=>{const e=(0,o.o_)(C)?.toURI();e&&A.logInteraction(v.hitUiNavigate({destination:e}))}),[A,v,C]);return(0,f.jsx)("div",{className:p,children:(0,f.jsx)(c.N,{to:C,pageId:a,className:d,onClick:k,children:(0,f.jsxs)("div",{className:m,style:{backgroundColor:x},children:[t?(0,f.jsx)(l._,{loading:"lazy",src:t,className:y}):null,(0,f.jsx)(i.E,{variant:"titleSmall",className:h,children:e})]})})})}},45774:(e,t,s)=>{s.d(t,{K:()=>a});var r=s(59677);function a(e){const t=(0,r.o_)(e,{parseUnknown:!0}),[s,a]=t?.args??[];if(a&&"page"===s)return`/genre/${a}`}},30930:(e,t,s)=>{s.d(t,{PG:()=>a,f8:()=>n,oC:()=>r,s8:()=>i});const r=o(120),a=o(30),i=o(60),n=o(15);function o(e){return 60*e*1e3}},8352:(e,t,s)=>{s.d(t,{RS:()=>a,f0:()=>n,o8:()=>i});var r=s(91753);function a(e){return{url:e.url,width:e.width,height:e.height}}function i(e){if("Episode"===e.__typename){const t=e.podcastV2.data;return"Podcast"!==t.__typename?[]:t.coverArt?.sources.map(a)??[]}return[]}function n(e){switch(e.__typename){case"Artist":return e.visuals.avatarImage?.sources.map(a)??[];case"Album":case"Audiobook":case"Podcast":case"Episode":case"Chapter":return e.coverArt?.sources.map(a)??[];case"Track":return e.albumOfTrack?.coverArt?.sources.map(a)??[];case"Playlist":return e.images.items[0]?.sources.map(a)??[];case"User":return e.avatar?.sources.map(a)??[];case"Merch":return e.image?.sources.map(a)??[];case"ArtistConcerts":{const t=e.mainArtist.data;return"Artist"!==t.__typename?[]:t.visuals.avatarImage?.sources.map(a)??[]}case"BrowseSectionContainer":return e.data?.cardRepresentation?.artwork?.sources.map(a)??[];case"BrowseClientFeature":return e.artwork?.sources.map(a)??e.iconOverlay?.sources.map(a)??[];case"GenericError":case"NotFound":case"RestrictedContent":case"BrowseSpacesHub":case"BrowseExternalHref":return[];default:return(0,r.k)(e),[]}}},92389:(e,t,s)=>{s.d(t,{d:()=>r});const r=new(s(96266).l)("addConcertToLibrary","mutation","c4670bb9503f201cff5a61ee426a0aa93cac0eaa1c1b9b8c66d53e058f270f7c",null)},98046:(e,t,s)=>{s.d(t,{$:()=>r});const r=new(s(96266).l)("removeConcertFromLibrary","mutation","2b6a3dc45db6b423eb36c628ccb26768f2c03e75ae274e09a1701336d46dd21d",null)},92351:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ya});var r=s(30758),a=s(76092),i=s(41978),n=s(77),o=s(3074),c=s.n(o),l=s(39733),u=s(36779),d=s(41331),p=s(62462),m=s(62963),h=s(4391),y=s(66013),f=s(20769),g=s(86070);const x={albums:u.$h.SEARCH_ALBUMS,artists:u.$h.SEARCH_ARTISTS,episodes:u.$h.SEARCH_EPISODES,genres:u.$h.SEARCH_GENRES,playlists:u.$h.SEARCH_PLAYLISTS,podcasts:u.$h.SEARCH_SHOWS,audiobooks:u.$h.SEARCH_AUDIOBOOKS,tracks:u.$h.SEARCH_SONGS,users:u.$h.SEARCH_PROFILES,podcastAndEpisodes:u.$h.SEARCH_PODCASTS_AND_EPISODES,topResults:u.$h.SEARCH};function b({children:e}){const{query:t="",category:s=""}=(0,n.g)();return(0,g.jsx)(y.e,{pageId:x[s],entityUri:`spotify:app:search:${t}:${s}`,children:e})}function j({children:e}){const{query:t}=(0,n.g)();return(0,g.jsx)(y.e,{pageId:u.$h.SEARCH,entityUri:`spotify:app:search:${t}`,children:e})}var R=s(97613),C=s(56374),v=s(72977),A=s(8352),k=s(45774),w=s(91753);function I(e){const t=(0,A.f0)(e);if(t.length>0)return t[0].url}function P(e,t){switch(e.content.__typename){case"BrowseXlinkResponseWrapper":case"BrowseSectionContainerWrapper":return function(e,t,s){switch(e.__typename){case"BrowseClientFeature":return(0,g.jsx)(v.r,{title:e.title?.transformedLabel??"",pageId:"search",href:e.featureUri,color:e.backgroundColor?.hex,imageUrl:I(e),ubiId:e.featureUri,index:t},e.featureUri);case"BrowseSectionContainer":return e.data?.cardRepresentation?(0,g.jsx)(v.r,{title:e.data.cardRepresentation.title?.transformedLabel??"",pageId:"search",href:(0,k.K)(s),color:e.data.cardRepresentation.backgroundColor?.hex,imageUrl:I(e),ubiId:s,index:t},s):null;case"BrowseSpacesHub":case"GenericError":case"NotFound":case"BrowseExternalHref":return null;default:return(0,w.k)(e),null}}(e.content.data,t,e.uri);case"AlbumResponseWrapper":case"ArtistResponseWrapper":case"EpisodeOrChapterResponseWrapper":case"PlaylistResponseWrapper":case"PodcastOrAudiobookResponseWrapper":case"TrackResponseWrapper":case"UserResponseWrapper":case"ConcertResponseWrapper":case"MerchResponseWrapper":case"ArtistConcertsResponseWrapper":case"NoContent":case"UnknownType":return null;default:return(0,w.k)(e.content),null}}var S=s(30930),N=s(96266),E=s(61869);const U=new N.l("browseAll","query","cd6fcd0ce9d1849477645646601a6d444597013355467e24066dad2c1dc9b740",null),_=()=>{const{data:e}=((e,t)=>(0,E.I)(U,e,t))({pagePagination:{offset:0,limit:10},sectionPagination:{offset:0,limit:99}},{gcTime:S.oC,staleTime:S.PG});return"BrowseSectionContainer"!==e?.browseStart?.__typename?[]:e.browseStart.sections?.items??[]};var T=s(97295),q=s(57189),F=s(72553);const O="AGAj7hr0pC57oadgb75h",L=({browseAllSpec:e})=>{const t=_();return(0,g.jsx)("div",{className:O,children:t.map(((t,s)=>function(e,t,s){if(!e.data?.__typename)return null;switch(e.data.__typename){case"BrowseGridSectionData":return(0,g.jsx)(F.r,{spec:t,children:(0,g.jsx)(T.x,{config:(0,q.s1)(q.yV.BROWSE),children:(0,g.jsx)(C.p,{title:e.data?.title?.transformedLabel??"",index:s,id:e.uri,showAll:!0,children:e.sectionItems.items.map(((e,t)=>P(e,t)))})})},e.uri);case"BrowseSingleItemSectionData":case"BrowseGenericSectionData":case"BrowseRelatedSectionData":case"BrowseUnsupportedSectionData":return null;default:return(0,w.k)(e.data),null}}(t,e,s)))})};var B=s(28686),D=s(9139),V=s(78330);const M=()=>{const{searchHistory:e,clearSearchHistory:t}=(0,D.k)();return 0===e.length?null:(0,g.jsx)(C.p,{index:0,id:"recent-searches",total:e.length,seeAllUri:"spotify:app:recent-searches",title:d.Ru.get("search.title.recent-searches"),children:e.map(((e,s)=>(0,g.jsx)(V.pZ,{index:s,value:"search-history",children:(0,g.jsx)(B.X,{entity:e,index:s,clearSearchHistory:t})},e.uri)))})};var H=s(78487);const W="_YN9HVrnrcvnaCjYnNkM",$=()=>{const{spec:e,UBIFragment:t}=(0,H.r)(R.A,{data:{uri:"search:find"}}),{recentSearchesSpec:s,browseAllSpec:a}=(0,r.useMemo)((()=>({recentSearchesSpec:e.recentSearchesFactory(),topGenresSpec:e.topGenresFactory(),browseAllSpec:e.browseAllFactory()})),[e]);return(0,g.jsxs)("div",{className:W,children:[(0,g.jsx)(t,{spec:s,children:(0,g.jsx)(M,{})}),(0,g.jsx)(L,{browseAllSpec:a})]})};var G=s(95693),Z=s(92837),J=s(59677),Y=s(1030),Q=s(45116),X=s(58923),z=s(15231),K=s(74946),ee=s(50200);const te=(0,r.createContext)(null),se=te.Provider;function re(){const e=(0,r.useContext)(te);if(null===e)throw new Error("Trying to use 'SearchContext' without 'SearchProvider'!");return e}var ae=s(11244),ie=s(26205);const ne="_5hJUuCVGXtd6CaXQBUM",oe="DH8aRN7lGO_ZqFegRTmj",ce="W37c8X5LCtHtmryEzR4I",le="oNTqWDEksr002PdYJVmT",ue=({forChip:e})=>{const{query:t,serpId:s}=re(),r=!(0,ae.n)(),a=`/search/${t}`,i=(0,J.Ru)(t).toURI(),{spec:n,logger:o}=(0,H.r)(ee.w,{data:{uri:i,reason:s}}),c=(0,ie.t)(n);return(0,g.jsxs)("div",{className:ne,"aria-live":"polite",ref:c,children:[(0,g.jsx)(z.E,{as:"h1",variant:"titleSmall",className:oe,children:e?d.Ru.get("search.empty-results-title-for-chip",t,e):d.Ru.get("search.empty-results-title",t)}),(0,g.jsx)("p",{className:ce,children:r?d.Ru.get("web-player.search-modal.offline"):d.Ru.get("search.empty-results-text")}),e&&(0,g.jsx)(X.N_,{to:a,children:(0,g.jsx)(K.$,{colorSet:"invertedLight",className:le,onClick:()=>{o.logInteraction(n.seeAllButtonFactory().hitUiNavigate({destination:a}))},children:d.Ru.get("search.see-all")})})]})};var de=s(69036);const pe={results:null,isError:!1,isFetchMoreError:!1};var me=s(52952),he=s(88869),ye=s(69798),fe=s(57968),ge=s(66037),xe=s(98882),be=s(4139);const je="l5wWcdJAOxbcnqyfuEmX",Re="niq6jXm6QbYCNJJ6J0wQ",Ce="L3pQN7b5ky5wG5LuGE6o",ve=({index:e,item:t})=>{const{episode:s,show:r}=t,{usePlayContextItem:a}=(0,xe.P)({uri:t.episode.uri},{featureIdentifier:"search",referrerIdentifier:"search"});return(0,g.jsxs)("div",{className:Ce,children:[(0,g.jsx)(me.q,{index:e,episode:{...s,requestId:t.requestId},showMetadata:r,usePlayContextItem:a}),(0,g.jsx)("hr",{className:Re,"aria-hidden":!0})]})},Ae=({showTitle:e=!0,displayEmptyPageOnEmptyResults:t=!0,displayError:s=!0,enableInfiniteScroll:r=!1,fetchData:a,totalCountRef:i,items:n,isError:o})=>{const{query:c,serpId:l}=re(),u=(0,J.Ru)(c).toURI(),{ref:d,breakpoint:p}=(0,ge.x)({[ye.E.MEDIUM]:0,[ye.E.LARGE]:600}),m=(0,be.s)(),h=`spotify:app:search:${encodeURIComponent(c)}:episodes`,{spec:y,UBIFragment:f}=(0,H.r)(Z.w,{data:{uri:u,reason:l}});return o?s?(0,g.jsx)(G.o,{}):null:0===i.current?t?(0,g.jsx)(f,{spec:y.emptyResultsFactory(),children:(0,g.jsx)(ue,{forChip:Q.j7.episodes()})}):null:(0,g.jsxs)(fe.o.Provider,{value:p,children:[n&&e&&(0,g.jsx)(Y.k,{title:Q.j7.episodes(),seeAllUri:h,onClickTitle:()=>{y&&m.logInteraction(y.episodesListFactory().episodesListHeaderFactory().titleFactory().hitUiNavigate({destination:h}))},onClickSeeAll:()=>{y&&m.logInteraction(y.episodesListFactory().episodesListHeaderFactory().seeAllLinkFactory().hitUiNavigate({destination:h}))},hasMoreElements:!r&&n.length<(i.current||0)}),(0,g.jsx)("div",{ref:d,className:je,children:n&&(0,g.jsx)(he._,{triggerOnInitialLoad:!1,onReachBottom:()=>{r&&a()},children:n})})]})},ke=e=>{const{query:t,api:s}=re(),{results:a,isError:i,fetchData:n,totalCountRef:o}=((e,t)=>{const s=(0,de.a)(),a=(0,r.useRef)(null),i=(0,r.useRef)(0),[n,o]=(0,r.useState)(pe),c=(0,r.useCallback)((async(r=!1)=>{if(!s())return;r&&(i.current=0,a.current=null);let n=e;if(null!==a.current){if(i.current>=a.current)return;i.current+n>a.current&&(n=a.current-i.current)}try{const e=await t(i.current,n);i.current+=n,a.current=e.totalCount||0,s()&&o((t=>({isError:!1,isFetchMoreError:!1,results:(r||null===t.results?[]:t.results).concat(e.items)})))}catch(e){s()&&o((e=>{const t=null===e.results||r;return{results:r?[]:e.results,isError:t,isFetchMoreError:!t}}))}}),[e,t,s]);return(0,r.useEffect)((()=>{c(!0)}),[c]),{results:n.results,isError:n.isError,fetchData:c,totalCountRef:a}})(30,(0,r.useCallback)(((e,r)=>s.getFullEpisodes(t,e,r)),[s,t]));return(0,g.jsx)(Ae,{...e,fetchData:n,totalCountRef:o,items:a?.map(((e,t)=>(0,g.jsx)(ve,{item:e,index:t},t))),isError:i})};var we=s(42138);const Ie=e=>{const{title:t,category:s,query:r,results:a,onAddToHistory:i,position:n,showSeeAll:o}=e;if(!a)return null;const{items:c,totalCount:l}=a;return c&&0!==c.length?(0,g.jsx)(C.p,{index:n,id:s,total:l||0,title:t,testId:`${s}-search-entity`,seeAllUri:`spotify:app:search:${encodeURIComponent(r)}:${s}`,showSeeAll:o,children:c.map(((e,t)=>(0,g.jsx)(V.pZ,{value:s,index:t,children:(0,g.jsx)(we.Q,{onClick:()=>i(e),entity:e,index:t})},e.uri)))}):null},Pe="T2yEew5FpZAOv3uHa0NK",Se=({results:e})=>{const{query:t,serpId:s,onAddToHistory:r}=re(),a=(0,J.Ru)(t).toURI(),{spec:i,UBIFragment:n}=(0,H.r)(Z.w,{data:{uri:a,reason:s}});return 0===e?.podcasts.totalCount&&0===e?.episodes.totalCount?(0,g.jsx)(n,{spec:i.emptyResultsFactory(),children:(0,g.jsx)(ue,{forChip:Q.j7.podcastAndEpisodes()})}):(0,g.jsx)(n,{spec:i,children:(0,g.jsxs)("div",{className:Pe,children:[0!==e?.podcasts.totalCount&&(0,g.jsx)("div",{children:(0,g.jsx)(Ie,{position:0,category:"podcasts",title:Q.j7.podcastAndEpisodes(),query:t,results:e?.podcasts,onAddToHistory:r})}),0!==e?.episodes.totalCount&&(0,g.jsx)("div",{children:(0,g.jsx)(ke,{displayEmptyPageOnEmptyResults:!1,displayError:!1})})]})})};var Ne=s(97500),Ee=s.n(Ne),Ue=s(7450),_e=s(64888),Te=s(19019);const qe=({query:e,category:t,pageSize:s,includePreReleases:i})=>{const{api:n}=re(),o=(0,a.jE)(),c=(0,l.NC)(Te.Z85),u=(0,r.useMemo)((()=>["searchCategoryResults",e,{category:t,pageSize:s,includePreReleases:i}]),[t,i,s,e]),{data:d,isError:p,isLoading:m,fetchNextPage:h}=(0,_e.q)({queryKey:u,initialPageParam:{offset:0,limit:s},queryFn:async({pageParam:s})=>await n.getSearchCategoryResults(e,t,!0,i,s.offset,s.limit),getNextPageParam:(e,t)=>{if(!e)return null;const r=e.pagingInfo?.nextOffset;if(null===r)return null;let a=s;return void 0!==e.totalCount&&r+a>=e.totalCount&&(a=e.totalCount-r),{offset:r,limit:a}},select:e=>e.pages.flatMap((e=>e.items)),gcTime:c>0?6e5:0,staleTime:c>0?3e5:0});return(0,r.useEffect)((()=>()=>{c>0&&o.setQueryData(u,(e=>({pages:e?.pages.slice(0,c)??[],pageParams:e?.pageParams.slice(0,c)??[]})))}),[c,o,u]),{results:d,isLoading:m,isError:p,fetchNextPage:h}};var Fe=s(50101);const Oe="w7SWsAZah4vovAuFxjgk",Le="Qmu4FPZCnrDpQ85s4az5",Be=({displayChips:e,category:t})=>{const{query:s,serpId:a,onAddToHistory:i}=re(),n=(0,l.NC)(Te.Jl4)&&"audiobooks"===t,{results:o,isError:c,isLoading:u,fetchNextPage:d}=qe({query:s,category:t,pageSize:30,includePreReleases:n}),p=(0,r.useCallback)(((e,t)=>(0,g.jsx)(V.pZ,{value:"card",index:t,children:(0,g.jsx)(we.Q,{entity:e,onClick:()=>i(e),testId:`search-category-card-${t}`,index:t})},`${e.uri}-${t}`)),[i]),m=(0,J.Ru)(s).toURI(),{spec:h,UBIFragment:y}=(0,H.r)(Ue.b,{data:{uri:m,identifier:t,reason:a}}),f=(0,r.useMemo)((()=>h.cardsFactory()),[h]),x=(0,r.useMemo)((()=>h.emptyResultsFactory()),[h]);return c?(0,g.jsx)(G.o,{}):u||o&&0!==o.length?(0,g.jsx)(y,{spec:f,children:(0,g.jsx)("div",{className:Ee()(Oe,{[Le]:e}),children:o&&(0,g.jsx)(he._,{onReachBottom:d,triggerOnInitialLoad:!1,children:(0,g.jsx)(Fe.E,{render:()=>o.map(((e,t)=>p(e,t)))})})})}):(0,g.jsx)(y,{spec:x,children:(0,g.jsx)(ue,{forChip:Q.j7[t]()})})};var De=s(28088),Ve=s(6408),Me=s(93720),He=s(36450),We=s(21106),$e=s(50597),Ge=s(57103),Ze=s(73689),Je=s(69197),Ye=s(58571),Qe=s(65647),Xe=s(765),ze=s(62385),Ke=s(70045),et=s(33589),tt=s(74993),st=s(23885),rt=s(31845),at=s(78089),it=s(77131),nt=s(68732),ot=s(45647),ct=s(3068),lt=s(8398),ut=s(80805),dt=s(98812),pt=s(68702),mt=s(30023),ht=s(44817),yt=s(98913),ft=s(65312),gt=s(42668),xt=s(63089);const bt=r.memo((function({uri:e,name:t,duration:s,artists:r,album:a,isExplicit:i,is19PlusOnly:n,isPlayable:o,index:c,imgUrl:l,requestId:u,isLyricsMatch:p,hasAssociatedVideo:m}){const{isActive:h,isPlaying:y,triggerPlay:f,togglePlay:x}=(0,xe.P)({uri:e},{featureIdentifier:"search",referrerIdentifier:"search"}),{spec:b}=(0,H.r)(Ve.i,{data:{position:c,reason:u??"",uri:e}}),j=(0,ft.T)(e),{isPlayable:R,isAnyArtistBanned:C}=(0,pt.g)(e,{isPlayable:o,isLocal:!1,isOutOfMarket:!1,artistUris:r?.map((e=>e.uri))}),{unBanArtists:v}=(0,lt.M)(r.map((e=>e.uri))),{badges:A,hasBadges:k}=(0,gt.b)({downloadAvailability:j,isExplicit:i,isMOGEFRestricted:n,hasAssociatedVideo:m}),w=r?.map((e=>e.name)).join(d.Ru.getSeparator())||"",I=(0,dt.c)();return(0,g.jsx)(V.pZ,{value:"row",index:c,children:(0,g.jsx)(Me.h,{menu:(0,g.jsx)(He.P,{uri:e,albumUri:a?.uri,artists:r,contextUri:e}),children:(0,g.jsxs)(nt.w,{uri:e,contextUri:e,onTriggerPlay:(e,t)=>{f({loggingParams:t})},isActive:h,index:c,ariaRowIndex:c+1,isPlayable:R,isAnyArtistBanned:C,handleArtistBanUndoClick:v,ageRestricted:n,dragMetadata:{name:t,createdBy:w},spec:b,children:[(0,g.jsx)(tt.y,{ariaColIndex:0,children:(0,g.jsx)(Xe.$,{uri:e,playAriaLabel:d.Ru.get("tracklist.a11y.play",t,w),onClick:(e,t)=>{x({loggingParams:t})},isPlaying:y,isActive:h,spec:b,children:(0,g.jsx)(Ke.a,{children:c+1})})}),(0,g.jsxs)(st.U,{ariaColIndex:1,children:[(0,g.jsx)(Ye.e,{src:l}),(0,g.jsxs)(Qe.l,{children:[(0,g.jsx)(We.R,{enabled:I,uri:e,className:xt.A.rowTitle,children:(0,g.jsx)(it.p,{titleText:t,children:t})}),k&&(0,g.jsxs)(Ze.P,{children:[A.download&&(0,g.jsx)(mt._,{}),A.explicit&&(0,g.jsx)(ht.g,{}),A.nineteen&&(0,g.jsx)(yt.q,{className:xt.A.nineteen,size:16}),A.hasAssociatedVideo&&(0,g.jsx)(ot.l,{})]}),(0,g.jsxs)(at.p,{children:[(0,g.jsx)(Ge.l,{artists:r,spec:b}),p&&(0,g.jsx)(ut.G,{})]})]})]}),(0,g.jsx)(rt.o,{ariaColIndex:2,children:(0,g.jsx)($e.g,{uri:a?.uri||"",name:a?.name||"",creatorUri:r?.[0]?.uri,spec:b,children:a?.name})}),(0,g.jsxs)(et.l,{ariaColIndex:3,children:[(0,g.jsx)(ct.d,{uri:e,spec:b}),(0,g.jsx)(Je.P,{duration:s.milliseconds}),(0,g.jsx)(ze.Y,{menu:(0,g.jsx)(He.P,{uri:e,albumUri:a?.uri,artists:r,contextUri:e}),label:d.Ru.get("more.label.track",t,w),spec:b})]})]})})})}),((e,t)=>e.uri===t.uri));var jt=s(20507),Rt=s(76276),Ct=s(21995),vt=s(27338),At=s(98195),kt=s(91161),wt=s(91360);const It="search-searchCategory-SearchCategory",Pt="search-searchCategory-wrapper",St="search-searchCategory-categoryGridItem",Nt=({to:e,title:t,selected:s,onClick:r})=>(0,g.jsx)(wt.N,{replace:!0,to:e,tabIndex:-1,onClick:r,className:St,children:(0,g.jsx)(vt.v,{selected:s,selectedColorSet:"invertedLight",tabIndex:-1,children:t})}),Et=({searchCategories:e,selectedCategory:t,displayChips:s})=>{const{query:r}=re(),{spec:a,logger:i}=(0,H.r)(At.q,{});if(!r||!s)return null;const n=encodeURIComponent(r);return(0,g.jsx)("div",{className:It,children:(0,g.jsx)("div",{className:Ee()(Pt,"contentSpacing"),children:(0,g.jsxs)(kt.F,{children:[e.length>0&&(0,g.jsx)(Nt,{to:`spotify:app:search:${n}`,title:d.Ru.get("search.title.all"),selected:void 0===t,onClick:()=>{i.logInteraction(a.chipFactory({identifier:"all",position:0}).hitUiNavigate({destination:`spotify:app:search:${n}`}))}},"all"),e.map(((e,s)=>{const r=Q.j7[e]?.()??"";return r||console.warn("Received empty title for category: ",e),(0,g.jsx)(Nt,{to:`spotify:app:search:${n}:${e}`,title:r,selected:t===e,onClick:()=>{i.logInteraction(a.chipFactory({identifier:e,position:s+1}).hitUiNavigate({destination:`spotify:app:search:${n}:${e}`}))}},e)}))]})})})};var Ut=s(21466),_t=s(92686);const Tt="oahixVvmYv3VD8UxHkpr",qt=({pageSize:e=100})=>{if(e>100)throw new Error("PathFinder does not support page sizes > 100");const t=(0,h.A)(),{query:s,serpId:a}=re(),{results:i,isError:n,isLoading:o,fetchNextPage:c}=qe({query:s,category:"tracks",pageSize:20,includePreReleases:!1}),l=(0,r.useCallback)(((e,t)=>{const s=(0,_t.g)(e.album?.images,{desiredSize:40});return(0,g.jsx)(bt,{index:t,uri:(0,Ut.a)(e),duration:e.duration,name:e.name,album:e.album||void 0,artists:e.artists,isPlayable:e.isPlayable,isExplicit:e.isExplicit,is19PlusOnly:e.is19PlusOnly,imgUrl:s?.url||"",requestId:e.requestId,isLyricsMatch:e.isLyricsMatch,hasAssociatedVideo:e.hasAssociatedVideo},t+e.uri)}),[]),u=(0,r.useMemo)((()=>[Rt.$.INDEX,Rt.$.TITLE_AND_ARTIST,Rt.$.ALBUM,Rt.$.DURATION]),[]),p=(0,r.useCallback)((e=>({uri:e.uri})),[]),m=(0,J.Ru)(s).toURI(),{spec:y,UBIFragment:f}=(0,H.r)(De.t,{data:{uri:m,reason:a}}),x=(0,r.useMemo)((()=>y.tracksFactory()),[y]),b=d.Ru.get("search.showing-category-query-songs",s);if(n)return(0,g.jsx)(G.o,{});if(!(o||i&&0!==i.length))return(0,g.jsx)(f,{spec:y.emptyResultsFactory(),children:(0,g.jsx)(ue,{forChip:Q.j7.podcastAndEpisodes()})});const j=t?48:Ct.uC+48;return(0,g.jsx)(f,{spec:x,children:(0,g.jsx)(V.pZ,{value:"search-results-tracklist",children:(0,g.jsx)("div",{className:Tt,children:i&&(0,g.jsx)(he._,{triggerOnInitialLoad:!1,onReachBottom:c,children:(0,g.jsx)(jt.S4,{ariaLabel:b,hasHeaderRow:!0,columns:u,renderRow:l,resolveItem:p,nrTracks:i.length,headerTop:j,tracks:i,columnPersistenceKey:"search-results-tracklist"},s)})})})})},Ft=({results:e,displayChips:t})=>{const{category:s}=re();return s?"podcastAndEpisodes"===s?(0,g.jsx)(Se,{results:e}):"tracks"===s?(0,g.jsx)(qt,{}):"episodes"===s?(0,g.jsx)(ke,{enableInfiniteScroll:!0,showTitle:!1}):(0,g.jsx)(Be,{displayChips:t,category:s}):(0,g.jsx)(G.o,{})};var Ot=s(73346),Lt=s(42365),Bt=s(88948),Dt=s(35882),Vt=s(26606),Mt=s(93240),Ht=s(71498),Wt=s(3275),$t=s(45237),Gt=s(92389),Zt=s(98046),Jt=s(45866);const Yt="MdWVOTFflb7OayRjn9pZ",Qt="N7Ng_kgcjiOOGs7Y48l9",Xt="_4tnwlIafghEfbtatHyO",zt="xgdE_xwOB8XLCxHOdp_I",Kt="YQfV97NZUj3G9JJwAiuY",es=(e,t)=>e(Gt.d,{concertUri:t}),ts=(e,t)=>e(Zt.$,{concertUri:t}),ss=e=>{const[t,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(e.saved),{unsaveConcertFn:n=ts,saveConcertFn:o=es,enqueueSnackbarFn:c=Mt.M8}=e.deps??{},{getGraphQLLoader:l}=(0,f.mv)(),u=l(),p=(0,Jt.V)(),m=(0,J.o_)(e.uri);if(!m)return null;const h=a?Ht.k:Wt.P,y=a?"textPositive":void 0;return(0,g.jsx)(X.N_,{to:`/${m.toURLPath()}`,onClick:e.onClick,className:zt,children:(0,g.jsxs)("div",{className:Yt,children:[(0,g.jsxs)("div",{className:Qt,children:[(0,g.jsxs)("div",{className:Xt,children:[(0,g.jsx)(z.E,{as:"div",variant:"marginal",children:e.date.month}),(0,g.jsx)(z.E,{as:"div",variant:"bodySmallBold",children:e.date.day})]}),(0,g.jsxs)("div",{className:Kt,children:[(0,g.jsx)(z.E,{children:e.title}),(0,g.jsx)(z.E,{semanticColor:"textSubdued",variant:"bodySmall",children:e.subtitle})]})]}),!p&&(0,g.jsx)($t.H,{semanticColor:y,iconOnly:h,"aria-label":d.Ru.get("concerts_interested_tooltip"),onClick:async r=>{if(r.preventDefault(),r.stopPropagation(),!t){s(!0);try{a?(await n(u,e.uri),c(d.Ru.get("concerts_removed-from-your-saved-events")),i(!1)):(e.onClickInterested&&e.onClickInterested(),await o(u,e.uri),c(d.Ru.get("concerts_added-to-your-saved-events")),i(!0))}finally{s(!1)}}}})]})})};var rs=s(96771);const as="mh7QL6adD4FIJhD5Exb9",is="FgawEObrsLOnHPzhrl5a",ns="PrDOhMH2lS5D8mMwbmF1",os="hd4Hw4T7wuHZluBSTMZc",cs=e=>{const t=(0,J.o_)(e.uri);return t?(0,g.jsx)(X.N_,{to:`/artist/${t.id}/concerts`,onClick:e.onClick,className:os,children:(0,g.jsxs)("div",{className:as,children:[(0,g.jsx)("div",{className:is,children:(0,g.jsx)(rs.T,{className:ns})}),e.children]})}):null},ls="XZWs6fKwvH8afOAX9oRk",us="xZzauCAsVPuDnvFjEnl5",ds="UDNDdAPalgpoNPaKmACx",ps="yKnPM8up5atlbSBdRXVv",ms="ifJugrlP5ysjVmb2s4v3",hs="NsXrW_ZuSRESU0URaCER",ys=({uri:e,date:t,title:s,subtitle:a,saved:i})=>{const{spec:n}=(0,H.r)(Dt.S,{data:{uri:e}}),o=(0,be.s)(),c=(0,ie.t)(n),l=new Date(t),u=d.Ru.formatDate(l,{weekday:"short"}),p=d.Ru.formatDate(l,{hour:"numeric",minute:"numeric"}),m=d.Ru.formatDate(l,{day:"numeric"}),h=d.Ru.formatDate(l,{month:"short"}),y=(0,r.useMemo)((()=>n.localConcertFactory({uri:e})),[e,n]),f=(0,r.useMemo)((()=>n.interestedButtonFactory({uri:e})),[e,n]);return(0,g.jsx)("div",{ref:c,children:(0,g.jsx)(ss,{uri:e,title:s,saved:i,subtitle:d.Ru.get("search.concert.event",u,p,a),date:{day:m,month:h},onClick:()=>{o.logInteraction(y.hitUiNavigate({destination:e}))},onClickInterested:()=>{o.logInteraction(f.hitUiSelect())}})})},fs=({artistUri:e})=>{const{spec:t}=(0,H.r)(Vt._,{data:{uri:e??""}}),s=(0,be.s)(),a=(0,ie.t)(t),i=(0,r.useMemo)((()=>t.onTourShelfFactory({uri:e??""})),[e,t]);return(0,g.jsx)("div",{ref:a,children:(0,g.jsx)(cs,{uri:e??"",onClick:()=>{s.logInteraction(i.hitUiNavigate({destination:`${e}:concerts`}))},children:d.Ru.get("search.concerts.see-all")})})},gs=({artistUri:e,concert:t})=>(0,g.jsxs)("section",{className:Ee()(ms),children:[(0,g.jsx)("div",{className:ls,children:(0,g.jsx)("div",{className:us,children:(0,g.jsx)("div",{className:ds,children:(0,g.jsx)(z.E,{as:"h2",variant:"titleSmall",className:ps,children:d.Ru.get("search.title.concerts")})})})}),(0,g.jsx)("div",{className:hs,children:t?(0,g.jsx)(ys,{...t}):(0,g.jsx)(fs,{artistUri:e})})]});var xs=s(55362),bs=s(12737),js=s(45849),Rs=s(4355);const Cs=r.memo((function({uri:e,name:t,duration:s,album:r,artists:a,index:i,imgUrl:n,isPlayable:o,isExplicit:c,is19PlusOnly:u,requestId:p,isLyricsMatch:m,hasAssociatedVideo:h}){const{isActive:y,isPlaying:f,triggerPlay:x,togglePlay:b}=(0,xe.P)({uri:e},{featureIdentifier:"search",referrerIdentifier:"search"}),j=(0,l.NC)(Rs.QT),{spec:R}=(0,H.r)(Ve.i,{data:{position:i,reason:p??"",uri:e}}),C=(0,ft.T)(e),{isPlayable:v,isAnyArtistBanned:A}=(0,pt.g)(e,{isPlayable:o,isLocal:!1,isOutOfMarket:!1,artistUris:a?.map((e=>e.uri))}),{unBanArtists:k}=(0,lt.M)(a.map((e=>e.uri))),{badges:w,hasBadges:I}=(0,gt.b)({downloadAvailability:C,isExplicit:c,isMOGEFRestricted:u,hasAssociatedVideo:h}),P=(a||[]).map((e=>e.name)).join(d.Ru.getSeparator()),S=(0,dt.c)(),N=(0,ie.t)(R);return(0,g.jsx)(V.pZ,{value:"row",index:i,children:(0,g.jsx)("div",{ref:j?N:void 0,children:(0,g.jsx)(Me.h,{menu:(0,g.jsx)(He.P,{uri:e,artists:a,contextUri:e,albumUri:r?.uri}),children:(0,g.jsxs)(nt.w,{uri:e,contextUri:e,index:i,ariaRowIndex:i,onTriggerPlay:(e,t)=>{x({loggingParams:t})},isActive:y,isPlayable:v,isAnyArtistBanned:A,handleArtistBanUndoClick:k,ageRestricted:u,dragMetadata:{name:t,createdBy:P},spec:R,children:[(0,g.jsxs)(st.U,{ariaColIndex:0,children:[(0,g.jsx)(js.u,{uri:e,src:n,onClick:(e,t)=>{b({loggingParams:t})},isLocked:!1,isPlaying:f,isActive:y,playAriaLabel:d.Ru.get("tracklist.a11y.play",t,P),spec:R}),(0,g.jsxs)(Qe.l,{children:[(0,g.jsx)(We.R,{enabled:S,uri:e,className:xt.A.rowTitle,children:(0,g.jsx)(it.p,{titleText:t,children:t})}),I&&(0,g.jsxs)(Ze.P,{children:[w.download&&(0,g.jsx)(mt._,{}),w.explicit&&(0,g.jsx)(ht.g,{}),w.nineteen&&(0,g.jsx)(yt.q,{className:xt.A.nineteen,size:16}),w.hasAssociatedVideo&&(0,g.jsx)(ot.l,{})]}),(0,g.jsxs)(at.p,{children:[(0,g.jsx)(Ge.l,{artists:a,spec:R}),m&&(0,g.jsx)(ut.G,{})]})]})]}),(0,g.jsxs)(et.l,{ariaColIndex:1,children:[(0,g.jsx)(ct.d,{uri:e,spec:R}),(0,g.jsx)(Je.P,{duration:s.milliseconds}),(0,g.jsx)(ze.Y,{menu:(0,g.jsx)(He.P,{uri:e,artists:a,contextUri:e,albumUri:r?.uri}),label:d.Ru.get("more.label.track",t,P),spec:R})]})]})})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index)),vs=r.memo((function({tracks:e,query:t}){const s=(0,l.NC)(Te.LX5),a=(0,r.useCallback)(((e,t)=>{const r=(0,_t.g)(e.album?.images,{desiredSize:40});return(0,g.jsx)(Cs,{uri:(0,Ut.a)(e),duration:e.duration,name:e.name,album:e.album||void 0,artists:e.artists,isPlayable:e.isPlayable,isExplicit:e.isExplicit,is19PlusOnly:e.is19PlusOnly,index:t,imgUrl:r?.url||"",requestId:e.requestId,isLyricsMatch:e.isLyricsMatch,hasAssociatedVideo:e.hasAssociatedVideo&&s},e.uri)}),[s]),i=(0,r.useMemo)((()=>[Rt.$.TITLE_AND_ARTIST,Rt.$.DURATION]),[]),n=(0,r.useCallback)((e=>({uri:e.uri})),[]);return e&&(0,g.jsx)(V.pZ,{value:"search-results-tracklist",children:(0,g.jsx)(jt.S4,{ariaLabel:d.Ru.get("search.a11y.songs-search-results"),renderRow:a,rowPlaceholder:bs.qq,nrTracks:Math.min(e.length,4),tracks:e,resolveItem:n,columns:i},t)})}),((e,t)=>e.tracks===t.tracks)),As="qTGjBrDb0ehi3T31ixUg",ks="UypXfD8vtkwoy6Hvjxh6",ws="k1hAaTegqCFmfemVkI4k",Is="hkyAoNduIpi1yzoJT7Yg",Ps="sQqi2VrhnxcFciXdvgjL",Ss="ib6ClWIXW5DmWXaC0W08",Ns="nTbpvWKW0gZOhU4sejUH",Es=({tracks:e,query:t,className:s,showSeeAll:a=!0,spec:i})=>{const n=(0,be.s)(),o=(0,r.useCallback)((()=>(0,g.jsx)("div",{className:Ns,children:(0,g.jsx)(r.Suspense,{fallback:null,children:(0,g.jsx)(vs,{tracks:e.items,query:t})})})),[t,e]),c=`spotify:app:search:${encodeURIComponent(t)}:tracks`,l=(0,r.useCallback)((()=>{const e=i.headerFactory().titleFactory().hitUiNavigate({destination:c});n.logInteraction(e)}),[n,i,c]),u=(0,r.useCallback)((()=>{const e=i.headerFactory().seeAllFactory().hitUiNavigate({destination:c});n.logInteraction(e)}),[n,i,c]);return e.items.length?(0,g.jsxs)("section",{className:Ee()(Ss,s),"aria-label":d.Ru.get("search.title.tracks"),"data-testid":"search-tracks-result",children:[(0,g.jsx)("div",{className:As,children:e.items.length>3?(0,g.jsxs)("div",{className:Ee()(ks,ws),children:[(0,g.jsx)("div",{className:Is,children:(0,g.jsx)(z.E,{as:"h2",variant:"titleSmall",children:a?(0,g.jsx)(wt.N,{to:c,className:Ps,onClick:l,children:d.Ru.get("search.title.tracks")}):(0,g.jsx)("span",{className:Ps,children:d.Ru.get("search.title.tracks")})})}),a&&(0,g.jsx)(xs.h,{link:c,onClick:u})]}):(0,g.jsx)(z.E,{as:"h2",variant:"titleSmall",className:Ps,children:d.Ru.get("search.title.tracks")})}),(0,g.jsx)(F.r,{spec:i,children:(0,g.jsx)(Fe.E,{render:o})})]}):null},Us=({topRecommendations:e,query:t,className:s,onAddToHistory:r,position:a,showSeeAll:i})=>{const n=e.totalCount||0;return(0,g.jsx)(C.p,{index:a,id:"top-recommendations",className:s,total:n,title:d.Ru.get("artist-page.featuring",e.artistName),seeAllUri:`spotify:app:search:${encodeURIComponent(t)}:topRecommendations`,showSeeAll:i,children:e.items.map(((e,t)=>(0,g.jsx)(V.pZ,{index:t,value:"top-recommendations",children:(0,g.jsx)(we.Q,{onClick:()=>r(e),entity:e,index:t})},e.uri)))})};var _s=s(60122);const Ts="vKsgiy0W3aHYmZUlwHoQ",qs="w2O3N2xilgVcd4ep6cQL",Fs="T2cpdJTvNpOFPvN4WJM4",Os="u372KlVrkMz1ZpJ89LMG",Ls="DIYNtp69Gd1l3eaBT3Bg",Bs="cXdpTaiu9PEfynRcDKrU",Ds="yZ3EPSfU0nkNoCu19iPL",Vs="OtEFcRGkMfUXBZC2HF5M",Ms=({topResults:e,onAddToHistory:t})=>{const[s]=e.items;return s&&(0,g.jsx)(_s.$,{total:1,className:Ts,title:d.Ru.get("search.title.top-result"),withEncoreCards:!1,children:[(0,g.jsx)("div",{"aria-live":"polite","data-testid":"top-result-card",className:qs,children:(0,g.jsx)(V.pZ,{value:"top-result-card",children:(0,g.jsx)(we.Q,{isHero:!0,index:0,onClick:()=>t(s),entity:s})})},"top-result-item")]})};var Hs=s(86317);const Ws=e=>e?.type===Hs.c.ARTIST,$s=({results:e})=>{const{query:t,onAddToHistory:s,serpId:a}=re(),i=(0,J.Ru)(t).toURI(),{spec:n,UBIFragment:o}=(0,H.r)(Bt.P,{data:{uri:i,reason:a}}),c=e.topResults.items.length>0,l=e.tracks.items.length>0,u=e.topRecommendations.items.length>0,[d]=e.topResults.items??[],p=Ws(d)?(e=>{const[t]=e??[];if(t&&"uri"in(t.data??{}))return{uri:t.data.uri,date:t.data.startDateIsoString,title:t.data.location.city,subtitle:t.data.location.name,saved:t.data.saved}})(d.localConcerts?.items):void 0,m=Ws(d)&&(d.hasConcerts||!!p),h=(0,r.useMemo)((()=>({topResult:n.topResultFactory(),trackList:n.trackListFactory(),shelves:n.shelvesFactory()})),[n]);return(0,g.jsx)(Fe.E,{className:Fs,rowGap:Lt.WG,colGap:Lt.CJ,testId:"search-results",render:({columnCount:r})=>{let a,i;return c?a=r>3?Ls:Bs:u&&(r>5&&l?(a=Os,i=Ds):(a=Bs,i=Vs)),(0,g.jsxs)(V.pZ,{value:"search-results",children:[c&&(0,g.jsx)(o,{spec:h.topResult,children:(0,g.jsx)(Ms,{topResults:e.topResults,onAddToHistory:s})}),(0,g.jsxs)("section",{className:a,children:[m&&(0,g.jsx)(gs,{artistUri:d.uri,concert:p}),l&&(0,g.jsx)(Es,{spec:h.trackList,query:t,tracks:m?{totalCount:3,items:e.tracks.items.slice(0,3)}:e.tracks,onAddToHistory:s,showSeeAll:!1})]}),u&&(0,g.jsx)(o,{spec:h.shelves,children:(0,g.jsx)(Us,{position:0,query:t,className:i,topRecommendations:e.topRecommendations,onAddToHistory:s,showSeeAll:!1})}),Q.ud.map(((r,a)=>(0,g.jsx)(o,{spec:h.shelves,children:(0,g.jsx)(Ie,{position:a+1,category:r,title:Q.j7[r](),query:t,results:e[r],onAddToHistory:s,showSeeAll:!1})},`search-shelf-${r}`)))]})}})},Gs=({results:e,hasResults:t})=>{const{query:s,serpId:r}=re(),a=(0,J.Ru)(s).toURI(),i=!(0,ae.n)(),{spec:n,UBIFragment:o}=(0,H.r)(Bt.P,{data:{uri:a,reason:r}});return i?(0,g.jsx)(ue,{}):e?e&&!t?(0,g.jsx)(o,{spec:n.emptyResultsFactory(),children:(0,g.jsx)(ue,{})}):(0,g.jsx)($s,{results:e}):null},Zs=new N.l("searchDesktop","query","bd8eb4cb57ae6deeac1a7d2ebe8487b65d52e0b69387a2b51590c2471f5fd57e",null);function Js(e){return e.map((e=>e.url?{url:e.url,width:Number(e.width)||56,height:Number(e.height)||56}:e))}var Ys=s(8891),Qs=s(44099),Xs=s(45485);function zs(e,t){if("PreRelease"!==e.data?.__typename)return null;const s=e.data.preReleaseContent;if(!s)return null;const r=(0,Qs.mp)(e.data.releaseDate),a=s.artists.items.map((e=>"Artist"===e.data.__typename?{type:Hs.c.ARTIST,name:e.data.profile.name,uri:e.data.uri}:null)).filter(Xs.P);return{type:Hs.c.PRE_RELEASE_ALBUM,name:s.name||"",uri:e.data.uri,images:Js(s.coverArt?.sources||[]),release:r,releaseTimezone:e.data.timezone,artists:a,color:(0,Ys.m)(s.coverArt?.extractedColors),requestId:t}}function Ks(e,t){return{items:(e?.items||[]).map((e=>{const{__typename:s}=e;switch(s){case"AlbumResponseWrapper":return er(e,t);case"PreReleaseResponseWrapper":return zs(e,t);case"UnknownTypeWrapper":return null;default:return(0,w.k)(s),null}})).filter(Xs.P),totalCount:e?.totalCount||0}}function er(e,t){if("Album"!==e.data.__typename)return null;const s=e.data;return{type:Hs.c.ALBUM,name:s.name,uri:s.uri,images:Js(s.coverArt?.sources||[]),artists:s.artists.items.map((e=>({type:Hs.c.ARTIST,name:e.profile.name,uri:e.uri}))),year:s.date?.year,requestId:t,color:(0,Ys.m)(e.data.coverArt?.extractedColors),isPlayable:e.data.playability.playable,playabilityReason:e.data.playability.reason}}const tr=new N.l("searchAlbums","query","de1046fc459b96b661b2f4e4d821118a9fbe4b563084bf5994e89ce34acc10c0",null),sr=(e,t)=>{const s="object"==typeof e?.requestIds?e?.requestIds:void 0,r=s?.[t],a="object"==typeof r?r:void 0;return"string"==typeof a?.["search-api"]?a?.["search-api"]:void 0},rr=e=>sr(e,"/searchV2"),ar=e=>sr(e,"/searchV2/topResultsV2"),ir=(e,t)=>({...e,pagingInfo:t});function nr(e,t){return{items:or(e?.items||[],t),totalCount:e?.totalCount||0}}function or(e,t){return e.map((e=>cr(e,t))).filter(Xs.P)}function cr(e,t){if("Artist"!==e.data?.__typename)return null;const s=e.data;return{type:Hs.c.ARTIST,name:s.profile.name,images:Js(s.visuals?.avatarImage?.sources||[]),uri:s.uri,verified:s.profile.verified||!1,requestId:t,hasConcerts:s.hasConcerts??!1,localConcerts:s.localConcerts,color:(0,Ys.m)(s.visuals.avatarImage?.extractedColors)}}const lr=new N.l("searchArtists","query","0e6f9020a66fe15b93b3bb5c7e6484d1d8cb3775963996eaede72bac4d97e909",null);function ur(e,t){return{items:dr(e?.items||[],t),totalCount:e?.totalCount}}function dr(e,t){return e.map((e=>pr(e,t))).filter(Xs.P)}function pr(e,t){if("Audiobook"!==e.data?.__typename)return null;const s=e.data;let r=null;return s.isPreRelease&&s.preReleaseEndDateTime?r=new Date(s.preReleaseEndDateTime?.isoString):s.publishDate&&(r=new Date(s.publishDate.isoString)),{type:Hs.c.AUDIOBOOK,uri:s.uri,name:s.name,images:Js(s.coverArt?.sources||[]),authorName:s.authors?.[0]?.name??"",topics:s.topics.items||[],publishDate:r,requestId:t,color:(0,Ys.m)(s.coverArt?.extractedColors),signifierText:s.accessInfo?.signifier?.text??void 0,isPreRelease:!!s.isPreRelease}}const mr=new N.l("searchAudiobooks","query","82ec16373818a73b4d7323c076e4f5d550ec3b0e5e2650d4715ca011dfa775fe",null);var hr=s(61903),yr=s(64905),fr=s(33023),gr=s(76015);const xr={type:Hs.c.SHOW,uri:"",name:"",publisher:"",images:[],mediaType:gr.Q.UNKNOWN};function br(e,t){return{items:jr(e?.items||[],t),totalCount:e?.totalCount||0}}function jr(e,t){return e.map((e=>Rr(e,t))).filter(Xs.P)}function Rr(e,t){if("Episode"!==e.data?.__typename)return null;const s=e.data,r=s.podcastV2.data;let a=xr;return"Podcast"===r.__typename&&(a={type:Hs.c.SHOW,uri:r.uri,name:r.name,publisher:r.publisher?.name||"",mediaType:(0,fr.w)(r.mediaType),images:Js(r.coverArt?.sources||[])}),{type:Hs.c.EPISODE,name:s.name,images:Js(s.coverArt?.sources||[]),uri:s.uri,duration:{milliseconds:s.duration.totalMilliseconds},isExplicit:s.contentRating?.label===hr.x7.Explicit,release:(0,Qs.mp)(s.releaseDate),description:s.description||"",playedState:(0,yr.fS)(s.duration,s.playedState),is19PlusOnly:s.contentRating?.label===hr.x7.NineteenPlus,show:a,requestId:t,color:(0,Ys.m)(s.coverArt?.extractedColors),mediaType:s.mediaTypes??[],podcastSubscription:(0,yr.Wx)(s.restrictions,s.playability)}}const Cr=new N.l("searchEpisodes","query","6c94e7db591c68ff6244234e1b2378b3eb6a1f5c1999b711a7bd12b9708f6322",null);const vr=new N.l("searchFullEpisodes","query","22e377f7b7c40e7ee0aa57dcb6d27120e524bb7dc14271101abed22aded60f8e",null);var Ar=s(42428);const kr={...xr,description:"",htmlDescription:"",coverArt:[],trailer:null,topics:[],podcastType:"UNKNOWN",showTypes:[],publisherName:"",consumptionOrder:"recent",nextBestEpisode:void 0,gatedContentAccessReason:void 0,isLocked:!1};function wr(e,t){return e.map((e=>function(e,t){if("Episode"!==e.data?.__typename)return null;let s=kr;"Podcast"===e.data.podcastV2.data.__typename&&(s=(0,Ar._v)(e.data.podcastV2.data));return{requestId:t,episode:(0,Ar.S)(e.data),show:s}}(e,t))).filter(Xs.P)}async function Ir(e,t){const s=await e(vr,t),r=s?.data?.searchV2?.episodes;return r?function(e,t){return{items:wr(e?.items||[],t),totalCount:e?.totalCount||0}}(r,rr(s?.extensions)):null}function Pr(e,t){return{items:Sr(e?.items||[],t),totalCount:e?.totalCount||0}}function Sr(e,t){return e.map((e=>Nr(e,t))).filter(Xs.P)}function Nr(e,t){if("Genre"!==e.data?.__typename)return null;const s=e.data,r=(0,J.o_)(s.uri);return{type:Hs.c.GENRE,name:s.name,uri:r?s.uri:`spotify:genre:${s.uri}`,images:Js(s.image?.sources||[]),requestId:t,color:(0,Ys.m)(s.image?.extractedColors)}}const Er=new N.l("searchGenres","query","9e1c0e056c46239dd1956ea915b988913c87c04ce3dadccdb537774490266f46",null);const Ur={type:Hs.c.USER,uri:"",displayName:"",username:"",images:[]};function _r(e,t){return{items:Tr(e?.items||[],t),totalCount:e?.totalCount||0}}function Tr(e,t){return e.map((e=>qr(e,t))).filter(Xs.P)}function qr(e,t){if("Playlist"!==e.data?.__typename)return null;const s=e.data;let r=Ur;if("User"===s.ownerV2?.data.__typename){const e=s.ownerV2?.data;r={type:Hs.c.USER,uri:e.uri||"",displayName:e.name||"",username:e.username||"",images:Js(e.avatar?.sources||[])}}return{type:Hs.c.PLAYLIST,uri:s.uri,name:s.name,images:Js(s.images?.items.flatMap((e=>e.sources))||[]),owner:r,requestId:t,formatListData:{type:s.format??"",attributes:(a=s.attributes??[],a.reduce(((e,t)=>(e[t.key]=t.value,e)),{}))},color:(0,Ys.m)(s.images.items[0]?.extractedColors)};var a}const Fr=new N.l("searchPlaylists","query","fc3a690182167dbad20ac7a03f842b97be4e9737710600874cb903f30112ad58",null);function Or(e,t){return{items:Lr(e?.items||[],t),totalCount:e?.totalCount||0}}function Lr(e,t){return e.map((e=>Br(e,t))).filter(Xs.P)}function Br(e,t){if("Podcast"!==e.data?.__typename)return null;const s=e.data;return{type:Hs.c.SHOW,uri:s.uri,name:s.name,images:Js(s.coverArt?.sources||[]),publisher:s.publisher?.name||"",topics:s.topics.items||[],requestId:t,color:(0,Ys.m)(s.coverArt?.extractedColors)}}const Dr=new N.l("searchPodcasts","query","cbd33edc7a612454640d753caff6fb1074a7868843612d257dcef5e71e837dd9",null);function Vr(e,t){return{items:Mr(e,t),totalCount:e?.totalCount||0}}function Mr(e,t){return e?.items.map((({item:e,matchedFields:s})=>Hr(e,s,t))).filter(Xs.P)||[]}function Hr(e,t,s){if("Track"!==e.data?.__typename)return null;const r=e.data,a=r.albumOfTrack,i=!!r.associations&&r.associations.associatedVideos.totalCount>0;return{type:Hs.c.TRACK,uri:r.uri,name:r.name,isPlayable:r.playability.playable,album:{type:Hs.c.ALBUM,uri:a?.uri||"",name:a?.name||"",images:Js(a?.coverArt?.sources||[])},artists:r.artists.items.map((e=>({type:Hs.c.ARTIST,name:e.profile.name,uri:e.uri}))),duration:{milliseconds:r.duration.totalMilliseconds},hasAssociatedVideo:i,isExplicit:"EXPLICIT"===r.contentRating?.label,is19PlusOnly:"NINETEEN_PLUS"===r.contentRating?.label,requestId:s,isLyricsMatch:!!t?.includes(hr.tC.Lyrics),color:(0,Ys.m)(a?.coverArt?.extractedColors)}}function Wr(e,t){return{items:$r(e?.items||[],t),totalCount:e?.totalCount||0}}function $r(e,t){return e.map((e=>Gr(e,t))).filter(Xs.P)}function Gr(e,t){if("User"!==e.data?.__typename)return null;const s=e.data;return{type:Hs.c.USER,uri:s.uri,name:s.displayName||s.username,images:Js(s.avatar?.sources??[]),requestId:t,color:(0,Ys.m)(s.avatar?.extractedColors)}}var Zr=s(5627);function Jr(e,t){const s=e?.itemsV2??[],r=s.map((({item:e,matchedFields:s})=>{const{__typename:r}=e;switch(r){case"AlbumResponseWrapper":return er(e,t);case"ArtistResponseWrapper":return cr(e,t);case"AudiobookResponseWrapper":return pr(e,t);case"EpisodeResponseWrapper":return Rr(e,t);case"GenreResponseWrapper":return Nr(e,t);case"PlaylistResponseWrapper":return qr(e,t);case"PodcastResponseWrapper":return Br(e,t);case"TrackResponseWrapper":return Hr(e,s,t);case"UserResponseWrapper":return Gr(e,t);case"PreReleaseResponseWrapper":return zs(e,t);case"UnknownTypeWrapper":return null;default:return(0,w.k)(r),null}})).filter(Xs.P);return{totalCount:s.length,items:r}}function Yr(e,t){const s=e?.featured||[];return{artistName:s.length?Qr(e):"",items:s?.map((e=>qr(e,t))).filter(Xs.P)||[],totalCount:s.length||0}}function Qr(e){const t=(0,Zr.no)(e,"itemsV2",[]);try{const e=(0,Zr.Jt)(t.map((({item:e})=>e)).filter(Boolean),"0.data");return e?.profile?.name||""}catch{return""}}const Xr=new N.l("searchTopResultsOnly","query","78812b1fcb6fbc7db68d2c226588ebe805763e229a159e4c45fd1c8bab25a89b",null);const zr=new N.l("searchTracks","query","5307479c18ff24aa1bd70691fdb0e77734bede8cce3bd7d43b6ff7314f52a6b8",null);const Kr=new N.l("searchUsers","query","d3f7547835dc86a4fdf3997e0f79314e7580eaf4aaf2f4cb1e71e189c5dfcb1f",null);const ea={items:[],totalCount:0,pagingInfo:{nextOffset:null}},ta={albums:{items:[],totalCount:0},artists:{items:[],totalCount:0},episodes:{items:[],totalCount:0},genres:{items:[],totalCount:0},playlists:{items:[],totalCount:0},podcasts:{items:[],totalCount:0},audiobooks:{items:[],totalCount:0},topResults:{items:[]},tracks:{items:[],totalCount:0},users:{items:[],totalCount:0},topRecommendations:{artistName:"",items:[],totalCount:0},chipOrder:{items:[]}};class sa{constructor(e){this._request=e}async getSearchResults(e,t=!0,s=0,r=10,a=5,i=!1,n=!1,o=!1){const c={searchTerm:e,offset:s,limit:r,numberOfTopResults:a,includeAudiobooks:t,includeArtistHasConcertsField:i,includePreReleases:n,includeLocalConcertsField:o},l=await this._request(Zs,c),u=l?.data?.searchV2;if(!u)return ta;const d=rr(l?.extensions),p=ar(l?.extensions);return{albums:Ks(u.albumsV2,d),artists:nr(u.artists,d),episodes:br(u.episodes,d),genres:Pr(u.genres,d),playlists:_r(u.playlists,d),podcasts:Or(u.podcasts,d),audiobooks:ur(u.audiobooks??null,d),tracks:Vr(u.tracksV2,d),users:Wr(u.users,d),topResults:Jr(u.topResultsV2,p),topRecommendations:Yr(u.topResultsV2,p),chipOrder:u.chipOrder}}async getSearchCategoryResults(e,t,s=!1,r=!1,a=0,i=25,n=20){const o={searchTerm:e,offset:a,limit:i,numberOfTopResults:n,includeAudiobooks:s,includePreReleases:r};let c=null;switch(t){case"albums":c=await async function(e,t){const s=await e(tr,t),r=s?.data?.searchV2?.albumsV2;return r?ir(Ks(r,rr(s?.extensions)),r.pagingInfo):null}(this._request,o);break;case"artists":c=await async function(e,t){const s=await e(lr,t),r=s?.data?.searchV2?.artists;return r?ir(nr(r,rr(s?.extensions)),r.pagingInfo):null}(this._request,o);break;case"episodes":c=await async function(e,t){const s=await e(Cr,t),r=s?.data?.searchV2?.episodes;return r?ir(br(r,rr(s?.extensions)),r.pagingInfo):null}(this._request,o);break;case"genres":c=await async function(e,t){const s=await e(Er,t),r=s?.data?.searchV2?.genres;return r?ir(Pr(r,rr(s?.extensions)),r.pagingInfo):null}(this._request,o);break;case"playlists":c=await async function(e,t){const s=await e(Fr,t),r=s?.data?.searchV2?.playlists;return r?ir(_r(r,rr(s?.extensions)),r.pagingInfo):null}(this._request,o);break;case"podcasts":c=await async function(e,t){const s=await e(Dr,t),r=s?.data?.searchV2?.podcasts;return r?ir(Or(r,rr(s?.extensions)),r.pagingInfo):null}(this._request,o);break;case"audiobooks":c=await async function(e,t){const s=await e(mr,t),r=s?.data?.searchV2?.audiobooks;return r?ir(ur(r,rr(s?.extensions)),r.pagingInfo):null}(this._request,o);break;case"tracks":c=await async function(e,t){const s=await e(zr,t),r=s?.data?.searchV2?.tracksV2;return r?ir(Vr(r,rr(s?.extensions)),r.pagingInfo):null}(this._request,o);break;case"users":c=await async function(e,t){const s=await e(Kr,t),r=s?.data?.searchV2?.users;return r?ir(Wr(r,rr(s?.extensions)),r.pagingInfo):null}(this._request,o);break;case"topResults":c=await async function(e,t){const s=await e(Xr,t),r=s?.data?.searchV2?.topResultsV2;return r?Jr(r,ar(s?.extensions)):null}(this._request,o);break;case"podcastAndEpisodes":c=await Ir(this._request,o);break;default:(0,w.k)(t)}return c||ea}async getFullEpisodes(e,t=0,s=25){const r={searchTerm:e,offset:t,limit:s};return await Ir(this._request,r)||ea}}var ra=s(93353),aa=s(44518),ia=s(55511),na=s(65149),oa=s(98957);const ca={[hr.pb.Podcasts]:["podcasts","podcastAndEpisodes"],[hr.pb.Episodes]:["episodes","podcastAndEpisodes"],[hr.pb.TopResults]:["topResults","topResults"],[hr.pb.Artists]:["artists","artists"],[hr.pb.Albums]:["albums","albums"],[hr.pb.Playlists]:["playlists","playlists"],[hr.pb.Tracks]:["tracks","tracks"],[hr.pb.Audiobooks]:["audiobooks","audiobooks"],[hr.pb.Genres]:["genres","genres"],[hr.pb.Users]:["users","users"]};var la=s(74864),ua=s(47234),da=s(93409),pa=s(90112);const ma="kMLumUDiP1DgYtLABkVO",ha=({results:e,hasResults:t})=>{const s=(0,h.A)(),{isBrowser:a}=(0,i.d4)((e=>e.platform)),o=(0,i.d4)(ua.JJ),c=(0,Jt.V)(),d=(0,f.vh)(),{version:p}=(0,f.mv)(),{category:x}=re(),R=((e,t,s)=>{const r=e?.chipOrder?.items??[];return Array.from(r.reduce(((r,a)=>{if(!a.typeName)return r;if(!s&&a.typeName===hr.pb.TopResults)return r;const[i,n]=ca[a.typeName];return n&&i&&(t===n||e?.[i]?.items?.length)?(r.add(n),r):r}),new Set([])))})(e,x,!1),C="podcasts"!==x&&"episodes"!==x,v=(e=>{if(!e)return!1;const[t]=e.topResults.items;return Boolean(t&&t.type===Hs.c.TRACK)})(e),A=(0,l.NC)(Te.ijb);return(0,r.useEffect)((()=>{a||e&&t&&(({eventSender:e,country:t,isAnonymous:s,context:r,variant:a})=>{const i={category:"internal-search-test",action:"search-results-page-visit",variant:a,label:"desktop-app",context:r,os:(0,na.f)(),country:t,spt:(0,oa.v8)("sp_t")};s?e.send((0,ia.r)(i)):e.send((0,aa._)(i))})({eventSender:d,country:o,isAnonymous:c,context:JSON.stringify({top_result_is_track:v,version:p}),variant:A})}),[o,d,t,c,a,e,v,A,p]),(0,g.jsxs)(V.pZ,{value:"search-page",children:[!s&&(0,g.jsx)(m.g,{children:(0,g.jsx)(Ot.o,{isSearchChipsEnabled:!0})}),(0,g.jsx)(Et,{searchCategories:R,selectedCategory:x,displayChips:C}),(0,g.jsx)("div",{className:"contentSpacing",id:"searchPage",children:(0,g.jsx)(Fe.E,{className:ma,render:()=>(0,g.jsxs)(n.BV,{children:[(0,g.jsx)(n.qh,{path:"/",element:(0,g.jsx)(y.e,{pageId:u.$h.FIND,entityUri:"spotify:app:search",children:(0,g.jsx)($,{})})}),(0,g.jsx)(n.qh,{path:":query",element:(0,g.jsx)(j,{children:(0,g.jsx)(Gs,{results:e,hasResults:t})})}),(0,g.jsx)(n.qh,{path:":query/:category",element:(0,g.jsx)(b,{children:(0,g.jsx)(Ft,{results:e,displayChips:C})})})]})})})]})};const ya=r.memo((function(){const e=(0,a.jE)(),t=(0,l.NC)(Te.KvH),s=(0,l.NC)(Te.Lh5),i=(0,l.NC)(Te.Jl4),n=!(0,ae.n)(),[{category:o,query:u},m]=(0,ra.o)();(0,la.m)("search");const[h,y]=(0,r.useState)({results:null,queryForResults:u??""}),f=h.results,x=function(e){return null!==e&&void 0!==Object.keys(e).find((t=>"chipOrder"!==t&&e[t].items.length>0))}(f),b=(0,r.useMemo)((()=>new sa((0,pa.lY)(da.n.getInstance()))),[]),{searchHistory:j,setSearchHistory:R}=(0,D.k)(),C=(0,r.useCallback)((e=>{R([e,...j])}),[j,R]),v=(0,r.useCallback)((async e=>{e===h.queryForResults&&x||m(e,o,!1)}),[h.queryForResults,o,x,m]);(0,r.useEffect)((()=>{if(!u)return;if(n)return void y({results:null,queryForResults:u});const r=["searchPageResults",u,{numberOfTopResults:5,isConcertsInSearchEnabled:t,isBookPrereleaseEnabled:i,isLocalConcertsInSearchEnabled:s}];e.ensureQueryData({queryKey:r,queryFn:()=>b.getSearchResults(u,!0,0,10,5,t,i,s),gcTime:9e5,staleTime:9e5}).then((e=>{y({results:e,queryForResults:u})}))}),[b,i,t,s,n,u,e]),(0,r.useEffect)((()=>{u||y({results:null,queryForResults:""})}),[u]);const A=(0,r.useMemo)((()=>c().create().toString()),[o,h.queryForResults]),k=(0,r.useMemo)((()=>({api:b,category:o,query:h.queryForResults,onAddToHistory:C,onSearchRequest:v,serpId:A})),[b,o,C,v,h.queryForResults,A]);return(0,g.jsxs)(se,{value:k,children:[(0,g.jsx)(p.Q,{children:d.Ru.get("search.page-title")}),(0,g.jsx)(ha,{results:f,hasResults:x})]})}))},21466:(e,t,s)=>{s.d(t,{a:()=>r});const r=e=>e?.linked_from?.uri||e.uri}}]);
//# sourceMappingURL=xpui-routes-search.js.map