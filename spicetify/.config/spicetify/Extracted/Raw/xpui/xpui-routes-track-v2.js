"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6863],{21106:(e,a,s)=>{s.d(a,{R:()=>r});var i=s(91360),t=s(86070);const r=({uri:e,enabled:a,className:s,children:r,onClick:l})=>a?(0,t.jsx)(i.N,{to:e,className:s,onClick:l,children:r}):(0,t.jsx)(t.Fragment,{children:r})},45849:(e,a,s)=>{s.d(a,{u:()=>y});var i=s(97500),t=s.n(i),r=s(11892),l=s(70462),n=s(58571),c=s(45292),o=s(6309),d=s(4139),u=s(63089),m=s(86070);const y=({uri:e,src:a,playAriaLabel:s,onClick:i,isPlaying:y,isActive:p,isLocked:h,isEpisode:g,isVideo:x,spec:b})=>{const v=(0,c.W)(),j=(0,d.s)(),k=(0,r.YQ)((a=>{let s;if(v({type:"click",intent:y?"pause":"play"}),b){const a=b.playbackButtonFactory();let i;i=p&&y?a.hitPause({itemToBePaused:e}):p&&!y?a.hitResume({itemToBeResumed:e}):a.hitPlay({itemToBePlayed:e}),s=j.logInteraction(i)}i(a,s)}),o.d,{leading:!0,trailing:!1});return(0,m.jsxs)("div",{className:u.A.rowImageWithPlay,children:[(0,m.jsx)(n.e,{src:a,isEpisode:g,isVideo:x}),(0,m.jsx)(l.x,{className:t()(u.A.rowPlayPauseButton,u.A.rowImagePlayPauseButton),iconClassName:u.A.rowPlayPauseIcon,onClick:k,isPlaying:y,isLocked:h,playAriaLabel:s})]})}},15230:(e,a,s)=>{s.r(a),s.d(a,{default:()=>xi});var i=s(30758),t=s(97500),r=s.n(t),l=s(77),n=s(15231),c=s(89539),o=s(45237),d=s(38529),u=s(59677),m=s(41331),y=s(93720),p=s(36450),h=s(62462),g=s(59092),x=s(36041),b=s(16373),v=s(99168),j=s(90436),k=s(87188),R=s(27275),L=s(39733),f=s(98812),A=s(19019),C=s(37678),I=s(66309);const N=()=>(0,C.oC)(I.P.SimilarAlbumsAbove,(0,l.zy)()),w=()=>(0,C.oC)(I.P.SimilarAlbumsBelow,(0,l.zy)()),P=()=>{const e=N(),a=(()=>{const e=(0,f.c)(),a=(0,L.NC)(A.Hp0);return!!e&&a===A.WPI.Above})();return!w()&&(e||a)},T=()=>{const e=w(),a=(()=>{const e=(0,f.c)(),a=(0,L.NC)(A.Hp0);return!!e&&a===A.WPI.Below})();return!N()&&(e||a)};var U=s(38681),E=s(21560),S=s(96266),B=s(61869);const _=new S.l("internalLinkRecommenderTrack","query","eda0a1e9140af4114340bf3098980172dfd1003b65cfc980c36ab238dbfcef84",null);var F=s(21106),M=s(57103),O=s(73689),D=s(69197),V=s(45849),q=s(65647),z=s(62385),G=s(3393),Z=s(33589),$=s(23885),W=s(31845),H=s(78089),X=s(77131),Y=s(68732),Q=s(3068),J=s(8398),K=s(68702),ee=s(30023),ae=s(44817),se=s(98913),ie=s(78330),te=s(65312),re=s(98882),le=s(42668);const ne="Z9Dr8PkXFtlO8KnnDcxp",ce="Bm0LUMlhVIcF5qusgdUP",oe="GIyB7JDkRwjtVL6PSBbg",de="whTIka0YYAkqhqrs26Wa";var ue=s(86070);const me=i.memo((function({uri:e,name:a,imgUrl:s,artists:i,isExplicit:t,index:r,albumUri:l,contextUri:n,isPlayable:c,isMOGEFRestricted:o,totalMilliseconds:d,playcount:u}){const{isActive:h,isPlaying:g,triggerPlay:x,togglePlay:b}=(0,re.P)({uri:e},{featureIdentifier:"ilr"}),v=(0,te.T)(e),{isPlayable:j,isAnyArtistBanned:k}=(0,K.g)(e,{isPlayable:c,isLocal:!1,isOutOfMarket:!1,artistUris:i.map((e=>e.uri))}),{unBanArtists:R}=(0,J.M)(i.map((e=>e.uri))),L=i.map((e=>e.name)).join(m.Ru.getSeparator()),{badges:A,hasBadges:C}=(0,le.b)({isMOGEFRestricted:o,downloadAvailability:v,isExplicit:t}),I=i.map((e=>e.name)).join(m.Ru.getSeparator()),N=(0,f.c)();return(0,ue.jsx)(ie.pZ,{value:"row",index:r,children:(0,ue.jsx)(y.h,{menu:(0,ue.jsx)(p.P,{uri:e,albumUri:l,artists:i,contextUri:n}),children:(0,ue.jsxs)(Y.w,{uri:e,contextUri:n,isPlayable:j,isAnyArtistBanned:k,handleArtistBanUndoClick:R,onTriggerPlay:(e,a)=>{x({loggingParams:a})},isActive:h,index:r,ariaRowIndex:r,dragMetadata:{name:a,createdBy:L},children:[(0,ue.jsxs)($.U,{ariaColIndex:0,children:[(0,ue.jsx)(V.u,{uri:e,src:s,onClick:(e,a)=>{b({loggingParams:a})},isLocked:!1,isPlaying:g,isActive:h,playAriaLabel:m.Ru.get("tracklist.a11y.play",a,L)}),(0,ue.jsxs)(q.l,{children:[(0,ue.jsx)(F.R,{uri:e,enabled:N,className:oe,children:(0,ue.jsx)(X.p,{titleText:a,children:a})}),C&&(0,ue.jsxs)(O.P,{children:[A.download&&(0,ue.jsx)(ee._,{}),A.explicit&&(0,ue.jsx)(ae.g,{}),A.nineteen&&(0,ue.jsx)(se.q,{className:de,size:16})]}),(0,ue.jsx)(H.p,{children:(0,ue.jsx)(M.l,{artists:i})})]})]}),(0,ue.jsx)(W.o,{ariaColIndex:1,children:(0,ue.jsx)(G.Y,{playcount:u})}),(0,ue.jsxs)(Z.l,{ariaColIndex:2,children:[(0,ue.jsx)(Q.d,{uri:e}),(0,ue.jsx)(D.P,{duration:d}),(0,ue.jsx)(z.Y,{menu:(0,ue.jsx)(p.P,{uri:e,albumUri:l,contextUri:n,artists:i}),label:m.Ru.get("more.label.track",a,I)})]})]})})})}),((e,a)=>e.uri===a.uri&&e.index===a.index));var ye=s(12737),pe=s(20507),he=s(76276),ge=s(78072),xe=s(61903);const be=i.memo((function({subtitle:e,uri:a}){const{data:s}=(t={uri:a},(0,B.I)(_,t,r));var t,r;const l=s?.seoRecommendedTrack.items,o=(0,i.useMemo)((()=>l?.slice(0,Math.min(l.length,5))),[l]),d=(0,i.useCallback)((e=>({uri:"uri"in e.data?e.data.uri:""})),[]),u=(0,i.useMemo)((()=>[he.$.TITLE_AND_ARTIST,he.$.ALBUM,he.$.DURATION]),[]),y=(0,i.useCallback)(((e,s)=>{if(!(e=>{return a=e,"NotFound"!==a?.__typename&&"GenericError"!==a?.__typename&&"Track"===e.__typename;var a})(e.data))return(0,ue.jsx)(i.Fragment,{});const t=e.data;return(0,ue.jsx)(me,{index:s,contextUri:a,uri:t.uri,name:t.name,totalMilliseconds:t.duration.totalMilliseconds,imgUrl:t.albumOfTrack?.coverArt?.sources[0]?.url,isPlayable:t.playability.playable,artists:t.artists.items.map((e=>({uri:e.uri,id:e.id,name:e.profile.name}))),albumUri:t?.albumOfTrack?.uri||"",isExplicit:t.contentRating?.label===xe.x7.Explicit,isMOGEFRestricted:t.contentRating?.label===xe.x7.NineteenPlus,playcount:parseInt(t.playcount||"0",10)},`${s}-${t.uri}`)}),[a]);return l?.length?(0,ue.jsxs)("div",{className:ne,children:[(0,ue.jsxs)("div",{className:ce,children:[(0,ue.jsx)(n.E,{variant:"titleSmall",semanticColor:"textBase",children:m.Ru.get("playlist.extender.recommended.title")}),(0,ue.jsx)(n.E,{variant:"bodySmall",paddingBottom:c.CD,children:e})]}),(0,ue.jsx)(pe.S4,{ariaLabel:m.Ru.get("playlist.extender.recommended.title"),nrTracks:Math.min(l.length,5),rowPlaceholder:ye.qq,tracks:o,renderRow:y,resolveItem:d,columns:u},"internal-link-recommender-track-list")]}):null})),ve=e=>{const{entityType:a}=e;return(0,ue.jsx)(E.s,{onError:()=>{(0,ge.fE)({metric_type:U.MetricTypes.COUNTER,what:"dwp-ilr-component-error",value:1,tags:{entityType:a}})},children:(0,ue.jsx)(be,{...e})})};var je=s(91360),ke=s(7029),Re=s(13799),Le=s(49911),fe=s(54429);const Ae=({album:e,index:a,artistURI:s})=>(0,ue.jsx)(ie.pZ,{value:"card",index:a,children:(0,ue.jsx)(Le.R,{index:a,latest:!1,showType:!0,...(0,fe.m)(e,s,e.name)})});var Ce=s(60122),Ie=s(90873);const Ne=({albums:e,artistName:a,artistId:s,artistUri:i,className:t})=>e?(0,ue.jsx)(ie.pZ,{value:"shelf/albums",children:(0,ue.jsx)(Ce.$,{total:e.totalCount,title:m.Ru.get("rich-page.popular-albums-by-artist",{artist:a}),seeAllUri:`${(0,Ie.Dh)(s)}:discography:${xe._m.Album.toLowerCase()}`,seeAllLabel:m.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:t,children:(0,Ie.Ey)(e.items).map(((e,a)=>(0,ue.jsx)(Ae,{album:e,index:a,artistURI:i},e.uri)))})}):null;var we=s(98509);const Pe=({artistId:e,className:a,fansAlsoLike:s,title:i})=>(0,ue.jsx)(ie.pZ,{value:"shelf/fans-also-like",children:(0,ue.jsx)(Ce.$,{total:s.length,title:i??m.Ru.get("rich-page.fans-also-like"),seeAllUri:`${(0,Ie.Dh)(e)}:related`,className:a,children:s.map(((e,a)=>(0,ue.jsx)(ie.pZ,{value:"card",index:a,children:(0,ue.jsx)(we.a,{index:a,uri:e.uri,name:e.profile.name,images:e.visuals.avatarImage?.sources||[]})},e.uri)))})});var Te=s(37503);const Ue="ERm7dIKbVoqGwPb_lXPH",Ee=({artistName:e,artistUri:a,headerClassName:s,rowClassName:t,topTracks:r,topTracksTransformer:l,uri:c})=>{const o=(0,i.useMemo)((()=>r?.items.map((e=>l(e,c)))),[r?.items,l,c]);return o&&o.length>0?(0,ue.jsxs)("div",{className:t,children:[(0,ue.jsxs)("div",{children:[(0,ue.jsx)(n.E,{variant:"bodySmall",className:Ue,children:m.Ru.get("rich-page.popular-tracks")}),(0,ue.jsx)(n.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:s,children:e})]}),(0,ue.jsx)(Te.z,{uri:a,nrTracks:o.length,initialTracks:o})]}):null};var Se=s(52037);const Be=({artistName:e,artistId:a,artistUri:s,className:t,releases:r,artistImages:l})=>{const n=(0,i.useMemo)((()=>l?{title:e,pretitle:m.Ru.get("artist-page.popular"),media:(0,Se.h)(l,{desiredSize:48})||""}:null),[l,e]);return r?(0,ue.jsx)(ie.pZ,{value:"shelf/releases",children:(0,ue.jsx)(Ce.$,{total:10,title:m.Ru.get("rich-page.popular-releases-by-artist",{artist:e}),seeAllUri:`${(0,Ie.Dh)(a)}:discography:${xe._m.Album.toLowerCase()}`,seeAllLabel:m.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:t,...n,children:r.items.map(((e,a)=>(0,ue.jsx)(Ae,{album:e,index:a,artistURI:s},e.uri)))})}):null},_e=({artistId:e,artistName:a,artistUri:s,className:i,singles:t})=>t?(0,ue.jsx)(ie.pZ,{value:"shelf/singles-and-eps",children:(0,ue.jsx)(Ce.$,{total:t.totalCount,title:m.Ru.get("rich-page.popular-singles-and-eps-by-artist",{artist:a}),seeAllUri:`${(0,Ie.Dh)(e)}:discography:${xe._m.Single.toLowerCase()}`,seeAllLabel:m.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:i,children:(0,Ie.Ey)(t.items).map(((e,a)=>(0,ue.jsx)(Ae,{album:e,index:a,artistURI:s},e.uri)))})}):null;var Fe=s(71863),Me=s(32860),Oe=s(6488),De=s(22787),Ve=s(54159),qe=s(88296),ze=s(44295);const Ge="VdIaMy6YRQX6cN5B7OVC",Ze="LjkmarFarmUOq0nmv9iy",$e="VHigmLQwT1FxkKEbCs4H",We="qX5K6LTMIuXG1gFBXzjZ",He="fsH_X6pBkexdxtu19q5k",Xe="sDbr7RxY_jjg1XXq8zU5",Ye="MiWZGlZeQCy1tibDTql5",Qe="uci6FedOoLZEL163ZR8k",Je="GDA6ugyRoV7ZiqIyOU4d",Ke="IUBwxdZXklSkRPTZ9w_Q",ea="f7XB243E_dNMV9dkUXV6",aa="gQQC7YFmzffMUaCqbx3o",sa="QJVNM_FcLpEHhjDc_FU3",ia="Vd2oInYt1Ynz9X6KgL7o",ta="yUA20RYjsLIb7xXNRlfn",ra="MVDvKVX1aJ05U9lmHzaz",la=({richTrack:e})=>{const{search:a}=(0,l.zy)(),s=(0,i.useCallback)((()=>new URLSearchParams(a.slice(1)).get("highlight")||""),[a])(),{tracklistRef:t}=(0,ze.h)(),r=e.albumOfTrack,n=(0,qe.J)(r?.uri||""),{usePlayContextItem:c}=(0,re.P)({uri:n},{featureIdentifier:"album"}),o=(0,i.useMemo)((()=>({items:[],totalCount:0})),[]),d=(0,Ve.t)();return r?(0,ue.jsx)("div",{ref:t,className:Ye,children:(0,ue.jsx)(Oe.a,{columns:d,children:(0,ue.jsx)(De.F,{ariaLabel:r.name,nrTracks:r.tracks.totalCount,albumUri:r.uri,highlightUri:s,discs:o,usePlayContextItem:c,hasHeaderRow:!1})})}):null};var na=s(70548),ca=s(99842),oa=s(13948),da=s(2304),ua=s(27134),ma=s(39503),ya=s(31352),pa=s(85137),ha=s(58602),ga=s(3782),xa=s(45292),ba=s(11244),va=s(71115),ja=s(54003),ka=s(61535),Ra=s(78487);const La=i.memo((function({uri:e,togglePlay:a,isPlaying:s,isActive:t,spec:r,logger:l,backgroundColor:n,name:c,isPlayable:o,albumUri:d,artists:u}){const y=(0,xa.W)(),h=(0,ba.n)(),[g,x]=(0,ka.A)(e),b=(0,ha.d$)(),{spec:v,logger:j}=(0,Ra.r)(na.e,{data:{uri:e}});(0,i.useEffect)((()=>{b&&j.logImpression(v.impression())}),[b,j,v]);const k=(0,i.useCallback)((async()=>{y({targetUri:e,intent:g?"unsave":"save",type:"click"});const a=r.saveButtonFactory();l.logInteraction(g?a.hitRemoveLike({itemNoLongerLiked:e}):a.hitLike({itemToBeLiked:e})),g&&b&&j.logInteraction(v.hitAddToPlaylist({itemToBeAdded:e,playlist:ja.BP}));try{await x(!g)}catch{}}),[y,e,g,r,l,x,b,j,v]),R=(0,i.useCallback)((()=>{const i=(0,va.$I)({isPlaying:s,isActive:t,spec:r.playButtonFactory(),logger:l,uri:e});a({loggingParams:i})}),[t,s,l,r,a,e]),L=(0,i.useCallback)((()=>{l.logInteraction(r.contextButtonFactory().hitUiReveal())}),[l,r]),f=(0,ga.j)();return(0,ue.jsx)(ca.E,{backgroundColor:n,children:(0,ue.jsxs)(oa.S,{children:[(0,ue.jsx)(pa.e,{children:(0,ue.jsx)(Re.D,{onClick:R,isPlaying:s,disabled:!o,size:f,uri:e})}),(0,ue.jsx)(pa.e,{children:(0,ue.jsx)(da.M,{isAdded:g,onClick:k,disabled:!h,size:f,condensed:!0})}),(0,ue.jsx)(ua.f,{uri:e,isFollowing:g,onFollow:k,size:f,condensed:!0}),(0,ue.jsx)(ya.b,{menu:(0,ue.jsx)(p.P,{uri:e,albumUri:d,artists:u}),onShow:L,children:(0,ue.jsx)(ma.e,{label:m.Ru.get("more.label.context",c),size:f})})]})})})),fa=()=>{const e=(0,l.zy)();return(0,C.oC)(I.P.LyricsReturnsHoldout,e)},Aa=()=>{const e=(0,l.zy)();return(0,C.oC)(I.P.LyricsReturnsTreatment,e)},Ca=()=>{const e=(0,L.NC)(A.sMR),a=e===A.tuf.Control,s=e===A.tuf.Enabled,i=a||s,t=fa();return!Aa()&&(t||i)},Ia=()=>{const e=(0,L.NC)(A.oyV),a=e===A.vc0.Control,s=e===A.vc0.Enabled,i=a||s,t=Aa();return!fa()&&(t||i)},Na=()=>({lyricsReturnsHoldoutEnabled:Ca(),lyricsReturnsTreatmentEnabled:Ia()});var wa=s(32252),Pa=s(77674);const Ta="OH5mnpJIVCJozYM3raMt",Ua="etw0slM6uVrCi5RR3iDi",Ea=({padded:e,providerDisplayName:a})=>a?(0,ue.jsx)(Pa.Z,{as:"p",dir:"auto",variant:"finale",className:`${Ta} ${e?Ua:""}`,children:m.Ru.get("web-player.lyrics.providedBy",a)}):null;var Sa=s(91753);let Ba=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});const _a=(e,a)=>{switch(a.type){case"LYRICS_LOADING":return{...e,[a.uri]:{status:Ba.LOADING}};case"LYRICS_LOADED":return{...e,[a.uri]:{status:Ba.LOADED,data:a.response}};case"LYRICS_ERROR":return{...e,[a.uri]:{status:Ba.UNAVAILABLE}};default:return(0,Sa.d)(a,`Unhandled lyrics action with type: ${a.type}`)}};var Fa=s(93409),Ma=s(76629);var Oa=s(35904);const Da=async({trackUri:e,api:a,imageForLyricsRequest:s,isPlayable:i})=>{if(!i)return{hasLyrics:!1};const t=(0,u.o_)(e);try{const e=await(async(e,a,s)=>(await e.build().withHost(Ma.Hj).withPath(`/track/${encodeURIComponent(a)}/image/${encodeURIComponent(s)}`).withHeaders([{key:"App-Platform",value:"WebPlayer"}]).withQueryParameters({format:"json",vocalRemoval:!1}).withEndpointIdentifier("/track/{trackId}").send()).body)(a||Fa.n.getInstance(),t.id,s||"");return{hasLyrics:!0,syncType:e.lyrics.syncType,lyrics:e.lyrics.lines,provider:e.lyrics.provider,providerDisplayName:e.lyrics.providerDisplayName,providerLyricsId:e.lyrics.providerLyricsId,isRtlLanguage:e.lyrics.isRtlLanguage}}catch(e){if(e instanceof Oa.O&&404===e.status)return{hasLyrics:!1};throw e}},Va={status:Ba.LOADING},qa={status:Ba.UNAVAILABLE},za=i.createContext(void 0),Ga=({children:e,initialState:a={}})=>{const s=i.useReducer(_a,a);return(0,ue.jsx)(za.Provider,{value:s,children:e})},Za=({uri:e,isNotPermittedToFetchLyrics:a,imageForLyricsRequest:s,isPlayable:t})=>{const r=i.useContext(za);if(void 0===r)throw new Error("useTrackEntityLyrics must be used within a TrackEntityLyricsProvider");const[l,n]=r,c=e?l[e]:null;return(0,i.useEffect)((()=>{a||!c&&e&&(n({type:"LYRICS_LOADING",uri:e}),Da({trackUri:e,imageForLyricsRequest:s,isPlayable:t}).then((a=>{n({type:"LYRICS_LOADED",uri:e,response:a})})).catch((()=>{n({type:"LYRICS_ERROR",uri:e})})))}),[n,s,a,t,c,e]),e&&(0,u.U_)(e)&&!a&&t?c||Va:qa},$a=({uri:e,imageForLyricsRequest:a,isPlayable:s})=>{const{lyricsReturnsHoldoutEnabled:i,lyricsReturnsTreatmentEnabled:t}=Na(),r=(0,wa.l)(),l=r&&!i&&!t||r&&i&&!t,{data:n}=Za({uri:e,imageForLyricsRequest:a,isNotPermittedToFetchLyrics:l,isPlayable:s});return n?.hasLyrics?(0,ue.jsx)(Ea,{providerDisplayName:n.providerDisplayName}):null};var Wa=s(41978),Ha=s(74946);const Xa="QhDsXG1Gmo7XmQWLggAO",Ya="bZgWQj7UxvK8GYKWDA7N",Qa="AW61P3tnW5cKJCWtbhFh",Ja=({buttonText:e,onSecondaryButtonClick:a,onPrimaryButtonClick:s,secondaryButtonText:i,text:t})=>(0,ue.jsxs)("div",{className:Xa,"data-testid":"static-activation-trigger",children:[(0,ue.jsx)(n.E,{className:Ya,variant:"bodyMediumBold",children:t}),(0,ue.jsxs)("div",{className:Qa,children:[(0,ue.jsx)(o.H,{onClick:a,semanticColor:"textBase",children:i}),(0,ue.jsx)(Ha.$,{onClick:s,colorSet:"invertedLight",children:e})]})]});var Ka=s(20769),es=s(44518),as=s(45866),ss=s(65149),is=s(47234),ts=s(99559),rs=s(98957);var ls=s(57574);const ns="EaTxqhHk6J4ecKHwpY5m",cs="dUQl9yd5x_1oWk4L0Ntm",os="xt5C47eHPYNiriMJxGnC";var ds=s(44320);const us=({words:e,onObserve:a,lyricsInView:s,...t})=>{const{ref:r,inView:l}=(0,ls.Wx)({threshold:0}),c=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{s||(c.current=!1)}),[s]),(0,i.useEffect)((()=>{c.current||l&&(a({text:e,outOfView:!1}),c.current=!0)}),[l,a,e]),(0,ue.jsx)(n.E,{ref:r,as:"p",dir:"auto",variant:"bodyMedium",className:os,"data-testid":t["data-testid"],children:e})},ms="q1JbsdMqX7OImgIFWa6J",ys="hAGejMh7SncdbJ5wcfUi",ps="IaG9Zc3xGxeYjsn73RAz",hs="zgSEYVU2gMYxihFVEJPn",gs="expandable-lyrics-container";const xs=({lyrics:e,lyricsInView:a,onObserve:s,previewCount:t})=>{const[l,c]=(0,i.useState)(!1),{visibleLyrics:o,collapsibleLyrics:d}=function(e,a){let s=0,i=-1;const t=e.filter((e=>!!e.words));for(const[e,r]of t.entries())if(s+=r.words.length,s>a){i=e;break}if(i>-1)return{visibleLyrics:t.slice(0,i),collapsibleLyrics:t.slice(i)};return{visibleLyrics:t,collapsibleLyrics:[]}}(e,t),u=d.length>0,y=l?m.Ru.get("show_less"):`â€¦${m.Ru.get("show_more")}`;return(0,ue.jsxs)(ue.Fragment,{children:[o.map((({words:e},i)=>(0,ue.jsx)(us,{onObserve:s,words:e,lyricsInView:a,"data-testid":"lyrics-line-always-visible"},`lyrics-seo-line-${i}`))),(0,ue.jsx)("span",{"aria-hidden":!l,className:r()(ps,{[hs]:l}),children:d.map((({words:e},i)=>(0,ue.jsx)(us,{onObserve:l?s:()=>{},words:e,lyricsInView:l&&a},`lyrics-seo-line-${i}`)))}),u&&(0,ue.jsx)("button",{className:ms,onClick:()=>{c(!l)},"aria-controls":gs,"aria-owns":gs,"aria-label":y,children:(0,ue.jsx)(n.E,{variant:"bodyMediumBold",className:ys,children:y})})]})},bs=({data:e,eventSender:a,playbackId:s,previewCount:t,uri:r})=>{const{lyrics:l=[],provider:c,providerLyricsId:o,syncType:d}=e,{ref:u,inView:y}=(0,ls.Wx)({threshold:0}),p=function(e){const{trackUri:a,provider:s,providerLyricsId:t,syncType:r,eventSender:l,playbackId:n,isSnippet:c}=e,o=(0,i.useRef)(null),[d,u]=(0,i.useState)(!1),[m,y]=(0,i.useState)(0),[p,h]=(0,i.useState)(!1),g=(0,i.useMemo)((()=>(0,ds.W)({lyrics_format:"track-page",track_uri:a,provider:s,provider_lyrics_id:t,sync_type:r,playback_id:n,is_snippet:c})),[a,s,t,r,n,c]);return(0,i.useEffect)((()=>{u(!1),y(0),h(!1),o.current=null}),[a]),(0,i.useEffect)((()=>{d&&n&&u(!1)}),[n]),(0,i.useEffect)((()=>{d||m>=140&&p&&(l?.send(g),u(!0))}),[m,d,g,l,p]),(0,i.useCallback)((e=>{const{text:a,outOfView:s}=e;a&&a.length>1&&(y((e=>e+a.length)),d||null!==o.current||(o.current=setTimeout((()=>{h(!0)}),1500))),s&&(o.current&&clearTimeout(o.current),o.current=null,y(0))}),[y,d])}({trackUri:r,provider:c,providerLyricsId:o,syncType:d,eventSender:a,playbackId:s});return(0,i.useEffect)((()=>{y||p({outOfView:!0})}),[y,p]),(0,ue.jsxs)("div",{className:ns,ref:u,children:[(0,ue.jsx)(n.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:cs,children:m.Ru.get("web-player.lyrics.title")}),(0,ue.jsx)(xs,{lyrics:l,lyricsInView:y,onObserve:p,previewCount:t})]})};var vs=s(50416),js=s(49151),ks=s(30912);const Rs=({uri:e,imageForLyricsRequest:a,isPlayable:s})=>{const[t,r]=(0,i.useState)(420),{data:l}=Za({uri:e,imageForLyricsRequest:a,isPlayable:s}),n=(0,Ka.vh)(),{isPaused:c,currentTrackUri:o,playbackId:d}=(0,js.o)((e=>({isPaused:e?.isPaused,currentTrackUri:e?.item?.uri,playbackId:e?.playbackId})),ks.a),u=!c&&o===e,m=(0,i.useCallback)((()=>{window.innerWidth<=768?r(280):window.innerWidth>768&&280===t&&r(420)}),[t]);return(0,i.useEffect)((()=>{m()}),[m]),(0,vs.s)(m),l&&l?.hasLyrics?(0,ue.jsx)(bs,{data:l,uri:e,eventSender:n,playbackId:u?d:void 0,previewCount:t}):null},Ls=e=>{const a=(e=>{const a=(0,Ka.vh)(),s=(0,Wa.d4)(ts.F6),i=(0,Wa.d4)(is.JJ),t=(0,Wa.d4)(ts.oo),r=(0,as.V)();return()=>{if(r)return;(0,ge.fE)({metric_type:U.MetricTypes.COUNTER,what:"dwp-lyrics-component-error",value:1});const l={category:"lyrics_render_error",label:"dwp",os:(0,ss.f)(),context:JSON.stringify({uri:e,product:t}),country:s?i:"",sp_t:(0,rs.v8)("sp_t")};a.send((0,es._)(l))}})(e.uri);return(0,ue.jsx)(E.s,{onError:a,children:(0,ue.jsx)(Rs,{...e})})};var fs=s(49678),As=s(4355);const Cs=()=>{const e=(0,L.NC)(As.m2);return(0,C.oC)(I.P.DisableUnauthLyricsCTA,(0,l.zy)())||e},Is="T1nqQ4HEh3heHy4RCCKa",Ns="L8zjshPVgUMXyZR4FtOk",ws="YMn1FWcFmOz9osBrNvhF",Ps="Inbyq3TnvKDOJtcKFTDQ",Ts="lWk5se4WETUOJwaEb8D6",Us="i8DyQbWCmDV_8N5XGJQT",Es="t5WPFlGTY6GCd9UOFfLu",Ss="AGQ3wRyMVK1odq860qnT",Bs="ZX_r7uZgPgssaUplfpxT",_s="qrqctaPu2XBpxsw23nPX",Fs="XnWidTagai3nQwMPxIMF";var Ms=s(56192),Os=s(1514),Ds=s(86317),Vs=s(95481),qs=s(31836);let zs=function(e){return e.SMALL="small",e.LARGE="large",e}({});const Gs=e=>{const{disabled:a,images:s,LinkComponent:i,name:t,size:n,uri:c,enableI18nRoutes:o,enableI18nAdditionalPages:d}=e,y=n===zs.SMALL,p=(0,l.Zp)(),h=(0,u.o_)(c),g=h?.type,x=m.Ru.getLocaleForURLPath(),b=(0,Vs.p)({localeFeatureFlag:o,entityFeatureFlag:d,urlLocale:x,entity:g,type:"link"});return(0,ue.jsxs)("div",{className:r()(Ns,{[ws]:a}),"data-testid":"track-artist-link-card",children:[(0,ue.jsx)(Ms.b,{shape:Ms.u.CIRCLE,images:s,size:Os.Qe.SIZE_80,title:t,type:Ds.c.ARTIST}),(0,ue.jsxs)("div",{className:r()(Ts,{[Us]:y}),children:[(0,ue.jsx)(Pa.Z,{variant:"mestoBold",className:Ps,children:m.Ru.get("card.tag.artist")}),(0,ue.jsx)(i,{to:c,children:(0,ue.jsx)(Pa.Z,{as:"div",dir:"ltr",className:Es,variant:"balladBold",children:t})})]}),(0,ue.jsx)("div",{onClick:()=>{const e=h?.toURL(`/${qs.CT}${x}/`);if(h){const a=b?e:h.toURLPath(!0);p(a)}},className:Ss})]})},Zs=({size:e=zs.LARGE,disabled:a=!1,enableI18nRoutes:s,enableI18nAdditionalPages:t,...l})=>{const[n,c]=(0,i.useState)(!1),d=(0,i.useCallback)((()=>{c(!n)}),[n]),u=l.artists;return(0,ue.jsxs)("div",{"data-testid":"track-artist-link-card-container",children:[(0,ue.jsx)("div",{className:Is,children:u.map(((i,c)=>(0,ue.jsx)("div",{className:r()({[_s]:n&&c>5,[Bs]:c>5}),children:(0,ue.jsx)(Gs,{name:i.name,uri:i.uri,images:i.images,size:e,LinkComponent:l.LinkComponent,disabled:a,enableI18nRoutes:s,enableI18nAdditionalPages:t},i.id)},`${i.uri}-${c}`)))}),u.length>6&&(0,ue.jsx)(o.H,{onClick:d,className:Fs,children:(0,ue.jsx)(Pa.Z,{as:"p",variant:"violaBold",children:n?m.Ru.get("show_less"):m.Ru.get("mwp.search.artists.all")})})]})};var $s=s(53777);const Ws=e=>{const{albumArtists:a,columnCount:s,imageForLyricsRequest:t,isPlayable:l,uri:n}=e,c=s-2,o={"--column-count":s,"--left-column-end":c-2,"--right-column-start":c},{isAnonymous:d}=(0,Wa.d4)(ts.Ht),u=(0,ba.n)(),{lyricsReturnsHoldoutEnabled:y,lyricsReturnsTreatmentEnabled:p}=Na(),h=(0,wa.l)(),g=h&&!y&&!p,x=h&&y&&!p,b=d||g||x,{data:v,status:j}=Za({uri:n,isNotPermittedToFetchLyrics:b,imageForLyricsRequest:t,isPlayable:l}),k=Cs(),R=g||x||k,L=!!v&&v.hasLyrics&&j!==Ba.UNAVAILABLE||d&&!k,f=(0,Wa.d4)(fs.MU),A=(0,Wa.d4)(fs.NR);return(0,ue.jsxs)(i.Suspense,{fallback:null,children:[L&&(0,ue.jsx)("div",{className:r()($e,{[We]:s>5}),style:{...o},"data-testid":"lyrics-container",children:R?null:d?(0,ue.jsx)(Ja,{buttonText:m.Ru.get("sign_up"),secondaryButtonText:m.Ru.get("login"),text:m.Ru.get("track-page.sign-into-premium-to-view-lyrics"),onPrimaryButtonClick:$s.ie,onSecondaryButtonClick:$s.PW}):(0,ue.jsx)(Ls,{uri:n,imageForLyricsRequest:t,isPlayable:l})}),(0,ue.jsx)("div",{className:r()(Ge,{[Ze]:s>5&&L}),style:{...o},children:(0,ue.jsx)(Zs,{artists:a,LinkComponent:je.N,disabled:!u,enableI18nRoutes:f,enableI18nAdditionalPages:A})})]})};var Hs=s(66634),Xs=s(48648),Ys=s(12074),Qs=s(50101);const Js="o2TlnuNKxRO5RnB9BpHB",Ks="q0Ke_aAvTcc4dO4wCHQt",ei="UlKUfS_GcROZmofuafOW",ai="I5LORTI1u3A6VoUvRCBf",si="TS85Qkpioa31wR0p4kzT",ii="yL1DLXBc05CR_ACv_NhA",ti="k5kRkUyoz9znqg_SGOVQ";var ri=s(52721),li=s(92159);let ni=function(e){return e.SMALL="small",e.LARGE="large",e}({});const ci=({art:e,disabled:a=!1,LinkComponent:s,name:i,size:t=ni.SMALL,type:n,uri:c})=>{const o=e?[e]:[],d=t===ni.SMALL?(0,ri.C)(n):function(e){switch(e){case li.s.SINGLE:return m.Ru.get("track-page.from-the-single");case li.s.EP:return m.Ru.get("track-page.from-the-ep");case li.s.COMPILATION:return m.Ru.get("track-page.from-the-compilation");case li.s.ALBUM:default:return m.Ru.get("track-page.from-the-album")}}(n),y=(0,l.Zp)();return(0,ue.jsxs)("div",{className:r()(Js,{[ei]:t===ni.SMALL,[Ks]:a}),children:[(0,ue.jsx)("div",{className:ai,children:(0,ue.jsx)(Ms.b,{images:o,size:Os.Qe.SIZE_80,title:i,type:Ds.c.ALBUM})}),(0,ue.jsxs)("div",{className:si,children:[(0,ue.jsx)(Pa.Z,{variant:t===ni.SMALL?"mestoBold":"finale",children:d}),(0,ue.jsx)(s,{to:c,children:(0,ue.jsx)(Pa.Z,{as:"div",className:ii,variant:"balladBold",dir:"auto",children:i})})]}),(0,ue.jsx)("div",{onClick:()=>{y((0,u.o_)(c).toURLPath(!0))},className:ti})]})};var oi=s(22010),di=s(61217),ui=s(37708),mi=s(44099),yi=s(20432);const pi=e=>(e.items||[]).map((e=>({name:e.profile.name,images:(e.visuals.avatarImage?.sources||[]).map((e=>({url:e.url,width:e.width,height:e.height}))),uri:e.uri,id:e.id}))),hi=e=>(e||[]).map((e=>e.profile.name)),gi=({uri:e,track:a})=>{const s=(0,ba.n)(),t=(0,as.V)(),l=(0,Xs.W)({type:"locale",uri:e}),u=m.Ru.getLocaleForTranslation(),L=parseInt(a.playcount||"0",10),{firstArtist:f,otherArtists:A,albumOfTrack:C,duration:I,name:N}=a,w=C?.coverArt,U=C?.copyright.items,E=C?.courtesyLine,{date:S,precision:B}=C?.date?(0,mi.mp)(C.date):{date:void 0,precision:void 0},_=w?.extractedColors?.colorRaw.hex,F=(w?.sources||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),M={uri:C?.uri||"",name:C?.name||""},O=hi(f.items),D=hi(A.items),V=pi(f),q=pi(A),z=[...V,...q],G=f.items[0],Z=a.albumOfTrack,$=Z?.playability?.playable,W={artistId:G?.id,artistName:G?.profile?.name,artistUri:G?.uri},H=a.albumOfTrack?.coverArt?.sources,X=(0,Se.h)(H||void 0,{desiredLabel:"large",desiredSize:600})??H?.[0]?.url??"",[Y,Q]=(0,i.useState)(!1),J=(0,i.useCallback)((()=>{Q(!Y)}),[Y]),K=A&&A.items.length>5,{spec:ee,logger:ae}=(0,Ra.r)(d.y,{data:{uri:e}}),se=a.playability.playable,ie=(0,qe.J)(e),{togglePlay:te,isPlaying:le,isActive:ne}=(0,re.P)({uri:ie},{featureIdentifier:"track"}),ce=Cs(),oe=(0,wa.l)(),{lyricsReturnsHoldoutEnabled:de}=Na(),me=(0,i.useCallback)((()=>(0,ui.rO)({i18n:m.Ru,trackArtistsList:[...O,...D].join(m.Ru.getSeparator()),trackName:a.name,shouldLocalize:l,disabled:ce||oe&&de})),[O,oe,de,D,l,a.name,ce]),ye=(0,i.useCallback)(((e,a)=>{ae.logInteraction(ee.headerFactory().artistLinkFactory({position:a.position,uri:a.creator.uri}).hitUiNavigate({destination:a.creator.uri}))}),[ae,ee]),pe=(0,i.useCallback)((()=>{const a=(0,va.$I)({isPlaying:le,isActive:ne,spec:ee.actionBarFactory().playButtonFactory(),logger:ae,uri:e});te({loggingParams:a})}),[ne,le,ae,ee,te,e]),he=Z?.uri,ge=(0,i.useMemo)((()=>[...f.items,...A.items].map((e=>({uri:e.uri,name:e.profile.name})))),[f.items,A.items]),xe=(0,ue.jsx)(p.P,{uri:e,albumUri:he,artists:ge}),{similarAlbumsAboveEnabled:be,similarAlbumsBelowEnabled:ke}={similarAlbumsAboveEnabled:P(),similarAlbumsBelowEnabled:T()};return(0,ue.jsxs)("section",{"data-testid":"track-page",children:[(0,ue.jsx)(h.Q,{children:me()}),(0,ue.jsx)(Me.c,{artistOrShow:ge.map((e=>e.name)).join(m.Ru.getSeparator()),title:N,uri:e,entityType:Me.p.TRACK}),(0,ue.jsxs)(g.z,{backgroundColor:_,children:[(0,ue.jsxs)(v.h,{children:[(0,ue.jsx)(Re.D,{size:"medium",onClick:pe,disabled:!se,isPlaying:le,uri:e}),(0,ue.jsx)(y.h,{menu:xe,children:(0,ue.jsx)(j.X,{text:N,dragUri:e,dragLabel:N})})]}),(0,ue.jsx)(y.h,{menu:xe,children:(0,ue.jsx)(x.K,{dragUri:e,images:F,name:N,placeholderType:"album"})}),(0,ue.jsxs)(b.Y,{children:[(0,ue.jsx)(n.E,{variant:"bodySmallBold",children:m.Ru.get("song")}),(0,ue.jsx)(y.h,{menu:xe,children:(0,ue.jsx)(R.mm,{dragUri:e,dragLabel:N,children:N})}),(0,ue.jsx)(k.t,{creators:V,releaseDate:S,releaseDatePrecision:B,durationMilliseconds:I.totalMilliseconds,onCreatorClick:ye,isTrack:!0,album:M,playcount:L})]})]}),(0,ue.jsx)(La,{uri:e,togglePlay:te,isPlaying:le,isActive:ne,spec:(0,i.useMemo)((()=>ee.actionBarFactory()),[ee]),logger:ae,backgroundColor:_,name:N,isPlayable:se,albumUri:he,artists:ge}),(0,ue.jsxs)(Ga,{children:[(0,ue.jsxs)("div",{className:"contentSpacing",children:[(0,ue.jsx)("div",{className:He,children:(0,ue.jsx)(Qs.E,{render:({columnCount:a})=>(0,ue.jsx)(Ws,{imageForLyricsRequest:X,albumArtists:z,columnCount:a,uri:e,isPlayable:se}),rowGap:c.lT})}),(0,ue.jsx)(ve,{subtitle:m.Ru.get("internal-link-recommender.based-on-this-song"),uri:a.uri,entityType:Ds.c.TRACK}),(0,ue.jsx)(Ee,{artistName:G.profile.name,artistUri:G.uri,headerClassName:Je,rowClassName:He,topTracks:G.discography.topTracks,topTracksTransformer:Fe.fX,uri:a.uri}),(0,ue.jsx)(Be,{className:Qe,releases:G?.discography?.popularReleasesAlbums,...W}),(0,ue.jsx)(Ne,{albums:G?.discography?.albums,className:Qe,...W}),(0,ue.jsx)(_e,{className:Qe,singles:G?.discography?.singles,...W}),A.items.length>0&&(0,ue.jsx)("div",{className:ea,children:A.items.map(((e,a)=>(0,ue.jsx)(Be,{className:r()(Ke,{[sa]:a>4,[ia]:Y&&a>4}),releases:e.discography.popularReleasesAlbums,artistName:e.profile.name,artistId:e.id,artistUri:e.uri,artistImages:e.visuals.avatarImage?.sources},e.id)))}),K&&(0,ue.jsx)(o.H,{onClick:J,className:ta,children:(0,ue.jsx)(n.E,{as:"h2",variant:"bodySmallBold",children:Y?m.Ru.get("show_less"):m.Ru.get("mwp.search.artists.all")})}),be&&(0,ue.jsx)("div",{"data-testid":"similar-albums-above-to-be-added"}),(0,ue.jsx)(Pe,{artistId:G.id,className:r()(Qe,{[aa]:A.items.length>0}),fansAlsoLike:G.relatedContent.relatedArtists.items,title:m.Ru.get("artist-page.fansalsolike")}),ke&&(0,ue.jsx)("div",{"data-testid":"similar-albums-below-to-be-added"}),Z&&(0,ue.jsx)(ci,{art:Z.coverArt?.sources[0],disabled:!$||!s,LinkComponent:je.N,name:Z.name,type:Z.type,size:ni.LARGE,uri:Z.uri}),(0,ue.jsx)(la,{richTrack:a})]}),(0,ue.jsx)("div",{className:"contentSpacing",children:(0,ue.jsxs)("div",{className:Xe,children:[S&&(0,ue.jsx)(n.E,{as:"p",variant:"bodySmall",className:ra,children:(0,yi.rh)((0,yi.ad)(S),u,{year:"numeric",month:"long",day:"numeric"},B)}),(0,ue.jsx)(Ys.Z,{copyrights:U||[],courtesyLine:E}),!t&&(0,ue.jsx)($a,{uri:e,imageForLyricsRequest:X,isPlayable:se})]})})]})]})},xi=(0,i.memo)((function(){const{trackId:e=""}=(0,l.g)(),a=(0,u.tR)(e).toURI(),s=(0,Hs.J)({uri:a});return s.loading||s.error||"Track"!==s.data?.trackUnion?.__typename?(0,ue.jsx)(ke.A,{hasError:!s.loading,errorMessage:m.Ru.get("track-page.error")}):(0,ue.jsx)(di.P,{surface:oi.u.TRACK,uris:[a,s.data.trackUnion.albumOfTrack?.uri??null],children:(0,ue.jsx)(gi,{uri:a,track:s.data.trackUnion})})}))},66634:(e,a,s)=>{s.d(a,{J:()=>l});var i=s(96266),t=s(61869);const r=new i.l("getTrack","query","ae85b52abb74d20a4c331d4143d4772c95f34757bfa8c625474b912b9055b5c0",null),l=(e,a)=>(0,t.I)(r,e,a)}}]);
//# sourceMappingURL=xpui-routes-track-v2.js.map